(function(e){function t(t){for(var a,s,o=t[0],l=t[1],c=t[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],a=!0,o=1;o<i.length;o++){var l=i[o];0!==n[l]&&(a=!1)}a&&(r.splice(t--,1),e=s(s.s=i[0]))}return e}var a={},n={app:0},r=[];function s(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=a,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(i,a,function(t){return e[t]}.bind(null,a));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;r.push([1,"chunk-vendors"]),i()})({0:function(e,t){},"0c58":function(e,t,i){"use strict";i("2441")},1:function(e,t,i){e.exports=i("cd49")},2:function(e,t){},2441:function(e,t,i){},"25b0":function(e,t,i){},"26d8":function(e,t,i){"use strict";i("25b0")},3:function(e,t){},"3c13":function(e,t,i){},4:function(e,t){},"45a1":function(e,t,i){},5:function(e,t){},6:function(e,t){},7:function(e,t){},8:function(e,t){},"8a94":function(e,t,i){},be53:function(e,t,i){"use strict";i("3c13")},cd49:function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),n=i("7496"),r=i("40dc"),s=i("5bc1"),o=i("ce7e"),l=i("f6c4"),c=i("f774"),u=i("2fa4"),d=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(n["a"],[t(r["a"],{attrs:{app:"",dense:e.$vuetify.breakpoint.mobile}},[t(s["a"],{on:{click:function(t){return t.stopPropagation(),e.sidebarToggle.apply(null,arguments)}}}),t(u["a"]),t("PageController"),t(o["a"],{class:e.$vuetify.breakpoint.mobile?"mx-1":"mx-4",attrs:{vertical:""}}),t("ScaleController"),t(o["a"],{class:e.$vuetify.breakpoint.mobile?"mx-1":"mx-4",attrs:{vertical:""}}),t(u["a"]),e.$vuetify.breakpoint.mobile?e._e():t("PdfFindBar"),t("WaterMark"),t("SecondaryToolbar")],1),t(c["a"],{attrs:{absolute:"",left:"",temporary:""},model:{value:e.sideBar.visible,callback:function(t){e.$set(e.sideBar,"visible",t)},expression:"sideBar.visible"}},[t("PdfSidebar")],1),t(l["a"],[t("ProgressBar"),t("PdfViewer",{attrs:{url:e.fileUrl,textLayerMode:e.textLayerMode}}),t("PasswordPrompt")],1),t("PasswordVerify",{ref:"signPwd",attrs:{visible:e.isPwdDialogVisible},on:{handleSubmit:e.onSignPwdSubmit,hideSignPwd:function(t){return e.setIsPwdDialogVisible(!1)}}})],1)},p=[],h=i("5530"),f=(i("99af"),i("b0c0"),i("8336")),v=i("a609"),m=i("b0af"),g=i("a523"),w=i("132d"),b=i("e449"),_=i("0fd9"),S=i("8654"),P=function(){var e=this,t=this,i=t._self._c;t._self._setupProxy;return i(b["a"],{attrs:{"offset-y":"","close-on-click":!1,"close-on-content-click":!1,"allow-overflow":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i(f["a"],t._g(t._b({attrs:{id:"viewFind",icon:""}},"v-btn",n,!1),a),[i(w["a"],[t._v("mdi-magnify")])],1)]}}])},[i(m["a"],[i(g["a"],[i(_["a"],{staticClass:"findbarInputContainer",attrs:{justify:"space-around",align:"center",id:"findbarInputContainer"}},[i(S["a"],{attrs:{id:"findInput",placeholder:"在文档中查找...",counter:t.counter,"counter-value":function(t){return e.current}},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}}),i(f["a"],{attrs:{icon:""},on:{click:function(e){return t.dispatch("again",!0)}}},[i(w["a"],[t._v("mdi-arrow-up")])],1),i(f["a"],{attrs:{icon:""},on:{click:function(e){return t.dispatch("again")}}},[i(w["a"],[t._v("mdi-arrow-down")])],1)],1),i(_["a"],{attrs:{justify:"space-around",align:"center"}},[i(v["a"],{attrs:{tile:"",group:"",multiple:""},model:{value:t.toggle_multiple,callback:function(e){t.toggle_multiple=e},expression:"toggle_multiple"}},[i(f["a"],{attrs:{text:"",small:""},on:{click:function(e){return t.updateType("highlightallchange")}}},[t._v(" 全部高亮 ")]),i(f["a"],{attrs:{text:"",small:""},on:{click:function(e){return t.updateType("casesensitivitychange")}}},[t._v(" 区分大小写 ")]),i(f["a"],{attrs:{text:"",small:""},on:{click:function(e){return t.updateType("diacriticmatchingchange")}}},[t._v(" 匹配变音符号 ")]),i(f["a"],{attrs:{text:"",small:""},on:{click:function(e){return t.updateType("entirewordchange")}}},[t._v(" 字词匹配 ")])],1)],1)],1)],1)],1)},y=[],D=(i("d81d"),i("b64b"),i("a9e3"),i("caad"),i("2532"),i("d3b7"),i("159b"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"appContainer",attrs:{id:"appContainer"},on:{dragover:e.onDragover,drop:e.onDrop}},[e._m(0),t("input",{staticClass:"fileInput",attrs:{type:"file",id:"fileInput"}})])}),k=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"viewerContainer",attrs:{id:"viewerContainer"}},[t("div",{staticClass:"pdfViewer",attrs:{id:"viewer"}})])}],E={PDF:{ZOOM_IN:"zoomin",ZOOM_OUT:"zoomout",FIRST_PAGE:"firstpage",LAST_PAGE:"lastpage",PREVIOUS_PAGE:"previouspage",NEXT_PAGE:"nextpage",FIND_MATCHES_COUNT:"findmatchescount",PAGE_NUMBER_CHANGED:"pagenumberchanged",PAGE_CHANGING:"pagechanging",FIND:"find",UPDATE_FIND_MATCHES_COUNT:"updatefindmatchescount",UPDATE_FIND_CONTROL_STATE:"updatefindcontrolstate",ROTATE_CHANGING:"rotateChanging",SCALE_CHANGING:"scalechanging",SCALE_CHANGED:"scalechanged",FILE_INPUT_CHANGE:"fileinputchange",DOCUMENT_ERROR:"documenterror",PRESENTATION_MODE_CHANGED:"presentationmodechanged",OUTLINE_LOADED:"outlineloaded",ATTACHMENTS_LOADED:"attachmentsloaded",LAYERS_LOADED:"layersloaded",SIDEBAR_VIEW_CHANGED:"sidebarviewchanged",PAGE_RENDERED:"pagerendered",SWITCH_SCROLL_MODE:"switchScrollMode",SWITCH_SPREAD_MODE:"switchSpreadMode",UPDATE_LOADING_BAR:"updateloadingbar",SHOW_LOADING_BAR:"showloadingbar",HIDE_LOADING_BAR:"hideloadingbar",SET_PAGES_COUNT:"setpagescount",SET_PAGE_NUMBER:"setpagenumber",SET_PAGE_SCALE:"setpagescale",DOCUMENT_LOADED:"documentLoaded",SUBSCRIBE_OUTLINE:"subscribeOutline",SUBSCRIBE_ATTACHMENT:"subscribeAttachment",SUBSCRIBE_THUMBNAIL_VIEW:"subscribeThumbnailView",UPDATE_THUMBNAIL_VIEW:"updateThumbnailView",OUTLINE_BIND_LINK:"outlineBindLink",ATTACHMENT_BIND_LINK:"attachmentBindLink",THUMBNAIL_VIEW_BIND_LINK:"thumbnailViewBindLink",SIDEBAR:{TOGGLE:"toggle",SWITCH_VIEW:"switchView",UPDATE_THUMBNAIL_VIEWER:"updatethumbnailviewer"}},OFD:{},IMAGE:{},COMMON:{PASSWORD:{VERIFY:"common.password.verify",CANCEL:"common.password.cancel",OPEN:"common.password.open",PASSED:"common.password.passed"}}},C=E,T=(i("498a"),function(e,t){var i={x:e.x,y:t-e.y};return i}),O=function(e,t,i){if(i){var a=document.createElement("canvas"),n=a.getContext("2d");return n?(n.font=t+"px "+i,n.measureText(e).width):t*e.length}return t*e.length},x=function(e,t,i){var a={color:"",font:"",fontName:"",fontSize:0,fullscreen:"",file:"",fileWidth:0,fileHeight:0,leftBottomPosition:{x:0,y:0},opacity:0,position:{x:0,y:0},rotate:0,source:"",text:"",density:0,width:0,height:0};if(e.file&&0!==e.file.length?a.source="file":a.source="text","text"===a.source&&(a.text=e.text.trim(),a.font=e.fontName,a.fontName=e.font,a.fontSize=e.size,a.color=e.color),"file"===a.source&&(a.file=e.file),a.rotate=Number(e.rotate)%360,a.rotate<0&&(a.rotate=360+a.rotate),a.rotate=0!==a.rotate?360-a.rotate:0,a.opacity=e.opacity,e.isTiled)a.fullscreen="tile",a.density=Number(e.density)/100;else{a.fullscreen="no",a.position={x:0,y:0};var n=20;"top"===e.vertical?a.position.y=-i/2+n:"bottom"===e.vertical?a.position.y=i/2-n:"middle"===e.vertical?a.position.y=0:a.position.y=Number(e.vertical),"left"===e.horizontal?a.position.x=-t/2+n:"right"===e.horizontal?a.position.x=t/2-n:"center"===e.horizontal?a.position.x=0:a.position.x=Number(e.horizontal),a.leftBottomPosition=T({x:t/2+a.position.x,y:i/2+a.position.y},i)}return a},A=function(e){var t={x:0,y:0},i=e.rotate,a=i*Math.PI/180,n=0,r=0;if("text"===e.source){var s=O(e.text,e.fontSize);n=s/e.density,r=e.fontSize/e.density}"file"===e.source&&(n=e.fileWidth/e.density,r=e.fileHeight/e.density);var o=Math.sqrt(Math.pow(n,2)+Math.pow(r,2)),l=Math.atan(r/n),c=0,u=0;return 0===i||180===i?(u=r,c=n):90===i||270===i?(u=n,c=r):0<i&&i<90?(u=o*Math.abs(Math.sin(a+l)),c=o*Math.abs(Math.cos(a+l))):90<i&&i<180?(u=o*Math.abs(Math.sin(Math.PI-a+l)),c=o*Math.abs(Math.cos(Math.PI-a+l))):180<i&&i<270?(u=o*Math.abs(Math.sin(a-Math.PI+l)),c=o*Math.abs(Math.cos(a-Math.PI+l))):270<i&&i<360&&(u=o*Math.abs(Math.sin(2*Math.PI-a+l)),c=o*Math.abs(Math.cos(2*Math.PI-a+l))),t.x=c,t.y=u,t},I=function(e,t,i,a,n,r){var s={x:[],y:[]},o=e,l=e,c=!0;while(c){if(o-=i,o<0)break;s.x.push(o)}s.x.push(e);while(c){if(l+=i,l>n)break;s.x.push(l)}var u=t,d=t;while(c){if(u+=a,u>r)break;s.y.push(u)}s.y.push(t);while(c){if(d-=a,d<0)break;s.y.push(d)}return s},N=function(e,t,i,a,n,r){var s=document.createElement("canvas");s.width=a,s.height=n;var o=s.getContext("2d"),l=s.width/2,c=s.height/2;o&&(o.translate(s.width/2,s.height/2),o.rotate(e.rotate*Math.PI/180),o.translate(-s.width/2,-s.height/2),o.globalAlpha=e.opacity,new Promise((function(s){if("text"===e.source&&e.text)o.textAlign="center",o.fillStyle=e.color,o.font=e.fontSize*i+"px "+e.font,o.fillText(e.text,l,c),s();else if("file"===e.source&&e.file){var u=new Image;u.onload=function(){var t=u.width*i,a=u.height*i;e.fileWidth=u.width,e.fileHeight=u.height,o.drawImage(u,0,0,u.width,u.height,l-t/2,c-a/2,t,a),s()},u.src=e.file}else if(r){t.width=a,t.height=n;var d=t.getContext("2d");d&&d.drawImage(r.canvas,0,0,r.canvas.width,r.canvas.height,0,0,a,n)}})).then((function(){var o=s.toDataURL("png",1);return new Promise((function(s){var l=new Image;l.onload=function(){var o=t.getContext("2d");r&&o&&(t.width=a,t.height=n,o.drawImage(r.canvas,0,0,r.canvas.width,r.canvas.height,0,0,a,n));var c=a/2,u=n/2;if("tile"===e.fullscreen)for(var d,p=A(e),h=p.x,f=p.y,v=d=h>f?h:f,m=I(a/2,n/2,v*i,d*i,a,n),g=0;g<m.x.length;g++)for(var w=0;w<m.y.length;w++)o&&o.drawImage(l,0,0,l.width,l.height,m.x[g]-l.width/2,m.y[w]-l.height/2,l.width,l.height);else{var b=e.position.x*i,_=e.position.y*i;o&&o.drawImage(l,0,0,l.width,l.height,c-l.width/2+b,u-l.height/2+_,l.width,l.height)}s()},l.src=o}))})))},V=(i("25f0"),i("e9c4"),i("3452")),B="PDF_PWD",L=6048e5,M="+96]4Up@<ZS3(#V0y55-Z-e0",R=V["enc"].Utf8,F=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i?localStorage.setItem(e,V["AES"].encrypt(t,M).toString()):localStorage.setItem(e,t)},U=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=localStorage.getItem(e);return i?t?V["AES"].decrypt(i,M).toString(R):i:null},H=function(e){localStorage.removeItem(e)},j=function(){var e=U(B,!0);if(e){var t={hasTimeOut:!1,password:"",overTime:""},i=JSON.parse(e),a=i.password,n=i.overTime,r=Math.abs(n-(new Date).getTime()),s=r>L;return s&&H(B),t.overTime=n,t.password=a,t.hasTimeOut=s,t}return{hasTimeOut:!0}},$=function(e){var t=e.password,i=e.isRemember;if(t.length)if(i){var a=(new Date).getTime()+L;F(B,JSON.stringify({password:t,overTime:a}),!0)}else i&&H(B)};function G(e,t,i){return Math.min(Math.max(e,t),i)}function W(e){var t=e.getViewport({scale:1}),i=document.createElement("canvas"),a=1;i.width=t.width*a,i.height=t.height*a;var n=Math.min(i.width/t.width,i.height/t.height);return e.render({canvasContext:i.getContext("2d"),viewport:e.getViewport({scale:n})}).promise.then((function(){return i}))}var z={props:{url:{type:String},textLayerMode:{type:Number},password:{type:String}},methods:{onDragover:function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"===e.dataTransfer.effectAllowed?"copy":"move"},onDrop:function(e){e.preventDefault();var t=this.$PDFViewerApplication.eventBus,i=e.dataTransfer.files;i&&0!==i.length&&t.dispatch(C.PDF.FILE_INPUT_CHANGE,{source:this,fileInput:e.dataTransfer})}},mounted:function(){this.url&&(this.$PDFViewerApplication.defaultUrl=this.url);var e={appContainer:document.getElementById("appContainer"),mainContainer:document.getElementById("viewerContainer"),viewerContainer:document.getElementById("viewer"),textLayerMode:this.textLayerMode,password:this.password,thumbnailView:document.getElementById("thumbnailView"),outlineView:document.getElementById("outlineView"),attachmentsView:document.getElementById("attachmentsView")};this.$PDFViewerApplication.run(e)}},q=z,K=(i("ee3f"),i("2877")),Z=Object(K["a"])(q,D,k,!1,null,"4fff0f64",null),X=Z.exports,Q=i("3835"),J=i("c7eb"),Y=i("1da1"),ee=(i("3ca3"),i("ddb0"),i("a15b"),i("4795"),i("e0b1")),te=i("3c71"),ie=i("9886"),ae=(i("7c05"),i("d4ec")),ne=i("bee2"),re=(i("2b3d"),i("9861"),function(){function e(t){Object(ae["a"])(this,e),this.app=t,this.eventBus=t.eventBus}return Object(ne["a"])(e,[{key:"zoomIn",value:function(){this.app.zoomIn()}},{key:"zoomOut",value:function(){this.app.zoomOut()}},{key:"scaleChanged",value:function(e){this.app.pdfViewer.currentScaleValue=e}},{key:"scaleChanging",value:function(e){this.eventBus.dispatch(C.PDF.SET_PAGE_SCALE,{pageScaleValue:e.presetValue,pageScale:e.scale}),this.app.pdfViewer.update()}},{key:"showLoadingBar",value:function(){this.eventBus.dispatch(C.PDF.SHOW_LOADING_BAR)}},{key:"hideLoadingBar",value:function(){this.eventBus.dispatch(C.PDF.HIDE_LOADING_BAR)}},{key:"updateLoadingBar",value:function(e){this.eventBus.dispatch(C.PDF.UPDATE_LOADING_BAR,e)}},{key:"previousPage",value:function(){this.app.pdfViewer.previousPage()}},{key:"nextPage",value:function(){this.app.pdfViewer.nextPage()}},{key:"firstPage",value:function(){this.app.pdfDocument&&(this.app.page=1)}},{key:"lastPage",value:function(){this.app.pdfDocument&&(this.app.page=this.app.pagesCount)}},{key:"pageChanging",value:function(e){var t,i=e.pageNumber;this.eventBus.dispatch(C.PDF.SET_PAGE_NUMBER,{pageNumber:i}),null===(t=this.app.pdfThumbnailViewer)||void 0===t||t.scrollThumbnailIntoView(i)}},{key:"pageNumberChanged",value:function(e){var t=this.app.pdfViewer;""!==e&&this.app.pdfLinkService.goToPage(e),e!==t.currentPageNumber.toString()&&this.pageChanging({pageNumber:t.currentPageNumber})}},{key:"setPagesCount",value:function(e){this.eventBus.dispatch(C.PDF.SET_PAGES_COUNT,{pagesCount:e.pagesCount})}},{key:"fileInputChange",value:function(e){var t=e.fileInput.files[0],i=URL.createObjectURL(t);t.name&&(i={url:i,originalUrl:t.name}),this.app.open(i)}},{key:"initialized",value:function(){var e=this,t=this.app.defaultUrl;if(t)try{this.app.open(t)}catch(i){this.app.l10n.get("loading_error").then((function(t){e.app._documentError(t,i)}))}}},{key:"rotatePage",value:function(e){this.app.pdfDocument&&(this.app.pdfViewer.pagesRotation+=e)}},{key:"switchSpreadMode",value:function(e){this.app.pdfDocument&&(this.app.pdfViewer.spreadMode=e)}},{key:"switchScrollMode",value:function(e){this.app.pdfDocument&&(this.app.pdfViewer.scrollMode=e)}},{key:"updateFindMatchesCount",value:function(e){var t=e.matchesCount;this.eventBus.dispatch(C.PDF.FIND_MATCHES_COUNT,t)}},{key:"documentLoaded",value:function(){this.eventBus.dispatch(C.PDF.DOCUMENT_LOADED),this.subscribeThumbnailView()}},{key:"subscribeThumbnailView",value:function(){var e=this;if(!this.app.pdfSidebar){for(var t=this.app,i=t.pagesCount,a=t.pdfDocument,n=[],r=0;r<i;r++)n.push(a.getPage(r+1).then(W));Promise.all(n).then((function(t){console.log("thumbnails",t),e.eventBus.dispatch(C.PDF.SUBSCRIBE_THUMBNAIL_VIEW,t)}))}}},{key:"updateThumbnailView",value:function(e){var t=e.pageNumber;if(!this.app.pdfSidebar){var i='[data-page-number="'.concat(t,'"]'),a=document.querySelector(i).querySelector("canvas"),n=a.toDataURL();console.log("页面更新",t),this.eventBus.dispatch(C.PDF.UPDATE_THUMBNAIL_VIEW,n)}}},{key:"subscribeOutline",value:function(e){this.app.pdfSidebar||this.eventBus.dispatch(C.PDF.SUBSCRIBE_OUTLINE,e)}},{key:"subscribeAttachment",value:function(e){this.app.pdfSidebar||this.eventBus.dispatch(C.PDF.SUBSCRIBE_ATTACHMENT,e)}},{key:"thumbnailViewBindLink",value:function(e){this.app.pdfLinkService.goToPage(e)}},{key:"outlineBindLink",value:function(e){e&&this.app.pdfLinkService.goToDestination(e)}},{key:"attachmentBindLink",value:function(e){var t=e.content,i=e.filename,a=document.createElement("a");a.innerHTML=i,this.app.downloadManager.openOrDownloadData(a,t,i)}}]),e}()),se=re,oe=i("ade3"),le=(i("d9e2"),{0:"highlightAll",1:"caseSensitive",2:"matchDiacritics",3:"entireWord"}),ce=["预览","大纲","附件"],ue=C.COMMON.PASSWORD,de=function(){function e(t){var i=t.eventBus,a=t.l10n;Object(ae["a"])(this,e),Object(oe["a"])(this,"updateCallback",null),Object(oe["a"])(this,"reason",null),this.l10n=a,this.eventBus=i,this.verify=this.verify.bind(this),this.cancel=this.cancel.bind(this),this.invokeCallback=this.invokeCallback.bind(this),this.eventBus.on(ue.VERIFY,this.verify),this.eventBus.on(ue.CANCEL,this.cancel)}return Object(ne["a"])(e,[{key:"open",value:function(){var e=Object(Y["a"])(Object(J["a"])().mark((function e(){var t,i;return Object(J["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.reason===ee["PasswordResponses"].INCORRECT_PASSWORD,e.next=3,this.l10n.get("password_".concat(t?"invalid":"label"));case 3:i=e.sent,this.eventBus.dispatch(ue.OPEN,{label:i});case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"verify",value:function(e){var t=e.password,i=e.isCancel,a=void 0!==i&&i;t.length&&(this.invokeCallback(t),this.isCancel=a)}},{key:"cancel",value:function(){this.invokeCallback(new Error("PasswordPrompt cancelled."))}},{key:"invokeCallback",value:function(e){this.updateCallback&&(this.updateCallback(e),this.updateCallback=null,this.eventBus.dispatch(ue.PASSED))}},{key:"setUpdateCallback",value:function(e,t){this.updateCallback=e,this.reason=t,this.isCancel&&this.cancel()}}]),e}(),pe=de,he=function(){function e(t){var i=t.pdfViewer,a=t.pdfThumbnailViewer,n=t.eventBus,r=t.l10n;Object(ae["a"])(this,e),this.isOpen=!1,this.active=te["SidebarView"].THUMBS,this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,this.onToggled=null,this.pdfViewer=i,this.pdfThumbnailViewer=a,this.eventBus=n,this.l10n=r,this.addEventListeners()}return Object(ne["a"])(e,[{key:"reset",value:function(){this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,this.switchView(te["SidebarView"].THUMBS)}},{key:"visibleView",get:function(){return this.isOpen?this.active:te["SidebarView"].NONE}},{key:"setInitialView",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te["SidebarView"].NONE;this.isInitialViewSet||(this.isInitialViewSet=!0,e!==te["SidebarView"].NONE&&e!==te["SidebarView"].UNKNOWN?(this.switchView(e,!0),this.isInitialEventDispatched||this.dispatchEvent()):this.dispatchEvent())}},{key:"switchView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e!==this.active,a=!1;switch(e){case te["SidebarView"].NONE:return void(this.isOpen&&this.close());case te["SidebarView"].THUMBS:this.isOpen&&i&&(a=!0);break;case te["SidebarView"].OUTLINE:if(this.outlineButton.disabled)return;break;case te["SidebarView"].ATTACHMENTS:if(this.attachmentsButton.disabled)return;break;case te["SidebarView"].LAYERS:if(this.layersButton.disabled)return;break;default:return void console.error('PDFSidebar.switchView: "'.concat(e,'" is not a valid view.'))}this.active=e,!t||this.isOpen?(a&&(this.updateThumbnailViewer(),this.forceRendering()),i&&this.dispatchEvent()):this.open()}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this.active===te["SidebarView"].THUMBS&&this.updateThumbnailViewer(),this.forceRendering(),this.dispatchEvent())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.forceRendering(),this.dispatchEvent())}},{key:"toggle",value:function(){this.isOpen?this.close():this.open()}},{key:"dispatchEvent",value:function(){this.isInitialViewSet&&!this.isInitialEventDispatched&&(this.isInitialEventDispatched=!0),this.eventBus.dispatch(C.PDF.SIDEBAR_VIEW_CHANGED,{source:this,view:this.visibleView})}},{key:"forceRendering",value:function(){this.onToggled?this.onToggled():(this.pdfViewer.forceRendering(),this.pdfThumbnailViewer.forceRendering())}},{key:"updateThumbnailViewer",value:function(){for(var e=this.pdfViewer,t=this.pdfThumbnailViewer,i=e.pagesCount,a=0;a<i;a++){var n=e.getPageView(a);if((null===n||void 0===n?void 0:n.renderingState)===te["RenderingStates"].FINISHED){var r=t.getThumbnail(a);r.setImage(n)}}t.scrollThumbnailIntoView(e.currentPageNumber)}},{key:"addEventListeners",value:function(){var e=this;this.eventBus.on(C.PDF.SIDEBAR.TOGGLE,(function(){e.toggle()})),this.eventBus.on(C.PDF.SIDEBAR.UPDATE_THUMBNAIL_VIEWER,(function(){e.updateThumbnailViewer()}))}}]),e}(),fe=he,ve=5e3,me={UNKNOWN:-1,PREVIOUS:0,INITIAL:1};"undefined"!==typeof window&&"Worker"in window&&(ee["GlobalWorkerOptions"].workerPort=new ie["a"]);var ge={_initializedCapability:Object(ee["createPromiseCapability"])(),appConfig:null,pdfDocument:null,pdfLoadingTask:null,pdfViewer:null,pdfHistory:null,pdfCursorTools:null,eventBus:new te["EventBus"],isViewerEmbedded:window.parent!==window,l10n:te["NullL10n"],downloadComplete:!1,defaultUrl:"",pdfThumbnailViewer:null,pdfSidebar:null,pdfOutlineViewer:null,pdfAttachmentViewer:null,initialize:function(e){var t=this;return Object(Y["a"])(Object(J["a"])().mark((function i(){return Object(J["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:t.appConfig=e,t._initializeViewerComponents(),t.bindEvents(),t._initializedCapability.resolve();case 4:case"end":return i.stop()}}),i)})))()},_initializeViewerComponents:function(){var e=this.appConfig,t=new te["PDFRenderingQueue"];t.onIdle=this._cleanup.bind(this),this.pdfRenderingQueue=t;var i=new te["PDFLinkService"]({eventBus:this.eventBus});this.pdfLinkService=i;var a=new te["PDFFindController"]({linkService:i,eventBus:this.eventBus});this.findController=a,this.passwordPrompt=new pe({eventBus:this.eventBus,l10n:this.l10n});var n=e.mainContainer,r=e.viewerContainer,s=new te["PDFViewer"]({container:n,viewer:r,findController:a,eventBus:this.eventBus,linkService:i,l10n:this.l10n,textLayerMode:e.textLayerMode});this.pdfViewer=s,t.setViewer(s),i.setViewer(s);var o=e.thumbnailView,l=e.outlineView,c=e.attachmentsView;o&&(this.pdfThumbnailViewer=new te["PDFThumbnailViewer"]({container:o,eventBus:this.eventBus,renderingQueue:t,linkService:i,l10n:this.l10n}),t.setThumbnailViewer(this.pdfThumbnailViewer)),this.pdfHistory=new te["PDFHistory"]({eventBus:this.eventBus,linkService:i}),i.setHistory(this.pdfHistory);var u=o&&l&&c;u&&(this.pdfSidebar=new fe({pdfViewer:this.pdfViewer,pdfThumbnailViewer:this.pdfThumbnailViewer,eventBus:this.eventBus,l10n:this.l10n}),this.pdfSidebar.onToggled=this.forceRendering.bind(this)),l&&(this.pdfOutlineViewer=new te["PDFOutlineViewer"]({container:l,eventBus:this.eventBus,linkService:i})),this.downloadManager=new te["DownloadManager"],c&&(this.pdfAttachmentViewer=new te["PDFAttachmentViewer"]({container:c,eventBus:this.eventBus,downloadManager:this.downloadManager})),this.pdfCursorTools=new te["PDFCursorTools"]({container:n,eventBus:this.eventBus,cursorToolOnLoad:te["CursorTool"].SELECT})},_cleanup:function(){this.pdfDocument&&(this.pdfViewer.cleanup(),this.pdfThumbnailViewer.cleanup())},run:function(e){this.initialize(e).then((function(){return we.initialized()}))},get initialized(){return this._initializedCapability.settled},get initializedPromise(){return this._initializedCapability.promise},get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0},zoomIn:function(){this.pdfViewer.isInPresentationMode||this.pdfViewer.increaseScale()},zoomOut:function(){this.pdfViewer.isInPresentationMode||this.pdfViewer.decreaseScale()},get page(){return this.pdfViewer.currentPageNumber},set page(e){this.pdfViewer.currentPageNumber=e},close:function(){var e=this;return Object(Y["a"])(Object(J["a"])().mark((function t(){var i,a,n,r,s,o;return Object(J["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.pdfLoadingTask){t.next=2;break}return t.abrupt("return");case 2:return s=[],s.push(e.pdfLoadingTask.destroy()),e.pdfLoadingTask=null,e.pdfDocument&&(e.pdfDocument=null,null===(o=e.pdfThumbnailViewer)||void 0===o||o.setDocument(null),e.pdfViewer.setDocument(null),e.pdfLinkService.setDocument(null)),null===(i=e.pdfHistory)||void 0===i||i.reset(),null===(a=e.pdfSidebar)||void 0===a||a.reset(),null===(n=e.pdfOutlineViewer)||void 0===n||n.reset(),null===(r=e.pdfAttachmentViewer)||void 0===r||r.reset(),t.next=12,Promise.all(s);case 12:case"end":return t.stop()}}),t)})))()},open:function(e,t){var i=this;return Object(Y["a"])(Object(J["a"])().mark((function a(){var n,r,s,o;return Object(J["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!i.pdfLoadingTask){a.next=3;break}return a.next=3,i.close();case 3:if(n=Object.create(null),"string"===typeof e?n.url=e:e&&"byteLength"in e?n.data=e:e.url&&e.originalUrl&&(n.url=e.url),t)for(r in t)n[r]=t[r];return s=Object(ee["getDocument"])(Object(h["a"])(Object(h["a"])({},n),{},{cMapUrl:"./cmaps/",cMapPacked:!0,standardFontDataUrl:"./standard_fonts/"})),i.pdfLoadingTask=s,o=i.appConfig.password,s.onPassword=function(e,t){i.pdfLinkService.externalLinkEnabled=!1,i.passwordPrompt.setUpdateCallback(e,t),o?i.passwordPrompt.verify({password:o,isCancel:!0}):i.passwordPrompt.open()},s.onProgress=function(e){var t=e.loaded,a=e.total;i.progress(t/a)},a.abrupt("return",s.promise.then((function(e){i.load(e)}),(function(e){if(s===i.pdfLoadingTask){var t="loading_error";return e instanceof ee["InvalidPDFException"]?t="invalid_file_error":e instanceof ee["MissingPDFException"]?t="missing_file_error":e instanceof ee["UnexpectedResponseException"]&&(t="unexpected_response_error"),i.l10n.get(t).then((function(t){throw i._documentError(t,{message:null===e||void 0===e?void 0:e.message}),e}))}})));case 12:case"end":return a.stop()}}),a)})))()},_documentError:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._otherError(e,i),this.eventBus.dispatch(C.PDF.DOCUMENT_ERROR,{source:this,message:e,reason:null!==(t=null===i||void 0===i?void 0:i.message)&&void 0!==t?t:null})},_otherError:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[this.l10n.get("error_version_info",{version:ee["version"]||"?",build:ee["build"]||"?"})];t&&(i.push(this.l10n.get("error_message",{message:t.message})),t.stack?i.push(this.l10n.get("error_stack",{stack:t.stack})):(t.filename&&i.push(this.l10n.get("error_file",{file:t.filename})),t.lineNumber&&i.push(this.l10n.get("error_line",{line:t.lineNumber})))),Promise.all(i).then((function(t){console.error(e+"\n"+t.join("\n"))}))},progress:function(e){var t=this;if(!this.downloadComplete){var i=Math.round(100*e);we.updateLoadingBar(i),this.disableAutoFetchLoadingBarTimeout&&(clearTimeout(this.disableAutoFetchLoadingBarTimeout),this.disableAutoFetchLoadingBarTimeout=null),we.showLoadingBar(),this.disableAutoFetchLoadingBarTimeout=setTimeout((function(){we.hideLoadingBar(),t.disableAutoFetchLoadingBarTimeout=null}),ve)}},load:function(e){var t=this;this.pdfDocument=e,e.getDownloadInfo().then((function(e){var i=e.length;t._contentLength=i,t.downloadComplete=!0,we.hideLoadingBar()}));var i=e.getOpenAction().catch((function(){}));we.setPagesCount({pagesCount:e.numPages}),this.pdfLinkService.setDocument(e);var a=this.pdfViewer;a.setDocument(e);var n=this.pdfThumbnailViewer;null===n||void 0===n||n.setDocument(e);var r=a.firstPagePromise,s=a.onePageRendered,o=a.pagesPromise;r.then((function(){Promise.all([i]).then(function(){var i=Object(Y["a"])(Object(J["a"])().mark((function i(a){var n,r;return Object(J["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:n=Object(Q["a"])(a,1),r=n[0],t._initializePdfHistory({fingerprint:e.fingerprints[0],viewOnLoad:0,initialDest:null===r||void 0===r?void 0:r.dest}),t.setInitialView();case 3:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()).catch((function(){t.setInitialView()}))})),s.then((function(){e.getOutline().then((function(i){var a;e===t.pdfDocument&&(we.subscribeOutline(i),null===(a=t.pdfOutlineViewer)||void 0===a||a.render({outline:i,pdfDocument:e}))})),e.getAttachments().then((function(i){var a;e===t.pdfDocument&&(we.subscribeAttachment(i),null===(a=t.pdfAttachmentViewer)||void 0===a||a.render({attachments:i}))}))})),o.then((function(){we.documentLoaded()})),this.pdfHistory.initialize({fingerprint:e.fingerprints[0]})},_initializePdfHistory:function(e){var t=e.fingerprint,i=e.viewOnLoad,a=e.initialDest,n=void 0===a?null:a;this.pdfHistory&&(this.pdfHistory.initialize({fingerprint:t,resetHistory:i===me.INITIAL,updateUrl:!1}),this.pdfHistory.initialBookmark&&(this.initialBookmark=this.pdfHistory.initialBookmark,this.initialRotation=this.pdfHistory.initialRotation),n&&!this.initialBookmark&&i===me.UNKNOWN&&(this.initialBookmark=JSON.stringify(n),this.pdfHistory.push({explicitDest:n,pageNumber:null})))},setInitialView:function(){this.pdfViewer.currentScaleValue||(this.pdfViewer.currentScaleValue=te["DEFAULT_SCALE_VALUE"])},forceRendering:function(){this.pdfRenderingQueue.printing=!1,this.pdfRenderingQueue.isThumbnailViewEnabled=this.pdfSidebar.visibleView===te["SidebarView"].THUMBS,this.pdfRenderingQueue.renderHighestPriority()},bindEvents:function(){var e=this.eventBus,t=C.PDF,i=t.FIRST_PAGE,a=t.LAST_PAGE,n=t.NEXT_PAGE,r=t.ZOOM_IN,s=t.PREVIOUS_PAGE,o=t.ZOOM_OUT,l=t.PAGE_NUMBER_CHANGED,c=t.PAGE_CHANGING,u=t.SCALE_CHANGED,d=t.SCALE_CHANGING,p=t.ROTATE_CHANGING,h=t.SWITCH_SCROLL_MODE,f=t.SWITCH_SPREAD_MODE,v=t.FILE_INPUT_CHANGE,m=t.UPDATE_FIND_MATCHES_COUNT,g=t.OUTLINE_BIND_LINK,w=t.ATTACHMENT_BIND_LINK,b=t.THUMBNAIL_VIEW_BIND_LINK,_=t.PAGE_RENDERED;e._on(i,(function(e){return we.firstPage(e)})),e._on(a,(function(e){return we.lastPage(e)})),e._on(n,(function(e){return we.nextPage(e)})),e._on(s,(function(e){return we.previousPage(e)})),e._on(r,(function(e){return we.zoomIn(e)})),e._on(o,(function(e){return we.zoomOut(e)})),e._on(l,(function(e){return we.pageNumberChanged(e)})),e._on(u,(function(e){return we.scaleChanged(e)})),e._on(c,(function(e){return we.pageChanging(e)})),e._on(d,(function(e){return we.scaleChanging(e)})),e._on(p,(function(e){return we.rotatePage(e)})),e._on(h,(function(e){return we.switchScrollMode(e)})),e._on(f,(function(e){return we.switchSpreadMode(e)})),e._on(v,(function(e){return we.fileInputChange(e)})),e._on(m,(function(e){return we.updateFindMatchesCount(e)})),e._on(g,(function(e){return we.outlineBindLink(e)})),e._on(w,(function(e){return we.attachmentBindLink(e)})),e._on(b,(function(e){return we.thumbnailViewBindLink(e)})),e._on(_,(function(e){return we.updateThumbnailView(e)}))}},we=new se(ge);window.PDFViewerApplication=ge;var be=ge;X.install=function(e){e.component("PdfViewer",X),e.prototype.$PDFViewerApplication=be};C.PDF;var _e=X,Se=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e._v("OFDViewer")])},Pe=[],ye=a["a"].extend({}),De=ye,ke=Object(K["a"])(De,Se,Pe,!1,null,"486e649e",null),Ee=ke.exports;Ee.install=function(e){e.component("OfdViewer",Ee)};var Ce=Ee,Te=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e._v("ImageViewer")])},Oe=[],xe=a["a"].extend({}),Ae=xe,Ie=Object(K["a"])(Ae,Te,Oe,!1,null,"bdf8a9b0",null),Ne=Ie.exports;Ne.install=function(e){e.component("ImageViewer",Ne)};var Ve=Ne,Be=[_e,Ce,Ve],Le=function(e){Be.forEach((function(t){e.use(t)}))},Me={install:Le},Re=a["a"].extend({name:"PdfFindBar",data:function(){return{toggle_multiple:[],query:"",type:"find",current:0,total:0}},computed:{counter:function(){return!!this.total&&this.total}},watch:{toggle_multiple:function(){this.dispatch(this.type)},query:function(e){this.dispatch(""),""==e&&(this.current=0,this.total=0)}},methods:{dispatch:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.query,a=this.getSearchParams(),n=a.entireWord,r=a.highlightAll,s=a.caseSensitive,o=a.matchDiacritics;console.log("11",{source:this,type:e,query:i,phraseSearch:!0,entireWord:n,highlightAll:r,findPrevious:t,caseSensitive:s,matchDiacritics:o}),this.$PDFViewerApplication.eventBus.dispatch("find",{source:this,type:e,query:i,phraseSearch:!0,entireWord:n,highlightAll:r,findPrevious:t,caseSensitive:s,matchDiacritics:o})},getSearchParams:function(){var e=this,t={entireWord:!1,highlightAll:!1,caseSensitive:!1,matchDiacritics:!1};return Object.keys(le).map((function(i){var a=Number(i);if(e.toggle_multiple.includes(a)){var n=le[i];t[n]=!0}})),t},updateType:function(e){this.type=e}},mounted:function(){var e=this,t=this.$PDFViewerApplication.eventBus;t.on(C.PDF.FIND_MATCHES_COUNT,(function(t){var i=t.current,a=t.total;e.current=i,e.total=a})),t.on(C.PDF.UPDATE_FIND_CONTROL_STATE,(function(t){var i=t.state;1==i&&(e.result="找不到指定词语")}))}}),Fe=Re,Ue=(i("26d8"),Object(K["a"])(Fe,P,y,!1,null,"c787962a",null)),He=Ue.exports;He.install=function(e){e.component(He.name,He)};var je=He,$e=i("99d9"),Ge=i("71a3"),We=i("c671"),ze=i("fe57"),qe=i("71d9"),Ke=i("2a7f"),Ze=i("3a2f"),Xe=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t(qe["a"],{attrs:{light:"",dense:""}},[t(Ke["a"],[e._v(e._s(e.action))])],1),t(o["a"]),t(ze["a"],{attrs:{vertical:"","active-class":"active-btn"},on:{change:e.switchView}},[t(Ze["a"],{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(i){var a=i.attrs;return[t(Ge["a"],{staticClass:"min-tabs",attrs:{id:"viewThumbnail"}},[t(w["a"],e._b({on:{click:function(t){return e.switchView(e.SIDEBAR_VIEW.THUMBS)}}},"v-icon",a,!1),[e._v(" mdi-eye-outline ")])],1)]}}])},[t("span",[e._v("预览")])]),t(Ze["a"],{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(i){var a=i.attrs;return[t(Ge["a"],{staticClass:"min-tabs",attrs:{id:"viewOutline"}},[t(w["a"],e._b({on:{click:function(t){return e.switchView(e.SIDEBAR_VIEW.OUTLINE)}}},"v-icon",a,!1),[e._v(" mdi-list-box-outline ")])],1)]}}])},[t("span",[e._v("大纲")])]),t(Ze["a"],{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(i){var a=i.attrs;return[t(Ge["a"],{staticClass:"min-tabs",attrs:{id:"viewAttachments"}},[t(w["a"],e._b({on:{click:function(t){return e.switchView(e.SIDEBAR_VIEW.ATTACHMENTS)}}},"v-icon",a,!1),[e._v(" mdi-attachment ")])],1)]}}])},[t("span",[e._v("附件")])]),t(We["a"],{attrs:{eager:!0}},[t(m["a"],{staticStyle:{positon:"relative"},attrs:{flat:""}},[t($e["b"],{staticClass:"overflow-y-auto",attrs:{id:"thumbnailView"}})],1)],1),t(We["a"],{attrs:{eager:!0}},[t(m["a"],{attrs:{flat:""}},[t($e["b"],{staticClass:"overflow-y-auto",attrs:{id:"outlineView"}})],1)],1),t(We["a"],{attrs:{eager:!0}},[t(m["a"],{attrs:{flat:""}},[t($e["b"],{staticClass:"overflow-y-auto",attrs:{id:"attachmentsView"}})],1)],1)],1)],1)},Qe=[],Je=a["a"].extend({name:"PdfSidebar",props:{},data:function(){return{action:"预览",SIDEBAR_VIEW:te["SidebarView"],active:te["SidebarView"].THUMBS,viewOutline:document.getElementById("viewOutline"),viewThumbnail:document.getElementById("viewThumbnail"),viewAttachments:document.getElementById("viewAttachments")}},methods:{switchView:function(e){this.action=ce[e]},onTreeLoaded:function(e){this.active===e&&this.switchView(te["SidebarView"].THUMBS)},outlineloaded:function(){this.onTreeLoaded(te["SidebarView"].OUTLINE)},attachmentsloaded:function(){this.onTreeLoaded(te["SidebarView"].ATTACHMENTS)},mounted:function(){var e=this.$PDFViewerApplication.eventBus;e.on(C.PDF.OUTLINE_LOADED,this.outlineloaded),e.on(C.PDF.ATTACHMENTS_LOADED,this.attachmentsloaded)},destroyed:function(){var e=this.$PDFViewerApplication.eventBus;e.off(C.PDF.OUTLINE_LOADED,this.outlineloaded),e.off(C.PDF.ATTACHMENTS_LOADED,this.attachmentsloaded)}}}),Ye=Je,et=(i("0c58"),Object(K["a"])(Ye,Xe,Qe,!1,null,"e3b84b30",null)),tt=et.exports;tt.install=function(e){e.component(tt.name,tt)};var it=tt,at=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"d-flex justify-center align-center mr-2"},[t(f["a"],{directives:[{name:"show",rawName:"v-show",value:!e.$vuetify.breakpoint.mobile,expression:"!$vuetify.breakpoint.mobile"}],attrs:{icon:"",disabled:e.pageNumber<=1},on:{click:e.previousPage}},[t(w["a"],[e._v("mdi-chevron-left")])],1),t(S["a"],{staticClass:"pageNumber",attrs:{"hide-details":"",id:"pageNumber"},on:{change:e.pageNumberChanged},model:{value:e.pageNumber,callback:function(t){e.pageNumber=t},expression:"pageNumber"}}),t(w["a"],[e._v("mdi-slash-forward")]),t("span",[e._v(e._s(e.pagesCount))]),t(f["a"],{directives:[{name:"show",rawName:"v-show",value:!e.$vuetify.breakpoint.mobile,expression:"!$vuetify.breakpoint.mobile"}],attrs:{icon:"",disabled:e.pageNumber>=e.pagesCount},on:{click:e.nextPage}},[t(w["a"],[e._v("mdi-chevron-right")])],1)],1)},nt=[],rt=(i("ac1f"),a["a"].extend({name:"PageController",data:function(){return{pageNumber:1,oldPageNumber:1,pagesCount:0}},created:function(){var e=this.$PDFViewerApplication.eventBus;e.on(C.PDF.SET_PAGE_NUMBER,this.setPageNumber),e.on(C.PDF.SET_PAGES_COUNT,this.setPagesCount)},destroyed:function(){var e=this.$PDFViewerApplication.eventBus;e.off(C.PDF.SET_PAGE_NUMBER,this.setPageNumber),e.off(C.PDF.SET_PAGES_COUNT,this.setPagesCount)},methods:{setPagesCount:function(e){this.pagesCount=e.pagesCount},setPageNumber:function(e){e.pageNumber<=this.pagesCount&&(this.pageNumber=e.pageNumber,this.oldPageNumber=e.pageNumber)},pageNumberChanged:function(e){var t=this.$PDFViewerApplication.eventBus;!/^[0-9]{1,20}$/.exec(e+"")||e>this.pagesCount?this.pageNumber=this.oldPageNumber:(this.pageNumber=e,this.oldPageNumber=e,t.dispatch(C.PDF.PAGE_NUMBER_CHANGED,e))},previousPage:function(){var e=this.$PDFViewerApplication.eventBus;e.dispatch(C.PDF.PREVIOUS_PAGE)},nextPage:function(){var e=this.$PDFViewerApplication.eventBus;e.dispatch(C.PDF.NEXT_PAGE)}}})),st=rt,ot=(i("be53"),Object(K["a"])(st,at,nt,!1,null,"1ba87a9b",null)),lt=ot.exports;lt.install=function(e){e.component(lt.name,lt)};var ct=lt,ut=i("8860"),dt=i("da13"),pt=i("5d23"),ht=i("1baa"),ft=i("34c3"),vt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(b["a"],{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(i){var a=i.on,n=i.attrs;return[t(f["a"],e._g(e._b({attrs:{icon:""}},"v-btn",n,!1),a),[t(w["a"],[e._v("mdi-dots-vertical")])],1)]}}])},[t(ut["a"],{staticClass:"pt-1 pb-0"},[t(ht["a"],[t(dt["a"],{attrs:{dense:""},on:{click:e.firstPage}},[t(ft["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-format-vertical-align-top")])],1),t(pt["a"],[t(pt["b"],[e._v("转到第一页")])],1)],1),t(dt["a"],{attrs:{dense:""},on:{click:e.lastPage}},[t(ft["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-format-vertical-align-bottom")])],1),t(pt["a"],[t(pt["b"],[e._v("转到最后一页")])],1)],1)],1),t(o["a"]),t("RotateController",{attrs:{placement:"secondaryToolbar"}}),t(o["a"]),t("PdfCursorTools"),t(o["a"]),t("PdfScrollMode"),t(o["a"]),t("PdfSpreadMode"),t(o["a"]),t(ht["a"],[t(dt["a"],{attrs:{dense:""}},[t(ft["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-information-outline")])],1),t(pt["a"],[t(pt["b"],[e._v("文档属性")])],1)],1)],1)],1)],1)},mt=[],gt=function(){var e=this,t=e._self._c;e._self._setupProxy;return"toolbar"===e.placement?t("div",[t(Ze["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(i){var a=i.on,n=i.attrs;return[t(f["a"],e._g(e._b({attrs:{icon:"",id:"pageRotateCw"},on:{click:e.handleRotateCw}},"v-btn",n,!1),a),[t(w["a"],[e._v("mdi-file-rotate-right-outline")])],1)]}}],null,!1,3735609104)},[t("span",[e._v("顺时针旋转")])]),t(Ze["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(i){var a=i.on,n=i.attrs;return[t(f["a"],e._g(e._b({attrs:{icon:"",id:"pageRotateCcw"},on:{click:e.handleRotateCcw}},"v-btn",n,!1),a),[t(w["a"],[e._v("mdi-file-rotate-left-outline")])],1)]}}],null,!1,4147743627)},[t("span",[e._v("逆时针旋转")])])],1):t(ht["a"],[t(dt["a"],{attrs:{dense:""}},[t(ft["a"],{staticClass:"mr-1"},[t(w["a"],[e._v("mdi-file-rotate-right-outline")])],1),t(pt["a"],{on:{click:e.handleRotateCw}},[t(pt["b"],[e._v("顺时针旋转")])],1)],1),t(dt["a"],{attrs:{dense:""}},[t(ft["a"],{staticClass:"mr-1"},[t(w["a"],[e._v("mdi-file-rotate-left-outline")])],1),t(pt["a"],{on:{click:e.handleRotateCcw}},[t(pt["b"],[e._v("逆时针旋转")])],1)],1)],1)},wt=[],bt=a["a"].extend({name:"RotateController",props:{placement:{type:String,default:"toolbar"}},methods:{handleRotateCcw:function(){var e=this.$PDFViewerApplication.eventBus;e.dispatch(C.PDF.ROTATE_CHANGING,-90)},handleRotateCw:function(){var e=this.$PDFViewerApplication.eventBus;e.dispatch(C.PDF.ROTATE_CHANGING,90)}}}),_t=bt,St=Object(K["a"])(_t,gt,wt,!1,null,null,null),Pt=St.exports;Pt.install=function(e){e.component(Pt.name,Pt)};var yt=Pt,Dt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(ht["a"],[t(dt["a"],{directives:[{name:"show",rawName:"v-show",value:!e.$vuetify.breakpoint.mobile,expression:"!$vuetify.breakpoint.mobile"}],attrs:{dense:"",id:"cursorSelectTool"},on:{click:e.cursorSelectTool}},[t(ft["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-cursor-default-outline")])],1),t(pt["a"],[t(pt["b"],[e._v("文本选择工具")])],1)],1),t(dt["a"],{attrs:{dense:"",id:"cursorHandTool"},on:{click:e.cursorHandTool}},[t(ft["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-hand-back-left-outline")])],1),t(pt["a"],[t(pt["b"],[e._v("手型工具")])],1)],1)],1)},kt=[],Et=a["a"].extend({name:"PdfCursorTools",methods:{cursorSelectTool:function(){var e=this.$PDFViewerApplication.pdfCursorTools;e.switchTool(te["CursorTool"].SELECT)},cursorHandTool:function(){var e=this.$PDFViewerApplication.pdfCursorTools;e.switchTool(te["CursorTool"].HAND)}}}),Ct=Et,Tt=Object(K["a"])(Ct,Dt,kt,!1,null,null,null),Ot=Tt.exports;Ot.install=function(e){e.component(Ot.name,Ot)};var xt=Ot,At=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(ht["a"],[t(dt["a"],{attrs:{dense:""}},[t(ft["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-cursor-default-outline")])],1),t(pt["a"],{on:{click:function(t){return e.switchScrollMode(e.SCROLL_MODE.PAGE)}}},[t(pt["b"],[e._v("页面滚动")])],1)],1),t(dt["a"],{attrs:{dense:""}},[t(ft["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-arrow-vertical-lock")])],1),t(pt["a"],{on:{click:function(t){return e.switchScrollMode(e.SCROLL_MODE.VERTICAL)}}},[t(pt["b"],[e._v("垂直滚动")])],1)],1),t(dt["a"],{attrs:{dense:""}},[t(ft["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-arrow-horizontal-lock")])],1),t(pt["a"],{on:{click:function(t){return e.switchScrollMode(e.SCROLL_MODE.HORIZONTAL)}}},[t(pt["b"],[e._v("水平滚动")])],1)],1),t(dt["a"],{attrs:{dense:""}},[t(ft["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-hand-back-left-outline")])],1),t(pt["a"],{on:{click:function(t){return e.switchScrollMode(e.SCROLL_MODE.WRAPPED)}}},[t(pt["b"],[e._v("平铺滚动")])],1)],1)],1)},It=[],Nt=a["a"].extend({name:"PdfScrollMode",data:function(){return{SCROLL_MODE:te["ScrollMode"]}},methods:{switchScrollMode:function(e){var t=this.$PDFViewerApplication.eventBus;t.dispatch(C.PDF.SWITCH_SCROLL_MODE,e)}}}),Vt=Nt,Bt=Object(K["a"])(Vt,At,It,!1,null,null,null),Lt=Bt.exports;Lt.install=function(e){e.component(Lt.name,Lt)};var Mt=Lt,Rt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(ht["a"],[t(dt["a"],{attrs:{dense:""}},[t(ft["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-hand-back-left-outline")])],1),t(pt["a"],{on:{click:function(t){return e.switchSpreadMode(e.SPREAD_MODE.NONE)}}},[t(pt["b"],[e._v("单页视图")])],1)],1),t(dt["a"],{attrs:{dense:""}},[t(ft["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-cursor-default-outline")])],1),t(pt["a"],{on:{click:function(t){return e.switchSpreadMode(e.SPREAD_MODE.ODD)}}},[t(pt["b"],[e._v("双页视图")])],1)],1),t(dt["a"],{attrs:{dense:""}},[t(ft["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-book-open-page-variant-outline")])],1),t(pt["a"],{on:{click:function(t){return e.switchSpreadMode(e.SPREAD_MODE.EVEN)}}},[t(pt["b"],[e._v("书籍视图")])],1)],1)],1)},Ft=[],Ut=a["a"].extend({name:"PdfScrollMode",data:function(){return{SPREAD_MODE:te["SpreadMode"]}},methods:{switchSpreadMode:function(e){var t=this.$PDFViewerApplication.eventBus;t.dispatch(C.PDF.SWITCH_SPREAD_MODE,e)}}}),Ht=Ut,jt=Object(K["a"])(Ht,Rt,Ft,!1,null,null,null),$t=jt.exports;$t.install=function(e){e.component($t.name,$t)};var Gt=$t,Wt=a["a"].extend({name:"SecondaryToolbar",components:{RotateController:yt,PdfCursorTools:xt,PdfScrollMode:Mt,PdfSpreadMode:Gt},methods:{firstPage:function(){var e=this.$PDFViewerApplication.eventBus;e.dispatch(C.PDF.FIRST_PAGE)},lastPage:function(){var e=this.$PDFViewerApplication.eventBus;e.dispatch(C.PDF.LAST_PAGE)}}}),zt=Wt,qt=Object(K["a"])(zt,vt,mt,!1,null,null,null),Kt=qt.exports;Kt.install=function(e){e.component(Kt.name,Kt)};var Zt=Kt,Xt=i("e0c7"),Qt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"d-flex justify-center align-center"},[t(f["a"],{attrs:{mini:"",id:"zoomOut",icon:"",disabled:e.pageScale<=e.MIN_SCALE},on:{click:e.zoomOut}},[t(w["a"],[e._v("mdi-minus")])],1),t(b["a"],{scopedSlots:e._u([{key:"activator",fn:function(i){var a=i.on,n=i.attrs;return[t(f["a"],e._g(e._b({directives:[{name:"show",rawName:"v-show",value:!e.$vuetify.breakpoint.mobile,expression:"!$vuetify.breakpoint.mobile"}],class:e.$vuetify.breakpoint.mobile?"scaleButton-mobile":"scaleButton-pc",attrs:{text:"",color:"black"}},"v-btn",n,!1),a),[e._v(" "+e._s(e.customScale||e.selectedScale.text)+" ")])]}}])},[t(ut["a"],{staticClass:"scaleList",attrs:{dense:"","max-height":"304"}},[t(Xt["a"],[e._v("选择缩放比例")]),e._l(e.options,(function(i){return t(dt["a"],{key:i.value,staticClass:"scaleListItem",on:{click:function(t){return e.selectScale(i)}}},[t(pt["b"],[e._v(e._s(i.text))])],1)}))],2)],1),t(f["a"],{attrs:{mini:"",id:"zoomIn",icon:"",disabled:e.pageScale>=e.MAX_SCALE},on:{click:e.zoomIn}},[t(w["a"],[e._v("mdi-plus")])],1)],1)},Jt=[],Yt=1,ei=.1,ti=10,ii=[{text:"自动缩放",value:"auto"},{text:"实际大小",value:"page-actual"},{text:"适合页面",value:"page-fit"},{text:"适合页宽",value:"page-width"},{text:"50%",value:.5},{text:"75%",value:.75},{text:"100%",value:1},{text:"125%",value:1.25},{text:"150%",value:1.5},{text:"200%",value:2},{text:"300%",value:3},{text:"400%",value:4}],ai=a["a"].extend({name:"ScaleController",data:function(){return{options:ii,selectedScale:ii[0],customScale:"",pageScale:Yt,pageScaleValue:te["DEFAULT_SCALE_VALUE"],MIN_SCALE:ei,MAX_SCALE:ti}},created:function(){var e=this.$PDFViewerApplication.eventBus;e.on(C.PDF.SET_PAGE_SCALE,this.setPageScale)},methods:{zoomOut:function(){var e=this.$PDFViewerApplication.eventBus;e.dispatch(C.PDF.ZOOM_OUT)},zoomIn:function(){var e=this.$PDFViewerApplication.eventBus;e.dispatch(C.PDF.ZOOM_IN)},selectScale:function(e){var t=this.$PDFViewerApplication.eventBus;this.selectedScale=e,e.value&&t.dispatch(C.PDF.SCALE_CHANGED,e.value)},setPageScale:function(e){var t=e.pageScaleValue,i=e.pageScale;this.pageScale=i,this.pageScaleValue=t||Math.round(1e4*i)/100+"%";for(var a=!1,n=0;n<ii.length;n++){var r=ii[n];if(r.value===this.pageScale||r.value===this.pageScaleValue){a=!0,this.customScale=r.text,this.selectedScale=r;break}}a?this.customScale="":(this.customScale=this.pageScaleValue,this.selectedScale={})}}}),ni=ai,ri=(i("ead8"),Object(K["a"])(ni,Qt,Jt,!1,null,"38b88933",null)),si=ri.exports;si.install=function(e){e.component(si.name,si)};var oi=si,li=i("8e36"),ci=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(li["a"],{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],attrs:{value:e.percent}})},ui=[],di=a["a"].extend({name:"ProgressBar",data:function(){return{percent:0,visible:!1}},created:function(){this.$PDFViewerApplication.eventBus.on("updateloadingbar",this.updateLoadingBar),this.$PDFViewerApplication.eventBus.on("showloadingbar",this.showLoadingBar),this.$PDFViewerApplication.eventBus.on("hideloadingbar",this.hideLoadingBar)},methods:{updateLoadingBar:function(e){e<=this.percent||(this.percent=G(e,0,100),isNaN(e)||(this.percent=e))},showLoadingBar:function(){this.visible=!0},hideLoadingBar:function(){this.visible=!1}}}),pi=di,hi=Object(K["a"])(pi,ci,ui,!1,null,null,null),fi=hi.exports;fi.install=function(e){e.component(fi.name,fi)};var vi=fi,mi=i("169a"),gi=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(mi["a"],{attrs:{persistent:"","max-width":"400"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(m["a"],[t($e["c"],{staticClass:"text-h6"},[e._v("文档已加密")]),t($e["b"],[t(S["a"],{attrs:{"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password",label:e.label},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),t($e["a"],[t(u["a"]),t(f["a"],{attrs:{text:""},on:{click:e.cancel}},[e._v("取消")]),t(f["a"],{attrs:{text:""},on:{click:e.submit}},[e._v("确认")])],1)],1)],1)},wi=[],bi=a["a"].extend({name:"PasswordPrompt",data:function(){return{dialog:!1,showPassword:!1,password:"",label:"请输入密码以打开此 PDF 文档"}},methods:{submit:function(){var e=this.$PDFViewerApplication.eventBus,t=this.password;e.dispatch(C.COMMON.PASSWORD.VERIFY,{password:t})},cancel:function(){var e=this.$PDFViewerApplication.eventBus;e.dispatch(C.COMMON.PASSWORD.CANCEL),this.passed()},open:function(e){e.label;this.dialog=!0},close:function(){this.dialog=!1},reset:function(){this.showPassword=!1,this.password=""},passed:function(){this.reset(),this.close()}},mounted:function(){var e=this.$PDFViewerApplication.eventBus;e.on(C.COMMON.PASSWORD.OPEN,this.open),e.on(C.COMMON.PASSWORD.PASSED,this.passed)},destroyed:function(){var e=this.$PDFViewerApplication.eventBus;e.off(C.COMMON.PASSWORD.OPEN,this.open),e.off(C.COMMON.PASSWORD.PASSED,this.passed)}}),_i=bi,Si=Object(K["a"])(_i,gi,wi,!1,null,null,null),Pi=Si.exports;Pi.install=function(e){e.component(Pi.name,Pi)};var yi=Pi,Di=i("ac7c"),ki=i("4bd4"),Ei=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(mi["a"],{attrs:{persistent:"","max-width":"383"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t(m["a"],[t($e["c"],[e._v(" 验证用户密码 ")]),t(ki["a"],{ref:"form"},[t(g["a"],{staticStyle:{padding:"24px"},attrs:{fluid:""}},[t(S["a"],{attrs:{dense:"","append-icon":e.show1?"mdi-eye":"mdi-eye-off",type:e.show1?"text":"password",rules:e.rules},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.passwordDialog.pwd,callback:function(t){e.$set(e.passwordDialog,"pwd",t)},expression:"passwordDialog.pwd"}}),t(Di["a"],{attrs:{"hide-details":"false",label:"记住密码, 7天内不再显示"},model:{value:e.passwordDialog.remember,callback:function(t){e.$set(e.passwordDialog,"remember",t)},expression:"passwordDialog.remember"}})],1)],1),t($e["a"],[t(u["a"]),t(f["a"],{attrs:{color:"error"},on:{click:e.cancel}},[e._v("取消")]),t(f["a"],{attrs:{color:"primary",dark:"",loading:e.loading},on:{click:e.submit}},[e._v("确认")])],1)],1)],1)},Ci=[],Ti=a["a"].extend({name:"password-verify",props:{visible:{type:Boolean,default:!1}},data:function(){return{show1:!1,loading:!1,passwordDialog:{pwd:"",remember:!1},rules:[function(e){return!!e||"密码不能为空"}],type:null}},watch:{visible:function(e){e||(this.loading=!1)}},methods:{setType:function(e){this.type=e},cancel:function(){this.$emit("hideSignPwd"),this.reset()},submit:function(){this.$refs.form.validate()&&(this.loading=!0,this.$emit("handleSubmit",{type:this.type,password:this.passwordDialog.pwd,isRemember:this.passwordDialog.remember}),this.reset())},reset:function(){this.passwordDialog.pwd="",this.passwordDialog.remember=!1}},mounted:function(){}}),Oi=Ti,xi=Object(K["a"])(Oi,Ei,Ci,!1,null,null,null),Ai=xi.exports;Ai.install=function(e){e.component(Ai.name,Ai)};var Ii=Ai,Ni=i("62ad"),Vi=i("03a4"),Bi=i("2b5d"),Li=i("23a7"),Mi=i("b974"),Ri=function(){var e,t,i,a=this,n=this,r=n._self._c;n._self._setupProxy;return r(mi["a"],{attrs:{persistent:"","max-width":"990"},scopedSlots:n._u([{key:"activator",fn:function(e){var t=e.attrs;return[r(f["a"],n._b({directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{icon:""},on:{click:n.open}},"v-btn",t,!1),[r(w["a"],[n._v(" mdi-watermark ")])],1)]}}]),model:{value:n.dialog,callback:function(e){n.dialog=e},expression:"dialog"}},[r(m["a"],[r($e["c"],{staticClass:"text-h5"},[n._v(" 添加水印 ")]),r($e["b"],[r(ki["a"],{ref:"form"},[r(g["a"],[r(_["a"],{attrs:{justify:"space-between",align:"start"}},[r(Ni["a"],{attrs:{cols:"3"}},[r(_["a"],[r(Li["a"],{attrs:{accept:"image/*","prepend-inner-icon":"mdi-image","prepend-icon":"","truncate-length":"15",label:"上传图片作为水印"},model:{value:n.file,callback:function(e){n.file=e},expression:"file"}})],1),r(_["a"],[r(S["a"],{attrs:{disabled:!n.isText,clearable:"",label:"文本水印",rules:n.textMode},model:{value:n.watermark.text,callback:function(e){n.$set(n.watermark,"text",e)},expression:"watermark.text"}})],1),r(_["a"],[r(Mi["a"],{attrs:{disabled:!n.isText,items:n.fontNames,label:"文本字体",required:""},model:{value:n.watermark.font,callback:function(e){n.$set(n.watermark,"font",e)},expression:"watermark.font"}})],1),r(_["a"],[r(S["a"],{attrs:{disabled:!n.isText,rules:n.isNumber,label:"文本字号",type:"number",required:""},model:{value:n.watermark.size,callback:function(e){n.$set(n.watermark,"size",e)},expression:"watermark.size"}})],1),r(_["a"],[r(Vi["a"],{ref:"colorPicker",staticStyle:{width:"100%"},attrs:{disabled:!n.isText,"hide-mode-switch":"","hide-inputs":"","mode:sync":"rgba","canvas-height":"100"},model:{value:n.watermark.color,callback:function(e){n.$set(n.watermark,"color",e)},expression:"watermark.color"}})],1)],1),r(Ni["a"],{attrs:{cols:"3"}},[r(_["a"],[r(Bi["a"],{attrs:{label:"旋转角度",clearable:"",items:n.rotateItems,suffix:null!==(e=n.watermark.rotate)&&void 0!==e&&e.text?"":"°","item-text":"text","item-value":"value",rules:n.notNULL},on:{change:function(e){return a.watermark.rotate=e}},model:{value:n.watermark.rotate,callback:function(e){n.$set(n.watermark,"rotate",e)},expression:"watermark.rotate"}})],1),r(_["a"],[r(S["a"],{attrs:{label:"不透明度",suffix:"%",rules:n.notNULL},model:{value:n.watermark.opacity,callback:function(e){n.$set(n.watermark,"opacity",e)},expression:"watermark.opacity"}})],1),r(_["a"],[r(Di["a"],{attrs:{label:"是否平铺"},model:{value:n.watermark.isTiled,callback:function(e){n.$set(n.watermark,"isTiled",e)},expression:"watermark.isTiled"}})],1),r(_["a"],[r(S["a"],{attrs:{disabled:!n.watermark.isTiled,label:"水印密度",rules:n.notNULL},model:{value:n.watermark.density,callback:function(e){n.$set(n.watermark,"density",e)},expression:"watermark.density"}})],1),r(_["a"],[r(Bi["a"],{attrs:{disabled:n.watermark.isTiled,label:"垂直位置",clearable:"",items:n.verticalItems,suffix:null!==(t=n.watermark.vertical)&&void 0!==t&&t.text?"":"px","item-text":"text","item-value":"value",rules:n.notNULL},on:{change:function(e){return a.watermark.vertical=e}},model:{value:n.watermark.vertical,callback:function(e){n.$set(n.watermark,"vertical",e)},expression:"watermark.vertical"}})],1),r(_["a"],[r(Bi["a"],{attrs:{disabled:n.watermark.isTiled,label:"水平位置",clearable:"",items:n.horizontalItems,suffix:null!==(i=n.watermark.horizontal)&&void 0!==i&&i.text?"":"px","item-text":"text","item-value":"value",rules:n.notNULL},on:{change:function(e){return a.watermark.horizontal=e}},model:{value:n.watermark.horizontal,callback:function(e){n.$set(n.watermark,"horizontal",e)},expression:"watermark.horizontal"}})],1)],1),r(Ni["a"],{staticStyle:{height:"100%"},attrs:{cols:"5"}},[r(m["a"],{staticStyle:{width:"100%",height:"476px",padding:"0"}},[r(_["a"],{staticStyle:{height:"100%"},attrs:{justify:"center",align:"center"}},[r("canvas",{attrs:{id:"previewCanvas"}})])],1)],1)],1)],1)],1)],1),r($e["a"],[r(u["a"]),r(f["a"],{attrs:{color:" darken-1",text:""},on:{click:n.cancel}},[n._v(" 取消 ")]),r(f["a"],{staticStyle:{"margin-right":"24px"},attrs:{color:"primary"},on:{click:n.submit}},[n._v(" 确认 ")])],1)],1)],1)},Fi=[],Ui=(i("00b4"),i("4de4"),i("1276"),i("5319"),[{text:"宋体",value:"SIMSUN.TTC"},{text:"微软雅黑",value:"msyh.ttc"},{text:"楷体",value:"SIMKAI.TTF"},{text:"黑体",value:"SIMHEI.TTF"}]),Hi=[{text:"旋转45°",value:45},{text:"平行",value:0},{text:"旋转-45°",value:-45}],ji=[{text:"顶部居中",value:"top"},{text:"居中",value:"middle"},{text:"底部居中",value:"bottom"}],$i=[{text:"左对齐",value:"left"},{text:"居中",value:"center"},{text:"右对齐",value:"right"}],Gi=a["a"].extend({name:"WaterMark",data:function(){return{fontNames:Ui,dialog:!1,isText:!0,rotateItems:Hi,verticalItems:ji,horizontalItems:$i,file:null,watermark:{file:null,text:"金格科技",font:Ui[0].value,size:32,color:"rgb(0,255,0)",rotate:Hi[0],opacity:100,isTiled:!0,density:100,vertical:ji[0],horizontal:$i[0]},textMode:[function(e){return!!e||"水印内容不能为空"}],notNULL:[function(e){return!!e||"不能为空"}],isNumber:[function(e){var t=/^\+?[1-9][0-9]*$/;return!!t.test(e)||"not number"}]}},watch:{file:function(e){var t=this;return Object(Y["a"])(Object(J["a"])().mark((function i(){return Object(J["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!e){i.next=7;break}return t.isText=!1,t.watermark.text||(t.watermark.text="   "),i.next=5,t.getImageBase64(e);case 5:i.next=9;break;case 7:t.isText=!0,t.watermark.file=null;case 9:case"end":return i.stop()}}),i)})))()},watermark:{handler:function(e){this.dialog&&this.$refs.form&&(this.$refs.form.validate()?(this.renderWaterMark(),this.isSubmit=!0):this.isSubmit=!1)},deep:!0}},methods:{documentRenderWatermark:function(e){for(var t=this.$PDFViewerApplication,i=t.pdfViewer,a=t.pagesCount,n=0;n<a;n++){var r=i.getPageView(n),s=r.viewport.scale,o=r.width/s,l=r.height/s,c=x(e,o,l);r.cloudReader_watermark_add(c)}},addWatermark:function(){var e=this.getOutput();this.documentRenderWatermark(e)},previewWatermark:function(e){e&&this.documentRenderWatermark(e)},renderWaterMark:function(){var e=this;this.$nextTick((function(){var t=e.$PDFViewerApplication,i=t.pdfViewer,a=t.page,n=i.getPageView(a-1),r=n.viewport.scale,s=n.width/r,o=n.height/r,l=.5,c=s*l,u=o*l,d=e.getOutput(),p=x(d,s,o),h=document.querySelector("#previewCanvas");N(p,h,l,c,u,n,!1)}))},getOutput:function(){var e,t,i,a=Object(h["a"])({},this.watermark);if(a.vertical=null!==(e=a.vertical)&&void 0!==e&&e.text?a.vertical.value:a.vertical,a.rotate=null!==(t=a.rotate)&&void 0!==t&&t.text?a.rotate.value:a.rotate,a.horizontal=null!==(i=a.horizontal)&&void 0!==i&&i.text?a.horizontal.value:a.horizontal,a.opacity=a.opacity/100,a.fontName=Ui.filter((function(e){return e.value==a.font}))[0].text,this.$refs.colorPicker){var n=this.$refs.colorPicker.$data.internalValue;a.color="rgb(".concat(n.rgba["r"],",").concat(n.rgba["g"],",").concat(n.rgba["b"],")")}return a},open:function(){if("string"===typeof this.watermark.color){var e=this.watermark.color.replace("rgb(","").replace(")","").split(",");this.watermark.color={b:e[2],g:e[1],r:e[0]}}this.dialog=!0,this.renderWaterMark()},cancel:function(){this.dialog=!1},submit:function(){this.$refs.form.validate()&&(console.log(this.getOutput()),this.renderWaterMark())},getImageBase64:function(e){var t=this;return Object(Y["a"])(Object(J["a"])().mark((function i(){var a;return Object(J["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:a=new FileReader,a.onload=function(e){var i=e.target.result;t.watermark.file=i},a.readAsDataURL(e);case 3:case"end":return i.stop()}}),i)})))()}},mounted:function(){var e=this,t=this.$PDFViewerApplication.eventBus,i=this.$appConfig.previewWatermark;t.on(C.PDF.DOCUMENT_LOADED,(function(){return e.previewWatermark(i)}))},destroyed:function(){var e=this.$PDFViewerApplication.eventBus;e.off(C.PDF.DOCUMENT_LOADED,this.addWatermark)}}),Wi=Gi,zi=Object(K["a"])(Wi,Ri,Fi,!1,null,"a305b4d0",null),qi=zi.exports;qi.install=function(e){e.component(qi.name,qi)};var Ki=qi,Zi=(i("f284"),i("841c"),i("4328")),Xi=i.n(Zi),Qi=i("bc3a"),Ji={text:"金格科技",font:"黑体",size:32,color:"rgb(22,22,22)",rotate:45,opacity:80,isTiled:!1,density:100,vertical:"middle",horizontal:"center"},Yi=function(e){if(e){var t=e.font||Ji.font;return Object.assign({},Ji,e,{file:null,fontName:t,font:Ui.filter((function(e){return e.text==t}))[0].text,opacity:e.opacity/100})}return null},ea=function(){function e(t){Object(ae["a"])(this,e);var i=t.url,a=void 0===i?"":i,n=t.documentId,r=void 0===n?"":n,s=t.previewWatermark,o=void 0===s?null:s;this._url=a,this._documentId=r,this._previewWatermark=null,o&&(this._previewWatermark=Yi(o))}return Object(ne["a"])(e,[{key:"previewWatermark",get:function(){return this._previewWatermark}},{key:"url",get:function(){return this._url},set:function(e){this._url=e}},{key:"documentId",get:function(){return this._documentId},set:function(e){this._documentId=e}}]),e}(),ta=window.setAppConfig(),ia=new ea(ta);window.KGPdfViewerWebApp=window.appConfig=ia;var aa=ia,na=Qi["a"].create({baseURL:aa.url,method:"POST",params:{docType:0},paramsSerializer:function(e){return Xi.a.stringify(e,{arrayFormat:"brackets"})},headers:{"Content-Type":"application/json;charset=UTF-8","X-Requested-With":"XMLHttpRequest"}});na.interceptors.request.use((function(e){return"post"===e.method&&(e.data={isEncrypt:!1,data:e.data}),e}),(function(e){return e})),na.interceptors.response.use((function(e){switch(e.status){case 200:var t=e.data;return t?"arraybuffer"===e.config.responseType&&t.byteLength>0||t.status||t.companyName?t:t.message?(alert(t.message),Promise.reject()):t.status:("请求失败：".concat(t.status,"，请联系管理员"),alert(t.message),Promise.reject());default:return"请求失败：".concat(t.status,"，请联系管理员"),alert(t.message),Promise.reject()}}));var ra,sa=na,oa="GM",la=0,ca=0;if(window.appConfig.documentId)ra=window.appConfig.documentId;else{var ua=location.search?location.search.split("?")[1]:void 0;ua&&(ra=(void 0)(ua).get("documentid"))}var da=function(){if(ra)return sa({method:"GET",params:{action:"downloadnew",documentId:ra},responseType:"arraybuffer"});throw new Error("未指定要加载的文档")},pa=function(e){var t=window.appConfig,i=t.userId,a=t.filterSealNames,n=t.password;return sa({data:{action:"getSeals",sealType:oa,keySN:i,filterSealNames:a,sealOrigin:la,certOrigin:ca,password:n||e}})},ha=function(e,t){var i=window.appConfig,a=i.stampType,n=i.userId,r=i.documentId,s=e.map((function(e){return{keySN:n,extraPosition:{},lastSelected:{},currentPage:e.page.toString(),esid:e.esid,width:e.width,height:e.height,imgExt:e.imgExt,imgdata:e.imgdata,left:e.left,top:e.top,page:e.page.toString(),sealData:e.sealData,sealtag:e.sealtag,signName:e.signName,signSN:V["enc"].Base64.stringify(V["enc"].Utf8.parse(e.signSN)),unitName:e.unitName,userCode:e.userCode,userName:e.userName,version:e.version}}));return s=0!=a?[s]:s,sa({data:{action:"stampSeal",certOrigin:ca,documentId:r,stampType:a,cert:t,algorithmType:"RSA",sealType:oa,appcode:"",clientCode:"",isUkey:!1,isWebAuth:!1,pdfPwd:"",seals:s}})},fa=function(e){var t=e.pageNo,i=e.x,a=e.y,n=window.appConfig.documentId;return sa({data:{action:"verifySeal",documentId:n,certOrigin:ca,page:t,x:i,y:a,isSM:!1}})},va=function(e){var t=e.pageNo,i=e.x,a=e.y,n=e._password,r=window.appConfig,s=r.password,o=r.documentId,l=r.userId;return sa({data:{action:"deleteSeal",documentId:o,keySN:l,certOrigin:0,page:t,x:i,y:a,password:s||n,isSM:!1}})},ma=function(e){var t=e.pageNo,i=e.x,a=e.y,n=window.appConfig.documentId;return sa({data:{action:"checkLastone",documentId:n,page:t,x:i,y:a}})},ga=function(e){var t=e.color,i=e.fontName,a=e.fontSize,n=e.fullscreen,r=e.leftBottomPosition,s=e.opacity,o=e.rotate,l=e.source,c=e.text,u=e.density,d=e.file;return sa({data:{action:"addWatermark",documentId:window.appConfig.documentId,color:t,fontName:i,file:d,fontSize:a,fullscreen:n,leftBottomPosition:r,opacity:s,density:u,rotate:o,source:l,text:c}})},wa={download:da,getSeals:pa,stampSeal:ha,deleteSeal:va,checkLastone:ma,verifySeal:fa,addWatermark:ga},ba=i("2f62"),_a=Object(ba["a"])("page").mapActions,Sa=Object(ba["a"])("seal").mapActions,Pa=Object(ba["a"])("dialog").mapActions,ya=Object(ba["a"])("permission").mapActions,Da=a["a"].extend({name:"App",components:{PdfFindBar:je,PdfSidebar:it,SecondaryToolbar:Zt,PageController:ct,ScaleController:oi,ProgressBar:vi,PasswordPrompt:yi,WaterMark:Ki,PasswordVerify:Ii},data:function(){return{password:"123456",sideBar:{visible:!1}}},computed:Object(h["a"])(Object(h["a"])({},Object(ba["c"])({isPwdDialogVisible:function(e){var t=e.dialog;return t.isPwdDialogVisible},isSealSelectorVisible:function(e){var t=e.seal;return t.isSealSelectorVisible},operatorPermission:function(e){var t=e.permission;return t.operatorPermission},sealList:function(e){var t=e.seal;return t.sealList},currentScale:function(e){var t=e.page;return t.currentScale}})),{},{textLayerMode:function(){return this.$vuetify.breakpoint.mobile?te["TextLayerMode"].DISABLE:te["TextLayerMode"].ENABLE},fileUrl:function(){var e=this.$appConfig,t=e.url,i=e.documentId;return"".concat(t,"?docType=0&action=download&documentId=").concat(i,"&t=").concat((new Date).getTime())}}),methods:Object(h["a"])(Object(h["a"])(Object(h["a"])(Object(h["a"])(Object(h["a"])({},Sa(["getSealList","setIsSealSelectorVisible","setSealDisabled"])),Pa(["setIsPwdDialogVisible"])),ya(["setPermission"])),_a(["currentScaleChange","currentPageNumberChange"])),{},{sidebarToggle:function(){var e=this.$PDFViewerApplication.eventBus;this.sideBar.visible=!this.sideBar.visible,e.dispatch(C.PDF.SIDEBAR.TOGGLE),e.dispatch(C.PDF.SIDEBAR.UPDATE_THUMBNAIL_VIEWER)},onSealSelctorBtnClick:function(e){this.setIsPwdDialogVisible(!0),this.$refs.signPwd.setType(e)},onSignPwdSubmit:function(e){switch(e.type){case 0:this.getSealList({password:e.password,pwdInfo:e});break;default:break}},onSealSelectorClose:function(){this.setIsSealSelectorVisible(!1)},onSealSelectorCancel:function(){this.setIsSealSelectorVisible(!1)},onSealSelectorConfirm:function(e){this.setIsSealSelectorVisible(!1);var t=document.createElement("img");t.width=e.width,t.height=e.height,t.src=e.imgdata,t.onload=function(){}}})}),ka=Da,Ea=Object(K["a"])(ka,d,p,!1,null,null,null),Ca=Ea.exports,Ta=function(){return{sealList:[],isStampSeal:!1,isSealSelectorVisible:!1,sealDisabled:!1}},Oa={},xa={handleStampSeal:function(e){e.state;var t=e.dispatch;e.commit;if(window.appConfig.password)t("getSealList",{password:window.appConfig.password});else{var i=j(),a=i.password;a?t("getSealList",{password:a}):t("dialog/setIsPwdDialogVisible",!0,{root:!0})}},setIsStampSeal:function(e,t){e.state;var i=e.commit;i("setIsStampSeal",t)},setIsSealSelectorVisible:function(e,t){e.state;var i=e.commit;i("setIsSealSelectorVisible",t)},getSealList:function(e,t){e.state;var i=e.dispatch,a=e.commit,n=t.password,r=t.pwdInfo;i("dialog/setIsPwdDialogVisible",!1,{root:!0}),pa(n).then((function(e){var t={password:"",isRemember:!1};null!==r&&void 0!==r&&r.password&&(t.password=r.password,t.isRemember=r.isRemember),$(t),a("setIsSealSelectorVisible",!0),a("setSealList",e.seals)})).catch((function(e){a("setIsSealSelectorVisible",!1)}))},setSealDisabled:function(e,t){e.state;var i=e.commit;i("setSealDisabled",t)}},Aa={setSealList:function(e,t){e.sealList=t},setIsStampSeal:function(e,t){e.isStampSeal=t},setSealDisabled:function(e,t){e.sealDisabled=t},setIsPwdDialogVisible:function(e,t){e.isPwdDialogVisible=t},setIsSealSelectorVisible:function(e,t){e.isSealSelectorVisible=t}},Ia={namespaced:!0,state:Ta,getters:Oa,actions:xa,mutations:Aa},Na=function(){return{appConfig:{url:"",documentId:"",readOnly:!1}}},Va={},Ba={},La={setDocumentId:function(e,t){e.appConfig.documentId=t},setUrl:function(e,t){e.appConfig.url=t},setReadOnly:function(e,t){e.appConfig.readOnly=t}},Ma={namespaced:!0,state:Na,getters:Va,actions:Ba,mutations:La},Ra=function(){return{isPwdDialogVisible:!1,isSignaturePadVisible:!1}},Fa={},Ua={setIsPwdDialogVisible:function(e,t){e.state;var i=e.commit;window.appConfig.password||i("setIsPwdDialogVisible",t)},setIsSignaturePadVisible:function(e,t){e.state;var i=e.commit;i("setIsSignaturePadVisible",t)}},Ha={setIsPwdDialogVisible:function(e,t){e.isPwdDialogVisible=t},setIsSignaturePadVisible:function(e,t){e.isSignaturePadVisible=t}},ja={namespaced:!0,state:Ra,getters:Fa,actions:Ua,mutations:Ha};a["a"].use(ba["b"]);var $a=new ba["b"].Store({modules:{seal:Ia,config:Ma,dialog:ja}}),Ga=(i("fe2e"),i("5363"),i("f309"));a["a"].use(Ga["a"]);var Wa=new Ga["a"]({breakpoint:{mobileBreakpoint:"xs"}});a["a"].config.productionTip=!1,a["a"].prototype.$appConfig=aa,a["a"].prototype.$http=sa,a["a"].prototype.$service=wa,a["a"].use(Me),new a["a"]({store:$a,vuetify:Wa,render:function(e){return e(Ca)}}).$mount("#app")},ead8:function(e,t,i){"use strict";i("8a94")},ee3f:function(e,t,i){"use strict";i("45a1")},f0b6:function(e,t){function i(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id="f0b6"},f284:function(e,t,i){}});
//# sourceMappingURL=app.bb9bc6c4.js.map