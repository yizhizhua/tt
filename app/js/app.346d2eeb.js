(function(e){function t(t){for(var a,o,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],a=!0,s=1;s<i.length;s++){var l=i[s];0!==n[l]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=i[0]))}return e}var a={},n={app:0},r=[];function o(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=a,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(i,a,function(t){return e[t]}.bind(null,a));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;r.push([1,"chunk-vendors"]),i()})({0:function(e,t){},"0725":function(e,t,i){},1:function(e,t,i){e.exports=i("cd49")},2:function(e,t){},"25b0":function(e,t,i){},"26d8":function(e,t,i){"use strict";i("25b0")},"2f48":function(e,t,i){"use strict";i("0725")},3:function(e,t){},3623:function(e,t,i){"use strict";i("87a8")},"3a06":function(e,t,i){},"3c13":function(e,t,i){},4:function(e,t){},5:function(e,t){},6:function(e,t){},7:function(e,t){},8:function(e,t){},"87a8":function(e,t,i){},be53:function(e,t,i){"use strict";i("3c13")},cd49:function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),n=i("7496"),r=i("40dc"),o=i("5bc1"),s=i("ce7e"),l=i("f6c4"),c=i("f774"),u=i("2fa4"),d=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(n["a"],[t(r["a"],{attrs:{app:"",dense:e.$vuetify.breakpoint.mobile}},[t(o["a"],{on:{click:function(t){return t.stopPropagation(),e.sidebarToggle.apply(null,arguments)}}}),t(u["a"]),t("PageController"),t(s["a"],{class:e.$vuetify.breakpoint.mobile?"mx-1":"mx-4",attrs:{vertical:""}}),t("ScaleController"),t(s["a"],{class:e.$vuetify.breakpoint.mobile?"mx-1":"mx-4",attrs:{vertical:""}}),t(u["a"]),e.$vuetify.breakpoint.mobile?e._e():t("PdfFindBar"),t("WaterMark"),t("SecondaryToolbar")],1),t(c["a"],{attrs:{absolute:"",left:"",temporary:""},model:{value:e.sideBar.visible,callback:function(t){e.$set(e.sideBar,"visible",t)},expression:"sideBar.visible"}},[t("PdfSidebar")],1),t(l["a"],[t("ProgressBar"),t("PdfViewer",{attrs:{url:e.fileUrl,textLayerMode:e.textLayerMode}}),t("PasswordPrompt")],1),t("PasswordVerify",{ref:"signPwd",attrs:{visible:e.isPwdDialogVisible},on:{handleSubmit:e.onSignPwdSubmit,hideSignPwd:function(t){return e.setIsPwdDialogVisible(!1)}}})],1)},p=[],h=i("5530"),f=(i("99af"),i("b0c0"),i("8336")),m=i("a609"),v=i("b0af"),g=i("a523"),w=i("132d"),b=i("e449"),_=i("0fd9"),S=i("8654"),P=function(){var e=this,t=this,i=t._self._c;t._self._setupProxy;return i(b["a"],{attrs:{"offset-y":"","close-on-click":!1,"close-on-content-click":!1,"allow-overflow":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i(f["a"],t._g(t._b({attrs:{id:"viewFind",icon:""}},"v-btn",n,!1),a),[i(w["a"],[t._v("mdi-magnify")])],1)]}}])},[i(v["a"],[i(g["a"],[i(_["a"],{staticClass:"findbarInputContainer",attrs:{justify:"space-around",align:"center",id:"findbarInputContainer"}},[i(S["a"],{attrs:{id:"findInput",placeholder:"在文档中查找...",counter:t.counter,"counter-value":function(t){return e.current}},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}}),i(f["a"],{attrs:{icon:""},on:{click:function(e){return t.dispatch("again",!0)}}},[i(w["a"],[t._v("mdi-arrow-up")])],1),i(f["a"],{attrs:{icon:""},on:{click:function(e){return t.dispatch("again")}}},[i(w["a"],[t._v("mdi-arrow-down")])],1)],1),i(_["a"],{attrs:{justify:"space-around",align:"center"}},[i(m["a"],{attrs:{tile:"",group:"",multiple:""},model:{value:t.toggle_multiple,callback:function(e){t.toggle_multiple=e},expression:"toggle_multiple"}},[i(f["a"],{attrs:{text:"",small:""},on:{click:function(e){return t.updateType("highlightallchange")}}},[t._v(" 全部高亮 ")]),i(f["a"],{attrs:{text:"",small:""},on:{click:function(e){return t.updateType("casesensitivitychange")}}},[t._v(" 区分大小写 ")]),i(f["a"],{attrs:{text:"",small:""},on:{click:function(e){return t.updateType("diacriticmatchingchange")}}},[t._v(" 匹配变音符号 ")]),i(f["a"],{attrs:{text:"",small:""},on:{click:function(e){return t.updateType("entirewordchange")}}},[t._v(" 字词匹配 ")])],1)],1)],1)],1)],1)},y=[],k=(i("d81d"),i("b64b"),i("a9e3"),i("caad"),i("2532"),i("d3b7"),i("159b"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"appContainer",attrs:{id:"appContainer"},on:{dragover:e.onDragover,drop:e.onDrop}},[e._m(0),t("input",{staticClass:"fileInput",attrs:{type:"file",id:"fileInput"}})])}),D=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"viewerContainer",attrs:{id:"viewerContainer"}},[t("div",{staticClass:"pdfViewer",attrs:{id:"viewer"}})])}],E={PDF:{ZOOM_IN:"zoomin",ZOOM_OUT:"zoomout",FIRST_PAGE:"firstpage",LAST_PAGE:"lastpage",PREVIOUS_PAGE:"previouspage",NEXT_PAGE:"nextpage",FIND_MATCHES_COUNT:"findmatchescount",PAGE_NUMBER_CHANGED:"pagenumberchanged",PAGE_CHANGING:"pagechanging",FIND:"find",UPDATE_FIND_MATCHES_COUNT:"updatefindmatchescount",UPDATE_FIND_CONTROL_STATE:"updatefindcontrolstate",ROTATE_CHANGING:"rotateChanging",SCALE_CHANGING:"scalechanging",SCALE_CHANGED:"scalechanged",FILE_INPUT_CHANGE:"fileinputchange",DOCUMENT_ERROR:"documenterror",PRESENTATION_MODE_CHANGED:"presentationmodechanged",OUTLINE_LOADED:"outlineloaded",ATTACHMENTS_LOADED:"attachmentsloaded",LAYERS_LOADED:"layersloaded",SIDEBAR_VIEW_CHANGED:"sidebarviewchanged",PAGE_RENDERED:"pagerendered",SWITCH_SCROLL_MODE:"switchScrollMode",SWITCH_SPREAD_MODE:"switchSpreadMode",UPDATE_LOADING_BAR:"updateloadingbar",SHOW_LOADING_BAR:"showloadingbar",HIDE_LOADING_BAR:"hideloadingbar",SET_PAGES_COUNT:"setpagescount",SET_PAGE_NUMBER:"setpagenumber",SET_PAGE_SCALE:"setpagescale",DOCUMENT_LOADED:"documentLoaded",SUBSCRIBE_OUTLINE:"subscribeOutline",SUBSCRIBE_ATTACHMENT:"subscribeAttachment",SUBSCRIBE_THUMBNAIL_VIEW:"subscribeThumbnailView",UPDATE_THUMBNAIL_VIEW:"updateThumbnailView",OUTLINE_BIND_LINK:"outlineBindLink",ATTACHMENT_BIND_LINK:"attachmentBindLink",THUMBNAIL_VIEW_BIND_LINK:"thumbnailViewBindLink",SIDEBAR:{TOGGLE:"toggle",SWITCH_VIEW:"switchView",UPDATE_THUMBNAIL_VIEWER:"updatethumbnailviewer"}},OFD:{},IMAGE:{},COMMON:{PASSWORD:{VERIFY:"common.password.verify",CANCEL:"common.password.cancel",OPEN:"common.password.open",PASSED:"common.password.passed"}}},C=E,T=(i("498a"),function(e,t){var i={x:e.x,y:t-e.y};return i}),O=function(e,t,i){if(i){var a=document.createElement("canvas"),n=a.getContext("2d");return n?(n.font=t+"px "+i,n.measureText(e).width):t*e.length}return t*e.length},x=function(e,t,i){var a={color:"",font:"",fontName:"",fontSize:0,fullscreen:"",file:"",fileWidth:0,fileHeight:0,leftBottomPosition:{x:0,y:0},opacity:0,position:{x:0,y:0},rotate:0,source:"",text:"",density:0,width:0,height:0};if(e.file&&0!==e.file.length?a.source="file":a.source="text","text"===a.source&&(a.text=e.text.trim(),a.font=e.fontName,a.fontName=e.font,a.fontSize=e.size,a.color=e.color),"file"===a.source&&(a.file=e.file),a.rotate=Number(e.rotate)%360,a.rotate<0&&(a.rotate=360+a.rotate),a.rotate=0!==a.rotate?360-a.rotate:0,a.opacity=e.opacity,e.isTiled)a.fullscreen="tile",a.density=Number(e.density)/100;else{a.fullscreen="no",a.position={x:0,y:0};var n=20;"top"===e.vertical?a.position.y=-i/2+n:"bottom"===e.vertical?a.position.y=i/2-n:"middle"===e.vertical?a.position.y=0:a.position.y=Number(e.vertical),"left"===e.horizontal?a.position.x=-t/2+n:"right"===e.horizontal?a.position.x=t/2-n:"center"===e.horizontal?a.position.x=0:a.position.x=Number(e.horizontal),a.leftBottomPosition=T({x:t/2+a.position.x,y:i/2+a.position.y},i)}return a},A=function(e){var t={x:0,y:0},i=e.rotate,a=i*Math.PI/180,n=0,r=0;if("text"===e.source){var o=O(e.text,e.fontSize);n=o/e.density,r=e.fontSize/e.density}"file"===e.source&&(n=e.fileWidth/e.density,r=e.fileHeight/e.density);var s=Math.sqrt(Math.pow(n,2)+Math.pow(r,2)),l=Math.atan(r/n),c=0,u=0;return 0===i||180===i?(u=r,c=n):90===i||270===i?(u=n,c=r):0<i&&i<90?(u=s*Math.abs(Math.sin(a+l)),c=s*Math.abs(Math.cos(a+l))):90<i&&i<180?(u=s*Math.abs(Math.sin(Math.PI-a+l)),c=s*Math.abs(Math.cos(Math.PI-a+l))):180<i&&i<270?(u=s*Math.abs(Math.sin(a-Math.PI+l)),c=s*Math.abs(Math.cos(a-Math.PI+l))):270<i&&i<360&&(u=s*Math.abs(Math.sin(2*Math.PI-a+l)),c=s*Math.abs(Math.cos(2*Math.PI-a+l))),t.x=c,t.y=u,t},I=function(e,t,i,a,n,r){var o={x:[],y:[]},s=e,l=e,c=!0;while(c){if(s-=i,s<0)break;o.x.push(s)}o.x.push(e);while(c){if(l+=i,l>n)break;o.x.push(l)}var u=t,d=t;while(c){if(u+=a,u>r)break;o.y.push(u)}o.y.push(t);while(c){if(d-=a,d<0)break;o.y.push(d)}return o},N=function(e,t,i,a,n,r){var o=document.createElement("canvas");o.width=a,o.height=n;var s=o.getContext("2d"),l=o.width/2,c=o.height/2;s&&(s.translate(o.width/2,o.height/2),s.rotate(e.rotate*Math.PI/180),s.translate(-o.width/2,-o.height/2),s.globalAlpha=e.opacity,new Promise((function(o){if("text"===e.source&&e.text)s.textAlign="center",s.fillStyle=e.color,s.font=e.fontSize*i+"px "+e.font,s.fillText(e.text,l,c),o();else if("file"===e.source&&e.file){var u=new Image;u.onload=function(){var t=u.width*i,a=u.height*i;e.fileWidth=u.width,e.fileHeight=u.height,s.drawImage(u,0,0,u.width,u.height,l-t/2,c-a/2,t,a),o()},u.src=e.file}else if(r){t.width=a,t.height=n;var d=t.getContext("2d");d&&d.drawImage(r.canvas,0,0,r.canvas.width,r.canvas.height,0,0,a,n)}})).then((function(){var s=o.toDataURL("png",1);return new Promise((function(o){var l=new Image;l.onload=function(){var s=t.getContext("2d");r&&s&&(t.width=a,t.height=n,s.drawImage(r.canvas,0,0,r.canvas.width,r.canvas.height,0,0,a,n));var c=a/2,u=n/2;if("tile"===e.fullscreen)for(var d,p=A(e),h=p.x,f=p.y,m=d=h>f?h:f,v=I(a/2,n/2,m*i,d*i,a,n),g=0;g<v.x.length;g++)for(var w=0;w<v.y.length;w++)s&&s.drawImage(l,0,0,l.width,l.height,v.x[g]-l.width/2,v.y[w]-l.height/2,l.width,l.height);else{var b=e.position.x*i,_=e.position.y*i;s&&s.drawImage(l,0,0,l.width,l.height,c-l.width/2+b,u-l.height/2+_,l.width,l.height)}o()},l.src=s}))})))},V=(i("25f0"),i("e9c4"),i("3452")),B="PDF_PWD",L=6048e5,M="+96]4Up@<ZS3(#V0y55-Z-e0",R=V["enc"].Utf8,F=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i?localStorage.setItem(e,V["AES"].encrypt(t,M).toString()):localStorage.setItem(e,t)},U=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=localStorage.getItem(e);return i?t?V["AES"].decrypt(i,M).toString(R):i:null},H=function(e){localStorage.removeItem(e)},j=function(){var e=U(B,!0);if(e){var t={hasTimeOut:!1,password:"",overTime:""},i=JSON.parse(e),a=i.password,n=i.overTime,r=Math.abs(n-(new Date).getTime()),o=r>L;return o&&H(B),t.overTime=n,t.password=a,t.hasTimeOut=o,t}return{hasTimeOut:!0}},$=function(e){var t=e.password,i=e.isRemember;if(t.length)if(i){var a=(new Date).getTime()+L;F(B,JSON.stringify({password:t,overTime:a}),!0)}else i&&H(B)};function W(){var e=window.innerWidth,t=window.innerHeight;return"number"!=typeof e&&("CSS1Compat"==document.compatMode?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):(e=document.body.clientWidth,t=window.body.clientHeight)),{pageWidth:e,pageHeight:t}}function G(e,t,i){return Math.min(Math.max(e,t),i)}function z(e){var t=e.getViewport({scale:1}),i=document.createElement("canvas"),a=1;i.width=t.width*a,i.height=t.height*a;var n=Math.min(i.width/t.width,i.height/t.height);return e.render({canvasContext:i.getContext("2d"),viewport:e.getViewport({scale:n})}).promise.then((function(){return i}))}var q={props:{url:{type:String},textLayerMode:{type:Number},password:{type:String}},methods:{onDragover:function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"===e.dataTransfer.effectAllowed?"copy":"move"},onDrop:function(e){e.preventDefault();var t=this.$PDFViewerApplication.eventBus,i=e.dataTransfer.files;i&&0!==i.length&&t.dispatch(C.PDF.FILE_INPUT_CHANGE,{source:this,fileInput:e.dataTransfer})}},mounted:function(){this.url&&(this.$PDFViewerApplication.defaultUrl=this.url);var e={appContainer:document.getElementById("appContainer"),mainContainer:document.getElementById("viewerContainer"),viewerContainer:document.getElementById("viewer"),textLayerMode:this.textLayerMode,password:this.password,thumbnailView:document.getElementById("thumbnailView"),outlineView:document.getElementById("outlineView"),attachmentsView:document.getElementById("attachmentsView")};this.$PDFViewerApplication.run(e),document.getElementById("viewerContainer").style.height=W().pageHeight-48+"px"}},K=q,Z=(i("3623"),i("2877")),X=Object(Z["a"])(K,k,D,!1,null,"9688d0ae",null),Q=X.exports,J=i("3835"),Y=i("c7eb"),ee=i("1da1"),te=(i("3ca3"),i("ddb0"),i("a15b"),i("4795"),i("e0b1")),ie=i("3c71"),ae=i("9886"),ne=(i("7c05"),i("d4ec")),re=i("bee2"),oe=(i("2b3d"),i("9861"),function(){function e(t){Object(ne["a"])(this,e),this.app=t,this.eventBus=t.eventBus}return Object(re["a"])(e,[{key:"zoomIn",value:function(){this.app.zoomIn()}},{key:"zoomOut",value:function(){this.app.zoomOut()}},{key:"scaleChanged",value:function(e){this.app.pdfViewer.currentScaleValue=e}},{key:"scaleChanging",value:function(e){this.eventBus.dispatch(C.PDF.SET_PAGE_SCALE,{pageScaleValue:e.presetValue,pageScale:e.scale}),this.app.pdfViewer.update()}},{key:"showLoadingBar",value:function(){this.eventBus.dispatch(C.PDF.SHOW_LOADING_BAR)}},{key:"hideLoadingBar",value:function(){this.eventBus.dispatch(C.PDF.HIDE_LOADING_BAR)}},{key:"updateLoadingBar",value:function(e){this.eventBus.dispatch(C.PDF.UPDATE_LOADING_BAR,e)}},{key:"previousPage",value:function(){this.app.pdfViewer.previousPage()}},{key:"nextPage",value:function(){this.app.pdfViewer.nextPage()}},{key:"firstPage",value:function(){this.app.pdfDocument&&(this.app.page=1)}},{key:"lastPage",value:function(){this.app.pdfDocument&&(this.app.page=this.app.pagesCount)}},{key:"pageChanging",value:function(e){var t,i=e.pageNumber;this.eventBus.dispatch(C.PDF.SET_PAGE_NUMBER,{pageNumber:i}),null===(t=this.app.pdfThumbnailViewer)||void 0===t||t.scrollThumbnailIntoView(i)}},{key:"pageNumberChanged",value:function(e){var t=this.app.pdfViewer;""!==e&&this.app.pdfLinkService.goToPage(e),e!==t.currentPageNumber.toString()&&this.pageChanging({pageNumber:t.currentPageNumber})}},{key:"setPagesCount",value:function(e){this.eventBus.dispatch(C.PDF.SET_PAGES_COUNT,{pagesCount:e.pagesCount})}},{key:"fileInputChange",value:function(e){var t=e.fileInput.files[0],i=URL.createObjectURL(t);t.name&&(i={url:i,originalUrl:t.name}),this.app.open(i)}},{key:"initialized",value:function(){var e=this,t=this.app.defaultUrl;if(t)try{this.app.open(t)}catch(i){this.app.l10n.get("loading_error").then((function(t){e.app._documentError(t,i)}))}}},{key:"rotatePage",value:function(e){this.app.pdfDocument&&(this.app.pdfViewer.pagesRotation+=e)}},{key:"switchSpreadMode",value:function(e){this.app.pdfDocument&&(this.app.pdfViewer.spreadMode=e)}},{key:"switchScrollMode",value:function(e){this.app.pdfDocument&&(this.app.pdfViewer.scrollMode=e)}},{key:"updateFindMatchesCount",value:function(e){var t=e.matchesCount;this.eventBus.dispatch(C.PDF.FIND_MATCHES_COUNT,t)}},{key:"documentLoaded",value:function(){this.eventBus.dispatch(C.PDF.DOCUMENT_LOADED),this.subscribeThumbnailView()}},{key:"subscribeThumbnailView",value:function(){for(var e=this,t=this.app,i=t.pagesCount,a=t.pdfDocument,n=[],r=0;r<i;r++)n.push(a.getPage(r+1).then(z));Promise.all(n).then((function(t){console.log("thumbnails",t),e.eventBus.dispatch(C.PDF.SUBSCRIBE_THUMBNAIL_VIEW,t)}))}},{key:"updateThumbnailView",value:function(e){e.pageNumber}},{key:"subscribeOutline",value:function(e){console.log("大纲",e),this.eventBus.dispatch(C.PDF.SUBSCRIBE_OUTLINE,e)}},{key:"subscribeAttachment",value:function(e){console.log("附件",e),this.eventBus.dispatch(C.PDF.SUBSCRIBE_ATTACHMENT,e)}},{key:"thumbnailViewBindLink",value:function(e){this.app.pdfLinkService.goToPage(e)}},{key:"outlineBindLink",value:function(e){e&&this.app.pdfLinkService.goToDestination(e)}},{key:"attachmentBindLink",value:function(e){var t=e.content,i=e.filename,a=document.createElement("a");a.innerHTML=i,this.app.downloadManager.openOrDownloadData(a,t,i)}}]),e}()),se=oe,le=i("ade3"),ce=(i("d9e2"),{0:"highlightAll",1:"caseSensitive",2:"matchDiacritics",3:"entireWord"}),ue=["预览","大纲","附件"],de=C.COMMON.PASSWORD,pe=function(){function e(t){var i=t.eventBus,a=t.l10n;Object(ne["a"])(this,e),Object(le["a"])(this,"updateCallback",null),Object(le["a"])(this,"reason",null),this.l10n=a,this.eventBus=i,this.verify=this.verify.bind(this),this.cancel=this.cancel.bind(this),this.invokeCallback=this.invokeCallback.bind(this),this.eventBus.on(de.VERIFY,this.verify),this.eventBus.on(de.CANCEL,this.cancel)}return Object(re["a"])(e,[{key:"open",value:function(){var e=Object(ee["a"])(Object(Y["a"])().mark((function e(){var t,i;return Object(Y["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.reason===te["PasswordResponses"].INCORRECT_PASSWORD,e.next=3,this.l10n.get("password_".concat(t?"invalid":"label"));case 3:i=e.sent,this.eventBus.dispatch(de.OPEN,{label:i});case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"verify",value:function(e){var t=e.password,i=e.isCancel,a=void 0!==i&&i;t.length&&(this.invokeCallback(t),this.isCancel=a)}},{key:"cancel",value:function(){this.invokeCallback(new Error("PasswordPrompt cancelled."))}},{key:"invokeCallback",value:function(e){this.updateCallback&&(this.updateCallback(e),this.updateCallback=null,this.eventBus.dispatch(de.PASSED))}},{key:"setUpdateCallback",value:function(e,t){this.updateCallback=e,this.reason=t,this.isCancel&&this.cancel()}}]),e}(),he=pe,fe=function(){function e(t){var i=t.pdfViewer,a=t.pdfThumbnailViewer,n=t.eventBus,r=t.l10n;Object(ne["a"])(this,e),this.isOpen=!1,this.active=ie["SidebarView"].THUMBS,this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,this.onToggled=null,this.pdfViewer=i,this.pdfThumbnailViewer=a,this.eventBus=n,this.l10n=r,this.addEventListeners()}return Object(re["a"])(e,[{key:"reset",value:function(){this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,this.switchView(ie["SidebarView"].THUMBS)}},{key:"visibleView",get:function(){return this.isOpen?this.active:ie["SidebarView"].NONE}},{key:"setInitialView",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie["SidebarView"].NONE;this.isInitialViewSet||(this.isInitialViewSet=!0,e!==ie["SidebarView"].NONE&&e!==ie["SidebarView"].UNKNOWN?(this.switchView(e,!0),this.isInitialEventDispatched||this.dispatchEvent()):this.dispatchEvent())}},{key:"switchView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e!==this.active,a=!1;switch(e){case ie["SidebarView"].NONE:return void(this.isOpen&&this.close());case ie["SidebarView"].THUMBS:this.isOpen&&i&&(a=!0);break;case ie["SidebarView"].OUTLINE:if(this.outlineButton.disabled)return;break;case ie["SidebarView"].ATTACHMENTS:if(this.attachmentsButton.disabled)return;break;case ie["SidebarView"].LAYERS:if(this.layersButton.disabled)return;break;default:return void console.error('PDFSidebar.switchView: "'.concat(e,'" is not a valid view.'))}this.active=e,!t||this.isOpen?(a&&(this.updateThumbnailViewer(),this.forceRendering()),i&&this.dispatchEvent()):this.open()}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this.active===ie["SidebarView"].THUMBS&&this.updateThumbnailViewer(),this.forceRendering(),this.dispatchEvent())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.forceRendering(),this.dispatchEvent())}},{key:"toggle",value:function(){this.isOpen?this.close():this.open()}},{key:"dispatchEvent",value:function(){this.isInitialViewSet&&!this.isInitialEventDispatched&&(this.isInitialEventDispatched=!0),this.eventBus.dispatch(C.PDF.SIDEBAR_VIEW_CHANGED,{source:this,view:this.visibleView})}},{key:"forceRendering",value:function(){this.onToggled?this.onToggled():(this.pdfViewer.forceRendering(),this.pdfThumbnailViewer.forceRendering())}},{key:"updateThumbnailViewer",value:function(){for(var e=this.pdfViewer,t=this.pdfThumbnailViewer,i=e.pagesCount,a=0;a<i;a++){var n=e.getPageView(a);if((null===n||void 0===n?void 0:n.renderingState)===ie["RenderingStates"].FINISHED){var r=t.getThumbnail(a);r.setImage(n)}}t.scrollThumbnailIntoView(e.currentPageNumber)}},{key:"addEventListeners",value:function(){var e=this;this.eventBus.on(C.PDF.SIDEBAR.TOGGLE,(function(){e.toggle()})),this.eventBus.on(C.PDF.SIDEBAR.UPDATE_THUMBNAIL_VIEWER,(function(){e.updateThumbnailViewer()}))}}]),e}(),me=fe,ve=5e3,ge={UNKNOWN:-1,PREVIOUS:0,INITIAL:1};"undefined"!==typeof window&&"Worker"in window&&(te["GlobalWorkerOptions"].workerPort=new ae["a"]);var we={_initializedCapability:Object(te["createPromiseCapability"])(),appConfig:null,pdfDocument:null,pdfLoadingTask:null,pdfViewer:null,pdfHistory:null,pdfCursorTools:null,eventBus:new ie["EventBus"],isViewerEmbedded:window.parent!==window,l10n:ie["NullL10n"],downloadComplete:!1,defaultUrl:"",pdfThumbnailViewer:null,pdfSidebar:null,pdfOutlineViewer:null,pdfAttachmentViewer:null,initialize:function(e){var t=this;return Object(ee["a"])(Object(Y["a"])().mark((function i(){return Object(Y["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:t.appConfig=e,t._initializeViewerComponents(),t.bindEvents(),t._initializedCapability.resolve();case 4:case"end":return i.stop()}}),i)})))()},_initializeViewerComponents:function(){var e=this.appConfig,t=new ie["PDFRenderingQueue"];t.onIdle=this._cleanup.bind(this),this.pdfRenderingQueue=t;var i=new ie["PDFLinkService"]({eventBus:this.eventBus});this.pdfLinkService=i;var a=new ie["PDFFindController"]({linkService:i,eventBus:this.eventBus});this.findController=a,this.passwordPrompt=new he({eventBus:this.eventBus,l10n:this.l10n});var n=e.mainContainer,r=e.viewerContainer,o=new ie["PDFViewer"]({container:n,viewer:r,findController:a,eventBus:this.eventBus,linkService:i,l10n:this.l10n,textLayerMode:e.textLayerMode});this.pdfViewer=o,t.setViewer(o),i.setViewer(o);var s=e.thumbnailView,l=e.outlineView,c=e.attachmentsView;s&&(this.pdfThumbnailViewer=new ie["PDFThumbnailViewer"]({container:s,eventBus:this.eventBus,renderingQueue:t,linkService:i,l10n:this.l10n}),t.setThumbnailViewer(this.pdfThumbnailViewer)),this.pdfHistory=new ie["PDFHistory"]({eventBus:this.eventBus,linkService:i}),i.setHistory(this.pdfHistory);var u=s&&l&&c;u&&(this.pdfSidebar=new me({pdfViewer:this.pdfViewer,pdfThumbnailViewer:this.pdfThumbnailViewer,eventBus:this.eventBus,l10n:this.l10n}),this.pdfSidebar.onToggled=this.forceRendering.bind(this)),l&&(this.pdfOutlineViewer=new ie["PDFOutlineViewer"]({container:l,eventBus:this.eventBus,linkService:i})),this.downloadManager=new ie["DownloadManager"],c&&(this.pdfAttachmentViewer=new ie["PDFAttachmentViewer"]({container:c,eventBus:this.eventBus,downloadManager:this.downloadManager})),this.pdfCursorTools=new ie["PDFCursorTools"]({container:n,eventBus:this.eventBus,cursorToolOnLoad:ie["CursorTool"].SELECT})},_cleanup:function(){this.pdfDocument&&(this.pdfViewer.cleanup(),this.pdfThumbnailViewer.cleanup())},run:function(e){this.initialize(e).then((function(){return be.initialized()}))},get initialized(){return this._initializedCapability.settled},get initializedPromise(){return this._initializedCapability.promise},get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0},zoomIn:function(){this.pdfViewer.isInPresentationMode||this.pdfViewer.increaseScale()},zoomOut:function(){this.pdfViewer.isInPresentationMode||this.pdfViewer.decreaseScale()},get page(){return this.pdfViewer.currentPageNumber},set page(e){this.pdfViewer.currentPageNumber=e},close:function(){var e=this;return Object(ee["a"])(Object(Y["a"])().mark((function t(){var i,a,n,r,o,s;return Object(Y["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.pdfLoadingTask){t.next=2;break}return t.abrupt("return");case 2:return o=[],o.push(e.pdfLoadingTask.destroy()),e.pdfLoadingTask=null,e.pdfDocument&&(e.pdfDocument=null,null===(s=e.pdfThumbnailViewer)||void 0===s||s.setDocument(null),e.pdfViewer.setDocument(null),e.pdfLinkService.setDocument(null)),null===(i=e.pdfHistory)||void 0===i||i.reset(),null===(a=e.pdfSidebar)||void 0===a||a.reset(),null===(n=e.pdfOutlineViewer)||void 0===n||n.reset(),null===(r=e.pdfAttachmentViewer)||void 0===r||r.reset(),t.next=12,Promise.all(o);case 12:case"end":return t.stop()}}),t)})))()},open:function(e,t){var i=this;return Object(ee["a"])(Object(Y["a"])().mark((function a(){var n,r,o,s;return Object(Y["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!i.pdfLoadingTask){a.next=3;break}return a.next=3,i.close();case 3:if(n=Object.create(null),"string"===typeof e?n.url=e:e&&"byteLength"in e?n.data=e:e.url&&e.originalUrl&&(n.url=e.url),t)for(r in t)n[r]=t[r];return o=Object(te["getDocument"])(Object(h["a"])(Object(h["a"])({},n),{},{cMapUrl:"./cmaps/",cMapPacked:!0,standardFontDataUrl:"./standard_fonts/"})),i.pdfLoadingTask=o,s=i.appConfig.password,o.onPassword=function(e,t){i.pdfLinkService.externalLinkEnabled=!1,i.passwordPrompt.setUpdateCallback(e,t),s?i.passwordPrompt.verify({password:s,isCancel:!0}):i.passwordPrompt.open()},o.onProgress=function(e){var t=e.loaded,a=e.total;i.progress(t/a)},a.abrupt("return",o.promise.then((function(e){i.load(e)}),(function(e){if(o===i.pdfLoadingTask){var t="loading_error";return e instanceof te["InvalidPDFException"]?t="invalid_file_error":e instanceof te["MissingPDFException"]?t="missing_file_error":e instanceof te["UnexpectedResponseException"]&&(t="unexpected_response_error"),i.l10n.get(t).then((function(t){throw i._documentError(t,{message:null===e||void 0===e?void 0:e.message}),e}))}})));case 12:case"end":return a.stop()}}),a)})))()},_documentError:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._otherError(e,i),this.eventBus.dispatch(C.PDF.DOCUMENT_ERROR,{source:this,message:e,reason:null!==(t=null===i||void 0===i?void 0:i.message)&&void 0!==t?t:null})},_otherError:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[this.l10n.get("error_version_info",{version:te["version"]||"?",build:te["build"]||"?"})];t&&(i.push(this.l10n.get("error_message",{message:t.message})),t.stack?i.push(this.l10n.get("error_stack",{stack:t.stack})):(t.filename&&i.push(this.l10n.get("error_file",{file:t.filename})),t.lineNumber&&i.push(this.l10n.get("error_line",{line:t.lineNumber})))),Promise.all(i).then((function(t){console.error(e+"\n"+t.join("\n"))}))},progress:function(e){var t=this;if(!this.downloadComplete){var i=Math.round(100*e);be.updateLoadingBar(i),this.disableAutoFetchLoadingBarTimeout&&(clearTimeout(this.disableAutoFetchLoadingBarTimeout),this.disableAutoFetchLoadingBarTimeout=null),be.showLoadingBar(),this.disableAutoFetchLoadingBarTimeout=setTimeout((function(){be.hideLoadingBar(),t.disableAutoFetchLoadingBarTimeout=null}),ve)}},load:function(e){var t=this;this.pdfDocument=e,e.getDownloadInfo().then((function(e){var i=e.length;t._contentLength=i,t.downloadComplete=!0,be.hideLoadingBar()}));var i=e.getOpenAction().catch((function(){}));be.setPagesCount({pagesCount:e.numPages}),this.pdfLinkService.setDocument(e);var a=this.pdfViewer;a.setDocument(e);var n=this.pdfThumbnailViewer;null===n||void 0===n||n.setDocument(e);var r=a.firstPagePromise,o=a.onePageRendered,s=a.pagesPromise;r.then((function(){Promise.all([i]).then(function(){var i=Object(ee["a"])(Object(Y["a"])().mark((function i(a){var n,r;return Object(Y["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:n=Object(J["a"])(a,1),r=n[0],t._initializePdfHistory({fingerprint:e.fingerprints[0],viewOnLoad:0,initialDest:null===r||void 0===r?void 0:r.dest}),t.setInitialView();case 3:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()).catch((function(){t.setInitialView()}))})),o.then((function(){e.getOutline().then((function(i){var a;e===t.pdfDocument&&(be.subscribeOutline(i),null===(a=t.pdfOutlineViewer)||void 0===a||a.render({outline:i,pdfDocument:e}))})),e.getAttachments().then((function(i){var a;e===t.pdfDocument&&(be.subscribeAttachment(i),null===(a=t.pdfAttachmentViewer)||void 0===a||a.render({attachments:i}))}))})),s.then((function(){be.documentLoaded()})),this.pdfHistory.initialize({fingerprint:e.fingerprints[0]})},_initializePdfHistory:function(e){var t=e.fingerprint,i=e.viewOnLoad,a=e.initialDest,n=void 0===a?null:a;this.pdfHistory&&(this.pdfHistory.initialize({fingerprint:t,resetHistory:i===ge.INITIAL,updateUrl:!1}),this.pdfHistory.initialBookmark&&(this.initialBookmark=this.pdfHistory.initialBookmark,this.initialRotation=this.pdfHistory.initialRotation),n&&!this.initialBookmark&&i===ge.UNKNOWN&&(this.initialBookmark=JSON.stringify(n),this.pdfHistory.push({explicitDest:n,pageNumber:null})))},setInitialView:function(){this.pdfViewer.currentScaleValue||(this.pdfViewer.currentScaleValue=ie["DEFAULT_SCALE_VALUE"])},forceRendering:function(){this.pdfRenderingQueue.printing=!1,this.pdfRenderingQueue.isThumbnailViewEnabled=this.pdfSidebar.visibleView===ie["SidebarView"].THUMBS,this.pdfRenderingQueue.renderHighestPriority()},bindEvents:function(){var e=this.eventBus,t=C.PDF,i=t.FIRST_PAGE,a=t.LAST_PAGE,n=t.NEXT_PAGE,r=t.ZOOM_IN,o=t.PREVIOUS_PAGE,s=t.ZOOM_OUT,l=t.PAGE_NUMBER_CHANGED,c=t.PAGE_CHANGING,u=t.SCALE_CHANGED,d=t.SCALE_CHANGING,p=t.ROTATE_CHANGING,h=t.SWITCH_SCROLL_MODE,f=t.SWITCH_SPREAD_MODE,m=t.FILE_INPUT_CHANGE,v=t.UPDATE_FIND_MATCHES_COUNT,g=t.OUTLINE_BIND_LINK,w=t.ATTACHMENT_BIND_LINK,b=t.THUMBNAIL_VIEW_BIND_LINK,_=t.PAGE_RENDERED;e._on(i,(function(e){return be.firstPage(e)})),e._on(a,(function(e){return be.lastPage(e)})),e._on(n,(function(e){return be.nextPage(e)})),e._on(o,(function(e){return be.previousPage(e)})),e._on(r,(function(e){return be.zoomIn(e)})),e._on(s,(function(e){return be.zoomOut(e)})),e._on(l,(function(e){return be.pageNumberChanged(e)})),e._on(u,(function(e){return be.scaleChanged(e)})),e._on(c,(function(e){return be.pageChanging(e)})),e._on(d,(function(e){return be.scaleChanging(e)})),e._on(p,(function(e){return be.rotatePage(e)})),e._on(h,(function(e){return be.switchScrollMode(e)})),e._on(f,(function(e){return be.switchSpreadMode(e)})),e._on(m,(function(e){return be.fileInputChange(e)})),e._on(v,(function(e){return be.updateFindMatchesCount(e)})),e._on(g,(function(e){return be.outlineBindLink(e)})),e._on(w,(function(e){return be.attachmentBindLink(e)})),e._on(b,(function(e){return be.thumbnailViewBindLink(e)})),e._on(_,(function(e){return be.updateThumbnailView(e)}))}},be=new se(we);window.PDFViewerApplication=we;var _e=we;Q.install=function(e){e.component("PdfViewer",Q),e.prototype.$PDFViewerApplication=_e};C.PDF;var Se=Q,Pe=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e._v("OFDViewer")])},ye=[],ke=a["a"].extend({}),De=ke,Ee=Object(Z["a"])(De,Pe,ye,!1,null,"486e649e",null),Ce=Ee.exports;Ce.install=function(e){e.component("OfdViewer",Ce)};var Te=Ce,Oe=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e._v("ImageViewer")])},xe=[],Ae=a["a"].extend({}),Ie=Ae,Ne=Object(Z["a"])(Ie,Oe,xe,!1,null,"bdf8a9b0",null),Ve=Ne.exports;Ve.install=function(e){e.component("ImageViewer",Ve)};var Be=Ve,Le=[Se,Te,Be],Me=function(e){Le.forEach((function(t){e.use(t)}))},Re={install:Me},Fe=a["a"].extend({name:"PdfFindBar",data:function(){return{toggle_multiple:[],query:"",type:"find",current:0,total:0}},computed:{counter:function(){return!!this.total&&this.total}},watch:{toggle_multiple:function(){this.dispatch(this.type)},query:function(e){this.dispatch(""),""==e&&(this.current=0,this.total=0)}},methods:{dispatch:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.query,a=this.getSearchParams(),n=a.entireWord,r=a.highlightAll,o=a.caseSensitive,s=a.matchDiacritics;console.log("11",{source:this,type:e,query:i,phraseSearch:!0,entireWord:n,highlightAll:r,findPrevious:t,caseSensitive:o,matchDiacritics:s}),this.$PDFViewerApplication.eventBus.dispatch("find",{source:this,type:e,query:i,phraseSearch:!0,entireWord:n,highlightAll:r,findPrevious:t,caseSensitive:o,matchDiacritics:s})},getSearchParams:function(){var e=this,t={entireWord:!1,highlightAll:!1,caseSensitive:!1,matchDiacritics:!1};return Object.keys(ce).map((function(i){var a=Number(i);if(e.toggle_multiple.includes(a)){var n=ce[i];t[n]=!0}})),t},updateType:function(e){this.type=e}},mounted:function(){var e=this,t=this.$PDFViewerApplication.eventBus;t.on(C.PDF.FIND_MATCHES_COUNT,(function(t){var i=t.current,a=t.total;e.current=i,e.total=a})),t.on(C.PDF.UPDATE_FIND_CONTROL_STATE,(function(t){var i=t.state;1==i&&(e.result="找不到指定词语")}))}}),Ue=Fe,He=(i("26d8"),Object(Z["a"])(Ue,P,y,!1,null,"c787962a",null)),je=He.exports;je.install=function(e){e.component(je.name,je)};var $e=je,We=i("99d9"),Ge=i("71a3"),ze=i("c671"),qe=i("fe57"),Ke=i("71d9"),Ze=i("2a7f"),Xe=i("3a2f"),Qe=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t(Ke["a"],{attrs:{light:"",dense:""}},[t(Ze["a"],[e._v(e._s(e.action))])],1),t(s["a"]),t(qe["a"],{attrs:{vertical:"","active-class":"active-btn"},on:{change:e.switchView}},[t(Xe["a"],{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(i){var a=i.attrs;return[t(Ge["a"],{staticClass:"min-tabs",attrs:{id:"viewThumbnail"}},[t(w["a"],e._b({on:{click:function(t){return e.switchView(e.SIDEBAR_VIEW.THUMBS)}}},"v-icon",a,!1),[e._v(" mdi-eye-outline ")])],1)]}}])},[t("span",[e._v("预览")])]),t(Xe["a"],{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(i){var a=i.attrs;return[t(Ge["a"],{staticClass:"min-tabs",attrs:{id:"viewOutline"}},[t(w["a"],e._b({on:{click:function(t){return e.switchView(e.SIDEBAR_VIEW.OUTLINE)}}},"v-icon",a,!1),[e._v(" mdi-list-box-outline ")])],1)]}}])},[t("span",[e._v("大纲")])]),t(Xe["a"],{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(i){var a=i.attrs;return[t(Ge["a"],{staticClass:"min-tabs",attrs:{id:"viewAttachments"}},[t(w["a"],e._b({on:{click:function(t){return e.switchView(e.SIDEBAR_VIEW.ATTACHMENTS)}}},"v-icon",a,!1),[e._v(" mdi-attachment ")])],1)]}}])},[t("span",[e._v("附件")])]),t(ze["a"],{attrs:{eager:!0}},[t(v["a"],{staticStyle:{positon:"relative"},attrs:{flat:""}},[t(We["b"],{staticClass:"overflow-y-auto",attrs:{id:"thumbnailView"}})],1)],1),t(ze["a"],{attrs:{eager:!0}},[t(v["a"],{attrs:{flat:""}},[t(We["b"],{staticClass:"overflow-y-auto",attrs:{id:"outlineView"}})],1)],1),t(ze["a"],{attrs:{eager:!0}},[t(v["a"],{attrs:{flat:""}},[t(We["b"],{staticClass:"overflow-y-auto",attrs:{id:"attachmentsView"}})],1)],1)],1)],1)},Je=[],Ye=a["a"].extend({name:"PdfSidebar",props:{},data:function(){return{action:"预览",SIDEBAR_VIEW:ie["SidebarView"],active:ie["SidebarView"].THUMBS,viewOutline:document.getElementById("viewOutline"),viewThumbnail:document.getElementById("viewThumbnail"),viewAttachments:document.getElementById("viewAttachments")}},methods:{switchView:function(e){this.action=ue[e]},onTreeLoaded:function(e){this.active===e&&this.switchView(ie["SidebarView"].THUMBS)},outlineloaded:function(){this.onTreeLoaded(ie["SidebarView"].OUTLINE)},attachmentsloaded:function(){this.onTreeLoaded(ie["SidebarView"].ATTACHMENTS)},mounted:function(){var e=this.$PDFViewerApplication.eventBus;e.on(C.PDF.OUTLINE_LOADED,this.outlineloaded),e.on(C.PDF.ATTACHMENTS_LOADED,this.attachmentsloaded)},destroyed:function(){var e=this.$PDFViewerApplication.eventBus;e.off(C.PDF.OUTLINE_LOADED,this.outlineloaded),e.off(C.PDF.ATTACHMENTS_LOADED,this.attachmentsloaded)}}}),et=Ye,tt=(i("2f48"),Object(Z["a"])(et,Qe,Je,!1,null,"4aaf25b3",null)),it=tt.exports;it.install=function(e){e.component(it.name,it)};var at=it,nt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"d-flex justify-center align-center mr-2"},[t(f["a"],{directives:[{name:"show",rawName:"v-show",value:!e.$vuetify.breakpoint.mobile,expression:"!$vuetify.breakpoint.mobile"}],attrs:{icon:"",disabled:e.pageNumber<=1},on:{click:e.previousPage}},[t(w["a"],[e._v("mdi-chevron-left")])],1),t(S["a"],{staticClass:"pageNumber",attrs:{"hide-details":"",id:"pageNumber"},on:{change:e.pageNumberChanged},model:{value:e.pageNumber,callback:function(t){e.pageNumber=t},expression:"pageNumber"}}),t(w["a"],[e._v("mdi-slash-forward")]),t("span",[e._v(e._s(e.pagesCount))]),t(f["a"],{directives:[{name:"show",rawName:"v-show",value:!e.$vuetify.breakpoint.mobile,expression:"!$vuetify.breakpoint.mobile"}],attrs:{icon:"",disabled:e.pageNumber>=e.pagesCount},on:{click:e.nextPage}},[t(w["a"],[e._v("mdi-chevron-right")])],1)],1)},rt=[],ot=(i("ac1f"),a["a"].extend({name:"PageController",data:function(){return{pageNumber:1,oldPageNumber:1,pagesCount:0}},created:function(){var e=this.$PDFViewerApplication.eventBus;e.on(C.PDF.SET_PAGE_NUMBER,this.setPageNumber),e.on(C.PDF.SET_PAGES_COUNT,this.setPagesCount)},destroyed:function(){var e=this.$PDFViewerApplication.eventBus;e.off(C.PDF.SET_PAGE_NUMBER,this.setPageNumber),e.off(C.PDF.SET_PAGES_COUNT,this.setPagesCount)},methods:{setPagesCount:function(e){this.pagesCount=e.pagesCount},setPageNumber:function(e){e.pageNumber<=this.pagesCount&&(this.pageNumber=e.pageNumber,this.oldPageNumber=e.pageNumber)},pageNumberChanged:function(e){var t=this.$PDFViewerApplication.eventBus;!/^[0-9]{1,20}$/.exec(e+"")||e>this.pagesCount?this.pageNumber=this.oldPageNumber:(this.pageNumber=e,this.oldPageNumber=e,t.dispatch(C.PDF.PAGE_NUMBER_CHANGED,e))},previousPage:function(){var e=this.$PDFViewerApplication.eventBus;e.dispatch(C.PDF.PREVIOUS_PAGE)},nextPage:function(){var e=this.$PDFViewerApplication.eventBus;e.dispatch(C.PDF.NEXT_PAGE)}}})),st=ot,lt=(i("be53"),Object(Z["a"])(st,nt,rt,!1,null,"1ba87a9b",null)),ct=lt.exports;ct.install=function(e){e.component(ct.name,ct)};var ut=ct,dt=i("8860"),pt=i("da13"),ht=i("5d23"),ft=i("1baa"),mt=i("34c3"),vt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(b["a"],{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(i){var a=i.on,n=i.attrs;return[t(f["a"],e._g(e._b({attrs:{icon:""}},"v-btn",n,!1),a),[t(w["a"],[e._v("mdi-dots-vertical")])],1)]}}])},[t(dt["a"],{staticClass:"pt-1 pb-0"},[t(ft["a"],[t(pt["a"],{attrs:{dense:""},on:{click:e.firstPage}},[t(mt["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-format-vertical-align-top")])],1),t(ht["a"],[t(ht["b"],[e._v("转到第一页")])],1)],1),t(pt["a"],{attrs:{dense:""},on:{click:e.lastPage}},[t(mt["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-format-vertical-align-bottom")])],1),t(ht["a"],[t(ht["b"],[e._v("转到最后一页")])],1)],1)],1),t(s["a"]),t("RotateController",{attrs:{placement:"secondaryToolbar"}}),t(s["a"]),t("PdfCursorTools"),t(s["a"]),t("PdfScrollMode"),t(s["a"]),t("PdfSpreadMode"),t(s["a"]),t(ft["a"],[t(pt["a"],{attrs:{dense:""}},[t(mt["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-information-outline")])],1),t(ht["a"],[t(ht["b"],[e._v("文档属性")])],1)],1)],1)],1)],1)},gt=[],wt=function(){var e=this,t=e._self._c;e._self._setupProxy;return"toolbar"===e.placement?t("div",[t(Xe["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(i){var a=i.on,n=i.attrs;return[t(f["a"],e._g(e._b({attrs:{icon:"",id:"pageRotateCw"},on:{click:e.handleRotateCw}},"v-btn",n,!1),a),[t(w["a"],[e._v("mdi-file-rotate-right-outline")])],1)]}}],null,!1,3735609104)},[t("span",[e._v("顺时针旋转")])]),t(Xe["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(i){var a=i.on,n=i.attrs;return[t(f["a"],e._g(e._b({attrs:{icon:"",id:"pageRotateCcw"},on:{click:e.handleRotateCcw}},"v-btn",n,!1),a),[t(w["a"],[e._v("mdi-file-rotate-left-outline")])],1)]}}],null,!1,4147743627)},[t("span",[e._v("逆时针旋转")])])],1):t(ft["a"],[t(pt["a"],{attrs:{dense:""}},[t(mt["a"],{staticClass:"mr-1"},[t(w["a"],[e._v("mdi-file-rotate-right-outline")])],1),t(ht["a"],{on:{click:e.handleRotateCw}},[t(ht["b"],[e._v("顺时针旋转")])],1)],1),t(pt["a"],{attrs:{dense:""}},[t(mt["a"],{staticClass:"mr-1"},[t(w["a"],[e._v("mdi-file-rotate-left-outline")])],1),t(ht["a"],{on:{click:e.handleRotateCcw}},[t(ht["b"],[e._v("逆时针旋转")])],1)],1)],1)},bt=[],_t=a["a"].extend({name:"RotateController",props:{placement:{type:String,default:"toolbar"}},methods:{handleRotateCcw:function(){var e=this.$PDFViewerApplication.eventBus;e.dispatch(C.PDF.ROTATE_CHANGING,-90)},handleRotateCw:function(){var e=this.$PDFViewerApplication.eventBus;e.dispatch(C.PDF.ROTATE_CHANGING,90)}}}),St=_t,Pt=Object(Z["a"])(St,wt,bt,!1,null,null,null),yt=Pt.exports;yt.install=function(e){e.component(yt.name,yt)};var kt=yt,Dt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(ft["a"],[t(pt["a"],{directives:[{name:"show",rawName:"v-show",value:!e.$vuetify.breakpoint.mobile,expression:"!$vuetify.breakpoint.mobile"}],attrs:{dense:"",id:"cursorSelectTool"},on:{click:e.cursorSelectTool}},[t(mt["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-cursor-default-outline")])],1),t(ht["a"],[t(ht["b"],[e._v("文本选择工具")])],1)],1),t(pt["a"],{attrs:{dense:"",id:"cursorHandTool"},on:{click:e.cursorHandTool}},[t(mt["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-hand-back-left-outline")])],1),t(ht["a"],[t(ht["b"],[e._v("手型工具")])],1)],1)],1)},Et=[],Ct=a["a"].extend({name:"PdfCursorTools",methods:{cursorSelectTool:function(){var e=this.$PDFViewerApplication.pdfCursorTools;e.switchTool(ie["CursorTool"].SELECT)},cursorHandTool:function(){var e=this.$PDFViewerApplication.pdfCursorTools;e.switchTool(ie["CursorTool"].HAND)}}}),Tt=Ct,Ot=Object(Z["a"])(Tt,Dt,Et,!1,null,null,null),xt=Ot.exports;xt.install=function(e){e.component(xt.name,xt)};var At=xt,It=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(ft["a"],[t(pt["a"],{attrs:{dense:""}},[t(mt["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-cursor-default-outline")])],1),t(ht["a"],{on:{click:function(t){return e.switchScrollMode(e.SCROLL_MODE.PAGE)}}},[t(ht["b"],[e._v("页面滚动")])],1)],1),t(pt["a"],{attrs:{dense:""}},[t(mt["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-arrow-vertical-lock")])],1),t(ht["a"],{on:{click:function(t){return e.switchScrollMode(e.SCROLL_MODE.VERTICAL)}}},[t(ht["b"],[e._v("垂直滚动")])],1)],1),t(pt["a"],{attrs:{dense:""}},[t(mt["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-arrow-horizontal-lock")])],1),t(ht["a"],{on:{click:function(t){return e.switchScrollMode(e.SCROLL_MODE.HORIZONTAL)}}},[t(ht["b"],[e._v("水平滚动")])],1)],1),t(pt["a"],{attrs:{dense:""}},[t(mt["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-hand-back-left-outline")])],1),t(ht["a"],{on:{click:function(t){return e.switchScrollMode(e.SCROLL_MODE.WRAPPED)}}},[t(ht["b"],[e._v("平铺滚动")])],1)],1)],1)},Nt=[],Vt=a["a"].extend({name:"PdfScrollMode",data:function(){return{SCROLL_MODE:ie["ScrollMode"]}},methods:{switchScrollMode:function(e){var t=this.$PDFViewerApplication.eventBus;t.dispatch(C.PDF.SWITCH_SCROLL_MODE,e)}}}),Bt=Vt,Lt=Object(Z["a"])(Bt,It,Nt,!1,null,null,null),Mt=Lt.exports;Mt.install=function(e){e.component(Mt.name,Mt)};var Rt=Mt,Ft=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(ft["a"],[t(pt["a"],{attrs:{dense:""}},[t(mt["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-hand-back-left-outline")])],1),t(ht["a"],{on:{click:function(t){return e.switchSpreadMode(e.SPREAD_MODE.NONE)}}},[t(ht["b"],[e._v("单页视图")])],1)],1),t(pt["a"],{attrs:{dense:""}},[t(mt["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-cursor-default-outline")])],1),t(ht["a"],{on:{click:function(t){return e.switchSpreadMode(e.SPREAD_MODE.ODD)}}},[t(ht["b"],[e._v("双页视图")])],1)],1),t(pt["a"],{attrs:{dense:""}},[t(mt["a"],{staticClass:"mr-1"},[t(w["a"],{staticClass:"text-h6"},[e._v("mdi-book-open-page-variant-outline")])],1),t(ht["a"],{on:{click:function(t){return e.switchSpreadMode(e.SPREAD_MODE.EVEN)}}},[t(ht["b"],[e._v("书籍视图")])],1)],1)],1)},Ut=[],Ht=a["a"].extend({name:"PdfScrollMode",data:function(){return{SPREAD_MODE:ie["SpreadMode"]}},methods:{switchSpreadMode:function(e){var t=this.$PDFViewerApplication.eventBus;t.dispatch(C.PDF.SWITCH_SPREAD_MODE,e)}}}),jt=Ht,$t=Object(Z["a"])(jt,Ft,Ut,!1,null,null,null),Wt=$t.exports;Wt.install=function(e){e.component(Wt.name,Wt)};var Gt=Wt,zt=a["a"].extend({name:"SecondaryToolbar",components:{RotateController:kt,PdfCursorTools:At,PdfScrollMode:Rt,PdfSpreadMode:Gt},methods:{firstPage:function(){var e=this.$PDFViewerApplication.eventBus;e.dispatch(C.PDF.FIRST_PAGE)},lastPage:function(){var e=this.$PDFViewerApplication.eventBus;e.dispatch(C.PDF.LAST_PAGE)}}}),qt=zt,Kt=Object(Z["a"])(qt,vt,gt,!1,null,null,null),Zt=Kt.exports;Zt.install=function(e){e.component(Zt.name,Zt)};var Xt=Zt,Qt=i("e0c7"),Jt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"d-flex justify-center align-center"},[t(f["a"],{attrs:{mini:"",id:"zoomOut",icon:"",disabled:e.pageScale<=e.MIN_SCALE},on:{click:e.zoomOut}},[t(w["a"],[e._v("mdi-minus")])],1),t(b["a"],{directives:[{name:"show",rawName:"v-show",value:!e.$vuetify.breakpoint.mobile,expression:"!$vuetify.breakpoint.mobile"}],scopedSlots:e._u([{key:"activator",fn:function(i){var a=i.on,n=i.attrs;return[t(f["a"],e._g(e._b({class:e.$vuetify.breakpoint.mobile?"scaleButton-mobile":"scaleButton-pc",attrs:{text:"",color:"black"}},"v-btn",n,!1),a),[e._v(" "+e._s(e.customScale||e.selectedScale.text)+" ")])]}}])},[t(dt["a"],{staticClass:"scaleList",attrs:{dense:"","max-height":"304"}},[t(Qt["a"],[e._v("选择缩放比例")]),e._l(e.options,(function(i){return t(pt["a"],{key:i.value,staticClass:"scaleListItem",on:{click:function(t){return e.selectScale(i)}}},[t(ht["b"],[e._v(e._s(i.text))])],1)}))],2)],1),t(f["a"],{attrs:{mini:"",id:"zoomIn",icon:"",disabled:e.pageScale>=e.MAX_SCALE},on:{click:e.zoomIn}},[t(w["a"],[e._v("mdi-plus")])],1)],1)},Yt=[],ei=1,ti=.1,ii=10,ai=[{text:"自动缩放",value:"auto"},{text:"实际大小",value:"page-actual"},{text:"适合页面",value:"page-fit"},{text:"适合页宽",value:"page-width"},{text:"50%",value:.5},{text:"75%",value:.75},{text:"100%",value:1},{text:"125%",value:1.25},{text:"150%",value:1.5},{text:"200%",value:2},{text:"300%",value:3},{text:"400%",value:4}],ni=a["a"].extend({name:"ScaleController",data:function(){return{options:ai,selectedScale:ai[0],customScale:"",pageScale:ei,pageScaleValue:ie["DEFAULT_SCALE_VALUE"],MIN_SCALE:ti,MAX_SCALE:ii}},created:function(){var e=this.$PDFViewerApplication.eventBus;e.on(C.PDF.SET_PAGE_SCALE,this.setPageScale)},methods:{zoomOut:function(){var e=this.$PDFViewerApplication.eventBus;e.dispatch(C.PDF.ZOOM_OUT)},zoomIn:function(){var e=this.$PDFViewerApplication.eventBus;e.dispatch(C.PDF.ZOOM_IN)},selectScale:function(e){var t=this.$PDFViewerApplication.eventBus;this.selectedScale=e,e.value&&t.dispatch(C.PDF.SCALE_CHANGED,e.value)},setPageScale:function(e){var t=e.pageScaleValue,i=e.pageScale;this.pageScale=i,this.pageScaleValue=t||Math.round(1e4*i)/100+"%";for(var a=!1,n=0;n<ai.length;n++){var r=ai[n];if(r.value===this.pageScale||r.value===this.pageScaleValue){a=!0,this.customScale=r.text,this.selectedScale=r;break}}a?this.customScale="":(this.customScale=this.pageScaleValue,this.selectedScale={})}}}),ri=ni,oi=(i("faa3"),Object(Z["a"])(ri,Jt,Yt,!1,null,"960140d6",null)),si=oi.exports;si.install=function(e){e.component(si.name,si)};var li=si,ci=i("8e36"),ui=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(ci["a"],{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],attrs:{value:e.percent}})},di=[],pi=a["a"].extend({name:"ProgressBar",data:function(){return{percent:0,visible:!1}},created:function(){this.$PDFViewerApplication.eventBus.on("updateloadingbar",this.updateLoadingBar),this.$PDFViewerApplication.eventBus.on("showloadingbar",this.showLoadingBar),this.$PDFViewerApplication.eventBus.on("hideloadingbar",this.hideLoadingBar)},methods:{updateLoadingBar:function(e){e<=this.percent||(this.percent=G(e,0,100),isNaN(e)||(this.percent=e))},showLoadingBar:function(){this.visible=!0},hideLoadingBar:function(){this.visible=!1}}}),hi=pi,fi=Object(Z["a"])(hi,ui,di,!1,null,null,null),mi=fi.exports;mi.install=function(e){e.component(mi.name,mi)};var vi=mi,gi=i("169a"),wi=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(gi["a"],{attrs:{persistent:"","max-width":"400"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(v["a"],[t(We["c"],{staticClass:"text-h6"},[e._v("文档已加密")]),t(We["b"],[t(S["a"],{attrs:{"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password",label:e.label},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),t(We["a"],[t(u["a"]),t(f["a"],{attrs:{text:""},on:{click:e.cancel}},[e._v("取消")]),t(f["a"],{attrs:{text:""},on:{click:e.submit}},[e._v("确认")])],1)],1)],1)},bi=[],_i=a["a"].extend({name:"PasswordPrompt",data:function(){return{dialog:!1,showPassword:!1,password:"",label:"请输入密码以打开此 PDF 文档"}},methods:{submit:function(){var e=this.$PDFViewerApplication.eventBus,t=this.password;e.dispatch(C.COMMON.PASSWORD.VERIFY,{password:t})},cancel:function(){var e=this.$PDFViewerApplication.eventBus;e.dispatch(C.COMMON.PASSWORD.CANCEL),this.passed()},open:function(e){e.label;this.dialog=!0},close:function(){this.dialog=!1},reset:function(){this.showPassword=!1,this.password=""},passed:function(){this.reset(),this.close()}},mounted:function(){var e=this.$PDFViewerApplication.eventBus;e.on(C.COMMON.PASSWORD.OPEN,this.open),e.on(C.COMMON.PASSWORD.PASSED,this.passed)},destroyed:function(){var e=this.$PDFViewerApplication.eventBus;e.off(C.COMMON.PASSWORD.OPEN,this.open),e.off(C.COMMON.PASSWORD.PASSED,this.passed)}}),Si=_i,Pi=Object(Z["a"])(Si,wi,bi,!1,null,null,null),yi=Pi.exports;yi.install=function(e){e.component(yi.name,yi)};var ki=yi,Di=i("ac7c"),Ei=i("4bd4"),Ci=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(gi["a"],{attrs:{persistent:"","max-width":"383"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t(v["a"],[t(We["c"],[e._v(" 验证用户密码 ")]),t(Ei["a"],{ref:"form"},[t(g["a"],{staticStyle:{padding:"24px"},attrs:{fluid:""}},[t(S["a"],{attrs:{dense:"","append-icon":e.show1?"mdi-eye":"mdi-eye-off",type:e.show1?"text":"password",rules:e.rules},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.passwordDialog.pwd,callback:function(t){e.$set(e.passwordDialog,"pwd",t)},expression:"passwordDialog.pwd"}}),t(Di["a"],{attrs:{"hide-details":"false",label:"记住密码, 7天内不再显示"},model:{value:e.passwordDialog.remember,callback:function(t){e.$set(e.passwordDialog,"remember",t)},expression:"passwordDialog.remember"}})],1)],1),t(We["a"],[t(u["a"]),t(f["a"],{attrs:{color:"error"},on:{click:e.cancel}},[e._v("取消")]),t(f["a"],{attrs:{color:"primary",dark:"",loading:e.loading},on:{click:e.submit}},[e._v("确认")])],1)],1)],1)},Ti=[],Oi=a["a"].extend({name:"password-verify",props:{visible:{type:Boolean,default:!1}},data:function(){return{show1:!1,loading:!1,passwordDialog:{pwd:"",remember:!1},rules:[function(e){return!!e||"密码不能为空"}],type:null}},watch:{visible:function(e){e||(this.loading=!1)}},methods:{setType:function(e){this.type=e},cancel:function(){this.$emit("hideSignPwd"),this.reset()},submit:function(){this.$refs.form.validate()&&(this.loading=!0,this.$emit("handleSubmit",{type:this.type,password:this.passwordDialog.pwd,isRemember:this.passwordDialog.remember}),this.reset())},reset:function(){this.passwordDialog.pwd="",this.passwordDialog.remember=!1}},mounted:function(){}}),xi=Oi,Ai=Object(Z["a"])(xi,Ci,Ti,!1,null,null,null),Ii=Ai.exports;Ii.install=function(e){e.component(Ii.name,Ii)};var Ni=Ii,Vi=i("62ad"),Bi=i("03a4"),Li=i("2b5d"),Mi=i("23a7"),Ri=i("b974"),Fi=function(){var e,t,i,a=this,n=this,r=n._self._c;n._self._setupProxy;return r(gi["a"],{attrs:{persistent:"","max-width":"990"},scopedSlots:n._u([{key:"activator",fn:function(e){var t=e.attrs;return[r(f["a"],n._b({directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{icon:""},on:{click:n.open}},"v-btn",t,!1),[r(w["a"],[n._v(" mdi-watermark ")])],1)]}}]),model:{value:n.dialog,callback:function(e){n.dialog=e},expression:"dialog"}},[r(v["a"],[r(We["c"],{staticClass:"text-h5"},[n._v(" 添加水印 ")]),r(We["b"],[r(Ei["a"],{ref:"form"},[r(g["a"],[r(_["a"],{attrs:{justify:"space-between",align:"start"}},[r(Vi["a"],{attrs:{cols:"3"}},[r(_["a"],[r(Mi["a"],{attrs:{accept:"image/*","prepend-inner-icon":"mdi-image","prepend-icon":"","truncate-length":"15",label:"上传图片作为水印"},model:{value:n.file,callback:function(e){n.file=e},expression:"file"}})],1),r(_["a"],[r(S["a"],{attrs:{disabled:!n.isText,clearable:"",label:"文本水印",rules:n.textMode},model:{value:n.watermark.text,callback:function(e){n.$set(n.watermark,"text",e)},expression:"watermark.text"}})],1),r(_["a"],[r(Ri["a"],{attrs:{disabled:!n.isText,items:n.fontNames,label:"文本字体",required:""},model:{value:n.watermark.font,callback:function(e){n.$set(n.watermark,"font",e)},expression:"watermark.font"}})],1),r(_["a"],[r(S["a"],{attrs:{disabled:!n.isText,rules:n.isNumber,label:"文本字号",type:"number",required:""},model:{value:n.watermark.size,callback:function(e){n.$set(n.watermark,"size",e)},expression:"watermark.size"}})],1),r(_["a"],[r(Bi["a"],{ref:"colorPicker",staticStyle:{width:"100%"},attrs:{disabled:!n.isText,"hide-mode-switch":"","hide-inputs":"","mode:sync":"rgba","canvas-height":"100"},model:{value:n.watermark.color,callback:function(e){n.$set(n.watermark,"color",e)},expression:"watermark.color"}})],1)],1),r(Vi["a"],{attrs:{cols:"3"}},[r(_["a"],[r(Li["a"],{attrs:{label:"旋转角度",clearable:"",items:n.rotateItems,suffix:null!==(e=n.watermark.rotate)&&void 0!==e&&e.text?"":"°","item-text":"text","item-value":"value",rules:n.notNULL},on:{change:function(e){return a.watermark.rotate=e}},model:{value:n.watermark.rotate,callback:function(e){n.$set(n.watermark,"rotate",e)},expression:"watermark.rotate"}})],1),r(_["a"],[r(S["a"],{attrs:{label:"不透明度",suffix:"%",rules:n.notNULL},model:{value:n.watermark.opacity,callback:function(e){n.$set(n.watermark,"opacity",e)},expression:"watermark.opacity"}})],1),r(_["a"],[r(Di["a"],{attrs:{label:"是否平铺"},model:{value:n.watermark.isTiled,callback:function(e){n.$set(n.watermark,"isTiled",e)},expression:"watermark.isTiled"}})],1),r(_["a"],[r(S["a"],{attrs:{disabled:!n.watermark.isTiled,label:"水印密度",rules:n.notNULL},model:{value:n.watermark.density,callback:function(e){n.$set(n.watermark,"density",e)},expression:"watermark.density"}})],1),r(_["a"],[r(Li["a"],{attrs:{disabled:n.watermark.isTiled,label:"垂直位置",clearable:"",items:n.verticalItems,suffix:null!==(t=n.watermark.vertical)&&void 0!==t&&t.text?"":"px","item-text":"text","item-value":"value",rules:n.notNULL},on:{change:function(e){return a.watermark.vertical=e}},model:{value:n.watermark.vertical,callback:function(e){n.$set(n.watermark,"vertical",e)},expression:"watermark.vertical"}})],1),r(_["a"],[r(Li["a"],{attrs:{disabled:n.watermark.isTiled,label:"水平位置",clearable:"",items:n.horizontalItems,suffix:null!==(i=n.watermark.horizontal)&&void 0!==i&&i.text?"":"px","item-text":"text","item-value":"value",rules:n.notNULL},on:{change:function(e){return a.watermark.horizontal=e}},model:{value:n.watermark.horizontal,callback:function(e){n.$set(n.watermark,"horizontal",e)},expression:"watermark.horizontal"}})],1)],1),r(Vi["a"],{staticStyle:{height:"100%"},attrs:{cols:"5"}},[r(v["a"],{staticStyle:{width:"100%",height:"476px",padding:"0"}},[r(_["a"],{staticStyle:{height:"100%"},attrs:{justify:"center",align:"center"}},[r("canvas",{attrs:{id:"previewCanvas"}})])],1)],1)],1)],1)],1)],1),r(We["a"],[r(u["a"]),r(f["a"],{attrs:{color:" darken-1",text:""},on:{click:n.cancel}},[n._v(" 取消 ")]),r(f["a"],{staticStyle:{"margin-right":"24px"},attrs:{color:"primary"},on:{click:n.submit}},[n._v(" 确认 ")])],1)],1)],1)},Ui=[],Hi=(i("00b4"),i("4de4"),i("1276"),i("5319"),[{text:"宋体",value:"SIMSUN.TTC"},{text:"微软雅黑",value:"msyh.ttc"},{text:"楷体",value:"SIMKAI.TTF"},{text:"黑体",value:"SIMHEI.TTF"}]),ji=[{text:"旋转45°",value:45},{text:"平行",value:0},{text:"旋转-45°",value:-45}],$i=[{text:"顶部居中",value:"top"},{text:"居中",value:"middle"},{text:"底部居中",value:"bottom"}],Wi=[{text:"左对齐",value:"left"},{text:"居中",value:"center"},{text:"右对齐",value:"right"}],Gi=a["a"].extend({name:"WaterMark",data:function(){return{fontNames:Hi,dialog:!1,isText:!0,rotateItems:ji,verticalItems:$i,horizontalItems:Wi,file:null,watermark:{file:null,text:"金格科技",font:Hi[0].value,size:32,color:"rgb(0,255,0)",rotate:ji[0],opacity:100,isTiled:!0,density:100,vertical:$i[0],horizontal:Wi[0]},textMode:[function(e){return!!e||"水印内容不能为空"}],notNULL:[function(e){return!!e||"不能为空"}],isNumber:[function(e){var t=/^\+?[1-9][0-9]*$/;return!!t.test(e)||"not number"}]}},watch:{file:function(e){var t=this;return Object(ee["a"])(Object(Y["a"])().mark((function i(){return Object(Y["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!e){i.next=7;break}return t.isText=!1,t.watermark.text||(t.watermark.text="   "),i.next=5,t.getImageBase64(e);case 5:i.next=9;break;case 7:t.isText=!0,t.watermark.file=null;case 9:case"end":return i.stop()}}),i)})))()},watermark:{handler:function(e){this.dialog&&this.$refs.form&&(this.$refs.form.validate()?(this.renderWaterMark(),this.isSubmit=!0):this.isSubmit=!1)},deep:!0}},methods:{documentRenderWatermark:function(e){for(var t=this.$PDFViewerApplication,i=t.pdfViewer,a=t.pagesCount,n=0;n<a;n++){var r=i.getPageView(n),o=r.viewport.scale,s=r.width/o,l=r.height/o,c=x(e,s,l);r.cloudReader_watermark_add(c)}},addWatermark:function(){var e=this.getOutput();this.documentRenderWatermark(e)},previewWatermark:function(e){e&&this.documentRenderWatermark(e)},renderWaterMark:function(){var e=this;this.$nextTick((function(){var t=e.$PDFViewerApplication,i=t.pdfViewer,a=t.page,n=i.getPageView(a-1),r=n.viewport.scale,o=n.width/r,s=n.height/r,l=.5,c=o*l,u=s*l,d=e.getOutput(),p=x(d,o,s),h=document.querySelector("#previewCanvas");N(p,h,l,c,u,n,!1)}))},getOutput:function(){var e,t,i,a=Object(h["a"])({},this.watermark);if(a.vertical=null!==(e=a.vertical)&&void 0!==e&&e.text?a.vertical.value:a.vertical,a.rotate=null!==(t=a.rotate)&&void 0!==t&&t.text?a.rotate.value:a.rotate,a.horizontal=null!==(i=a.horizontal)&&void 0!==i&&i.text?a.horizontal.value:a.horizontal,a.opacity=a.opacity/100,a.fontName=Hi.filter((function(e){return e.value==a.font}))[0].text,this.$refs.colorPicker){var n=this.$refs.colorPicker.$data.internalValue;a.color="rgb(".concat(n.rgba["r"],",").concat(n.rgba["g"],",").concat(n.rgba["b"],")")}return a},open:function(){if("string"===typeof this.watermark.color){var e=this.watermark.color.replace("rgb(","").replace(")","").split(",");this.watermark.color={b:e[2],g:e[1],r:e[0]}}this.dialog=!0,this.renderWaterMark()},cancel:function(){this.dialog=!1},submit:function(){this.$refs.form.validate()&&(console.log(this.getOutput()),this.renderWaterMark())},getImageBase64:function(e){var t=this;return Object(ee["a"])(Object(Y["a"])().mark((function i(){var a;return Object(Y["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:a=new FileReader,a.onload=function(e){var i=e.target.result;t.watermark.file=i},a.readAsDataURL(e);case 3:case"end":return i.stop()}}),i)})))()}},mounted:function(){var e=this,t=this.$PDFViewerApplication.eventBus,i=this.$appConfig.previewWatermark;t.on(C.PDF.DOCUMENT_LOADED,(function(){return e.previewWatermark(i)}))},destroyed:function(){var e=this.$PDFViewerApplication.eventBus;e.off(C.PDF.DOCUMENT_LOADED,this.addWatermark)}}),zi=Gi,qi=Object(Z["a"])(zi,Fi,Ui,!1,null,"a305b4d0",null),Ki=qi.exports;Ki.install=function(e){e.component(Ki.name,Ki)};var Zi=Ki,Xi=(i("f284"),i("841c"),i("4328")),Qi=i.n(Xi),Ji=i("bc3a"),Yi={text:"金格科技",font:"黑体",size:32,color:"rgb(22,22,22)",rotate:45,opacity:80,isTiled:!1,density:100,vertical:"middle",horizontal:"center"},ea=function(e){if(e){var t=e.font||Yi.font;return Object.assign({},Yi,e,{file:null,fontName:t,font:Hi.filter((function(e){return e.text==t}))[0].text,opacity:e.opacity/100})}return null},ta=function(){function e(t){Object(ne["a"])(this,e);var i=t.url,a=void 0===i?"":i,n=t.documentId,r=void 0===n?"":n,o=t.previewWatermark,s=void 0===o?null:o;this._url=a,this._documentId=r,this._previewWatermark=null,s&&(this._previewWatermark=ea(s))}return Object(re["a"])(e,[{key:"previewWatermark",get:function(){return this._previewWatermark}},{key:"url",get:function(){return this._url},set:function(e){this._url=e}},{key:"documentId",get:function(){return this._documentId},set:function(e){this._documentId=e}}]),e}(),ia=window.setAppConfig(),aa=new ta(ia);window.KGPdfViewerWebApp=window.appConfig=aa;var na=aa,ra=Ji["a"].create({baseURL:na.url,method:"POST",params:{docType:0},paramsSerializer:function(e){return Qi.a.stringify(e,{arrayFormat:"brackets"})},headers:{"Content-Type":"application/json;charset=UTF-8","X-Requested-With":"XMLHttpRequest"}});ra.interceptors.request.use((function(e){return"post"===e.method&&(e.data={isEncrypt:!1,data:e.data}),e}),(function(e){return e})),ra.interceptors.response.use((function(e){switch(e.status){case 200:var t=e.data;return t?"arraybuffer"===e.config.responseType&&t.byteLength>0||t.status||t.companyName?t:t.message?(alert(t.message),Promise.reject()):t.status:("请求失败：".concat(t.status,"，请联系管理员"),alert(t.message),Promise.reject());default:return"请求失败：".concat(t.status,"，请联系管理员"),alert(t.message),Promise.reject()}}));var oa,sa=ra,la="GM",ca=0,ua=0;if(window.appConfig.documentId)oa=window.appConfig.documentId;else{var da=location.search?location.search.split("?")[1]:void 0;da&&(oa=(void 0)(da).get("documentid"))}var pa=function(){if(oa)return sa({method:"GET",params:{action:"downloadnew",documentId:oa},responseType:"arraybuffer"});throw new Error("未指定要加载的文档")},ha=function(e){var t=window.appConfig,i=t.userId,a=t.filterSealNames,n=t.password;return sa({data:{action:"getSeals",sealType:la,keySN:i,filterSealNames:a,sealOrigin:ca,certOrigin:ua,password:n||e}})},fa=function(e,t){var i=window.appConfig,a=i.stampType,n=i.userId,r=i.documentId,o=e.map((function(e){return{keySN:n,extraPosition:{},lastSelected:{},currentPage:e.page.toString(),esid:e.esid,width:e.width,height:e.height,imgExt:e.imgExt,imgdata:e.imgdata,left:e.left,top:e.top,page:e.page.toString(),sealData:e.sealData,sealtag:e.sealtag,signName:e.signName,signSN:V["enc"].Base64.stringify(V["enc"].Utf8.parse(e.signSN)),unitName:e.unitName,userCode:e.userCode,userName:e.userName,version:e.version}}));return o=0!=a?[o]:o,sa({data:{action:"stampSeal",certOrigin:ua,documentId:r,stampType:a,cert:t,algorithmType:"RSA",sealType:la,appcode:"",clientCode:"",isUkey:!1,isWebAuth:!1,pdfPwd:"",seals:o}})},ma=function(e){var t=e.pageNo,i=e.x,a=e.y,n=window.appConfig.documentId;return sa({data:{action:"verifySeal",documentId:n,certOrigin:ua,page:t,x:i,y:a,isSM:!1}})},va=function(e){var t=e.pageNo,i=e.x,a=e.y,n=e._password,r=window.appConfig,o=r.password,s=r.documentId,l=r.userId;return sa({data:{action:"deleteSeal",documentId:s,keySN:l,certOrigin:0,page:t,x:i,y:a,password:o||n,isSM:!1}})},ga=function(e){var t=e.pageNo,i=e.x,a=e.y,n=window.appConfig.documentId;return sa({data:{action:"checkLastone",documentId:n,page:t,x:i,y:a}})},wa=function(e){var t=e.color,i=e.fontName,a=e.fontSize,n=e.fullscreen,r=e.leftBottomPosition,o=e.opacity,s=e.rotate,l=e.source,c=e.text,u=e.density,d=e.file;return sa({data:{action:"addWatermark",documentId:window.appConfig.documentId,color:t,fontName:i,file:d,fontSize:a,fullscreen:n,leftBottomPosition:r,opacity:o,density:u,rotate:s,source:l,text:c}})},ba={download:pa,getSeals:ha,stampSeal:fa,deleteSeal:va,checkLastone:ga,verifySeal:ma,addWatermark:wa},_a=i("2f62"),Sa=Object(_a["a"])("page").mapActions,Pa=Object(_a["a"])("seal").mapActions,ya=Object(_a["a"])("dialog").mapActions,ka=Object(_a["a"])("permission").mapActions,Da=a["a"].extend({name:"App",components:{PdfFindBar:$e,PdfSidebar:at,SecondaryToolbar:Xt,PageController:ut,ScaleController:li,ProgressBar:vi,PasswordPrompt:ki,WaterMark:Zi,PasswordVerify:Ni},data:function(){return{password:"123456",sideBar:{visible:!1}}},computed:Object(h["a"])(Object(h["a"])({},Object(_a["c"])({isPwdDialogVisible:function(e){var t=e.dialog;return t.isPwdDialogVisible},isSealSelectorVisible:function(e){var t=e.seal;return t.isSealSelectorVisible},operatorPermission:function(e){var t=e.permission;return t.operatorPermission},sealList:function(e){var t=e.seal;return t.sealList},currentScale:function(e){var t=e.page;return t.currentScale}})),{},{textLayerMode:function(){return this.$vuetify.breakpoint.mobile?ie["TextLayerMode"].DISABLE:ie["TextLayerMode"].ENABLE},fileUrl:function(){var e=this.$appConfig,t=e.url,i=e.documentId;return"".concat(t,"?docType=0&action=download&documentId=").concat(i,"&t=").concat((new Date).getTime())}}),methods:Object(h["a"])(Object(h["a"])(Object(h["a"])(Object(h["a"])(Object(h["a"])({},Pa(["getSealList","setIsSealSelectorVisible","setSealDisabled"])),ya(["setIsPwdDialogVisible"])),ka(["setPermission"])),Sa(["currentScaleChange","currentPageNumberChange"])),{},{sidebarToggle:function(){var e=this.$PDFViewerApplication.eventBus;this.sideBar.visible=!this.sideBar.visible,e.dispatch(C.PDF.SIDEBAR.TOGGLE),e.dispatch(C.PDF.SIDEBAR.UPDATE_THUMBNAIL_VIEWER)},onSealSelctorBtnClick:function(e){this.setIsPwdDialogVisible(!0),this.$refs.signPwd.setType(e)},onSignPwdSubmit:function(e){switch(e.type){case 0:this.getSealList({password:e.password,pwdInfo:e});break;default:break}},onSealSelectorClose:function(){this.setIsSealSelectorVisible(!1)},onSealSelectorCancel:function(){this.setIsSealSelectorVisible(!1)},onSealSelectorConfirm:function(e){this.setIsSealSelectorVisible(!1);var t=document.createElement("img");t.width=e.width,t.height=e.height,t.src=e.imgdata,t.onload=function(){}}})}),Ea=Da,Ca=Object(Z["a"])(Ea,d,p,!1,null,null,null),Ta=Ca.exports,Oa=function(){return{sealList:[],isStampSeal:!1,isSealSelectorVisible:!1,sealDisabled:!1}},xa={},Aa={handleStampSeal:function(e){e.state;var t=e.dispatch;e.commit;if(window.appConfig.password)t("getSealList",{password:window.appConfig.password});else{var i=j(),a=i.password;a?t("getSealList",{password:a}):t("dialog/setIsPwdDialogVisible",!0,{root:!0})}},setIsStampSeal:function(e,t){e.state;var i=e.commit;i("setIsStampSeal",t)},setIsSealSelectorVisible:function(e,t){e.state;var i=e.commit;i("setIsSealSelectorVisible",t)},getSealList:function(e,t){e.state;var i=e.dispatch,a=e.commit,n=t.password,r=t.pwdInfo;i("dialog/setIsPwdDialogVisible",!1,{root:!0}),ha(n).then((function(e){var t={password:"",isRemember:!1};null!==r&&void 0!==r&&r.password&&(t.password=r.password,t.isRemember=r.isRemember),$(t),a("setIsSealSelectorVisible",!0),a("setSealList",e.seals)})).catch((function(e){a("setIsSealSelectorVisible",!1)}))},setSealDisabled:function(e,t){e.state;var i=e.commit;i("setSealDisabled",t)}},Ia={setSealList:function(e,t){e.sealList=t},setIsStampSeal:function(e,t){e.isStampSeal=t},setSealDisabled:function(e,t){e.sealDisabled=t},setIsPwdDialogVisible:function(e,t){e.isPwdDialogVisible=t},setIsSealSelectorVisible:function(e,t){e.isSealSelectorVisible=t}},Na={namespaced:!0,state:Oa,getters:xa,actions:Aa,mutations:Ia},Va=function(){return{appConfig:{url:"",documentId:"",readOnly:!1}}},Ba={},La={},Ma={setDocumentId:function(e,t){e.appConfig.documentId=t},setUrl:function(e,t){e.appConfig.url=t},setReadOnly:function(e,t){e.appConfig.readOnly=t}},Ra={namespaced:!0,state:Va,getters:Ba,actions:La,mutations:Ma},Fa=function(){return{isPwdDialogVisible:!1,isSignaturePadVisible:!1}},Ua={},Ha={setIsPwdDialogVisible:function(e,t){e.state;var i=e.commit;window.appConfig.password||i("setIsPwdDialogVisible",t)},setIsSignaturePadVisible:function(e,t){e.state;var i=e.commit;i("setIsSignaturePadVisible",t)}},ja={setIsPwdDialogVisible:function(e,t){e.isPwdDialogVisible=t},setIsSignaturePadVisible:function(e,t){e.isSignaturePadVisible=t}},$a={namespaced:!0,state:Fa,getters:Ua,actions:Ha,mutations:ja};a["a"].use(_a["b"]);var Wa=new _a["b"].Store({modules:{seal:Na,config:Ra,dialog:$a}}),Ga=(i("fe2e"),i("5363"),i("f309"));a["a"].use(Ga["a"]);var za=new Ga["a"]({breakpoint:{mobileBreakpoint:"sm"}});a["a"].config.productionTip=!1,a["a"].prototype.$appConfig=na,a["a"].prototype.$http=sa,a["a"].prototype.$service=ba,a["a"].use(Re),new a["a"]({store:Wa,vuetify:za,render:function(e){return e(Ta)}}).$mount("#app")},f0b6:function(e,t){function i(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id="f0b6"},f284:function(e,t,i){},faa3:function(e,t,i){"use strict";i("3a06")}});
//# sourceMappingURL=app.346d2eeb.js.map