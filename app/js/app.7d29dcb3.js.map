{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/base/PdfFindBar/PdfFindBar.vue?a81e","webpack:///./src/components/base/PdfSidebar/PdfSidebar.vue?79a2","webpack:///./src/components/base/ScaleController/ScaleController.vue?5646","webpack:///./src/components/base/PageController/PageController.vue?7cdb","webpack:///./src/components/doc/PdfViewer/PdfViewer.vue?0f1a","webpack:///./src/App.vue","webpack:///./src/components/base/PdfFindBar/PdfFindBar.vue","webpack:///./src/components/doc/PdfViewer/PdfViewer.vue","webpack:///./src/constants/event.ts","webpack:///src/components/doc/PdfViewer/PdfViewer.vue","webpack:///./src/components/doc/PdfViewer/PdfViewer.vue?9557","webpack:///./src/components/doc/PdfViewer/PdfViewer.vue?7b93","webpack:///./src/components/doc/PdfViewer/WebViewer.js","webpack:///./src/components/doc/PdfViewer/constants.js","webpack:///./src/components/doc/PdfViewer/PasswordPrompt.js","webpack:///./src/components/doc/PdfViewer/PdfSidebar.js","webpack:///./src/components/doc/PdfViewer/app.js","webpack:///./src/components/doc/PdfViewer/index.js","webpack:///./src/components/doc/OfdViewer/OfdViewer.vue","webpack:///src/components/doc/OfdViewer/OfdViewer.vue","webpack:///./src/components/doc/OfdViewer/OfdViewer.vue?7581","webpack:///./src/components/doc/OfdViewer/OfdViewer.vue?876b","webpack:///./src/components/doc/OfdViewer/index.js","webpack:///./src/components/doc/ImageViewer/ImageViewer.vue","webpack:///src/components/doc/ImageViewer/ImageViewer.vue","webpack:///./src/components/doc/ImageViewer/ImageViewer.vue?31e0","webpack:///./src/components/doc/ImageViewer/ImageViewer.vue?ea14","webpack:///./src/components/doc/ImageViewer/index.js","webpack:///./src/components/doc/index.js","webpack:///src/components/base/PdfFindBar/PdfFindBar.vue","webpack:///./src/components/base/PdfFindBar/PdfFindBar.vue?9bd6","webpack:///./src/components/base/PdfFindBar/PdfFindBar.vue?4c36","webpack:///./src/components/base/PdfFindBar/index.js","webpack:///./src/components/base/PdfSidebar/PdfSidebar.vue","webpack:///./src/components/base/PdfSidebar/PdfSidebar.vue?d40a","webpack:///./src/components/base/PdfSidebar/PdfSidebar.vue?a156","webpack:///./src/components/base/PdfSidebar/PdfSidebar.vue?1af6","webpack:///./src/components/base/PdfSidebar/index.js","webpack:///./src/components/base/PageController/PageController.vue","webpack:///./src/components/base/PageController/PageController.vue?68e3","webpack:///./src/components/base/PageController/PageController.vue?bcf6","webpack:///./src/components/base/PageController/PageController.vue?e987","webpack:///./src/components/base/PageController/index.js","webpack:///./src/components/base/SecondaryToolbar/SecondaryToolbar.vue","webpack:///./src/components/base/RotateController/RotateController.vue","webpack:///./src/components/base/RotateController/RotateController.vue?8a00","webpack:///./src/components/base/RotateController/RotateController.vue?eb79","webpack:///./src/components/base/RotateController/RotateController.vue?f420","webpack:///./src/components/base/RotateController/index.js","webpack:///./src/components/base/PdfCursorTools/PdfCursorTools.vue","webpack:///./src/components/base/PdfCursorTools/PdfCursorTools.vue?c849","webpack:///./src/components/base/PdfCursorTools/PdfCursorTools.vue?d419","webpack:///./src/components/base/PdfCursorTools/PdfCursorTools.vue?7e40","webpack:///./src/components/base/PdfCursorTools/index.js","webpack:///./src/components/base/PdfScrollMode/PdfScrollMode.vue","webpack:///./src/components/base/PdfScrollMode/PdfScrollMode.vue?5c46","webpack:///./src/components/base/PdfScrollMode/PdfScrollMode.vue?4789","webpack:///./src/components/base/PdfScrollMode/PdfScrollMode.vue?bc01","webpack:///./src/components/base/PdfScrollMode/index.js","webpack:///./src/components/base/PdfSpreadMode/PdfSpreadMode.vue","webpack:///./src/components/base/PdfSpreadMode/PdfSpreadMode.vue?7dfb","webpack:///./src/components/base/PdfSpreadMode/PdfSpreadMode.vue?1392","webpack:///./src/components/base/PdfSpreadMode/PdfSpreadMode.vue?81cd","webpack:///./src/components/base/PdfSpreadMode/index.js","webpack:///./src/components/base/SecondaryToolbar/SecondaryToolbar.vue?4477","webpack:///./src/components/base/SecondaryToolbar/SecondaryToolbar.vue?eb3c","webpack:///./src/components/base/SecondaryToolbar/SecondaryToolbar.vue?b8f1","webpack:///./src/components/base/SecondaryToolbar/index.js","webpack:///./src/components/base/ScaleController/ScaleController.vue","webpack:///src/components/base/ScaleController/ScaleController.vue","webpack:///./src/components/base/ScaleController/ScaleController.vue?6c63","webpack:///./src/components/base/ScaleController/ScaleController.vue?207c","webpack:///./src/components/base/ScaleController/index.js","webpack:///./src/components/base/ProgressBar/ProgressBar.vue","webpack:///./src/utils/watermark.js","webpack:///./src/utils/index.ts","webpack:///./src/components/base/ProgressBar/ProgressBar.vue?631a","webpack:///./src/components/base/ProgressBar/ProgressBar.vue?406b","webpack:///./src/components/base/ProgressBar/ProgressBar.vue?274d","webpack:///./src/components/base/ProgressBar/index.js","webpack:///./src/components/base/PasswordPrompt/PasswordPrompt.vue","webpack:///src/components/base/PasswordPrompt/PasswordPrompt.vue","webpack:///./src/components/base/PasswordPrompt/PasswordPrompt.vue?303a","webpack:///./src/components/base/PasswordPrompt/PasswordPrompt.vue?580a","webpack:///./src/components/base/PasswordPrompt/index.js","webpack:///./src/components/biz/PasswordVerify/PasswordVerify.vue","webpack:///src/components/biz/PasswordVerify/PasswordVerify.vue","webpack:///./src/components/biz/PasswordVerify/PasswordVerify.vue?9ab3","webpack:///./src/components/biz/PasswordVerify/PasswordVerify.vue?ac6f","webpack:///./src/components/biz/PasswordVerify/index.js","webpack:///./src/components/biz/WaterMark/WaterMark.vue","webpack:///./src/constants/watermark.ts","webpack:///src/components/biz/WaterMark/WaterMark.vue","webpack:///./src/components/biz/WaterMark/WaterMark.vue?0478","webpack:///./src/components/biz/WaterMark/WaterMark.vue?8211","webpack:///./src/components/biz/WaterMark/index.js","webpack:///./src/config/setWatermarkConfig.ts","webpack:///./src/config/index.ts","webpack:///./src/service/request.js","webpack:///./src/service/index.js","webpack:///./src/App.vue?9844","webpack:///./src/App.vue?5eb4","webpack:///./src/App.vue?315a","webpack:///./src/store/index.ts","webpack:///./src/plugins/vuetify.ts","webpack:///./src/main.ts","webpack:///./node_modules/@cloud-reader/pdf.js-dist/legacy/web lazy namespace object"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_c","attrs","sideBar","callback","_vm","expression","textLayerMode","staticRenderFns","render","staticClass","model","$$v","on","$event","dispatch","_v","toggle_multiple","this","_self","onDragover","onDrop","_m","EVENT","PDF","ZOOM_IN","ZOOM_OUT","FIRST_PAGE","LAST_PAGE","PREVIOUS_PAGE","NEXT_PAGE","FIND_MATCHES_COUNT","PAGE_NUMBER_CHANGED","PAGE_CHANGING","FIND","UPDATE_FIND_MATCHES_COUNT","UPDATE_FIND_CONTROL_STATE","ROTATE_CHANGING","SCALE_CHANGING","SCALE_CHANGED","FILE_INPUT_CHANGE","DOCUMENT_ERROR","PRESENTATION_MODE_CHANGED","OUTLINE_LOADED","ATTACHMENTS_LOADED","LAYERS_LOADED","SIDEBAR_VIEW_CHANGED","SWITCH_SCROLL_MODE","SWITCH_SPREAD_MODE","UPDATE_LOADING_BAR","SHOW_LOADING_BAR","HIDE_LOADING_BAR","SET_PAGES_COUNT","SET_PAGE_NUMBER","SET_PAGE_SCALE","DOCUMENT_LOADED","SIDEBAR","TOGGLE","SWITCH_VIEW","UPDATE_THUMBNAIL_VIEWER","OFD","IMAGE","COMMON","PASSWORD","VERIFY","CANCEL","OPEN","PASSED","props","url","type","password","methods","evt","eventBus","source","fileInput","mounted","appContainer","mainContainer","viewerContainer","component","WebViewer","app","zoomIn","zoomOut","pageScaleValue","pdfViewer","currentScaleValue","presetValue","pageScale","scale","update","percent","previousPage","nextPage","pdfDocument","page","pagesCount","pageNumber","pdfThumbnailViewer","scrollThumbnailIntoView","pdfLinkService","goToPage","currentPageNumber","toString","pageChanging","file","files","URL","createObjectURL","originalUrl","open","defaultUrl","reason","l10n","then","msg","_documentError","delta","pagesRotation","spreadMode","scrollMode","matchesCount","SEARCH_MAP","0","1","2","3","SIDEBAR_VIEW_MAP","PasswordPrompt","verify","cancel","invokeCallback","passwordIncorrect","PASSWORD_RESPONSES","INCORRECT_PASSWORD","message","label","isCancel","Error","updateCallback","PDFSidebar","isOpen","active","SidebarView","THUMBS","isInitialViewSet","isInitialEventDispatched","onToggled","addEventListeners","switchView","NONE","view","UNKNOWN","dispatchEvent","forceOpen","isViewChanged","shouldForceRendering","close","OUTLINE","outlineButton","disabled","ATTACHMENTS","attachmentsButton","LAYERS","layersButton","console","error","updateThumbnailViewer","forceRendering","visibleView","pageIndex","pageView","getPageView","renderingState","RenderingStates","FINISHED","thumbnailView","getThumbnail","setImage","toggle","DISABLE_AUTO_FETCH_LOADING_BAR_TIMEOUT","ViewOnLoad","PREVIOUS","INITIAL","GlobalWorkerOptions","workerPort","pdfjsWorker","PDFViewerApplication","_initializedCapability","createPromiseCapability","appConfig","pdfLoadingTask","pdfHistory","pdfCursorTools","EventBus","isViewerEmbedded","parent","NullL10n","downloadComplete","pdfSidebar","pdfOutlineViewer","pdfAttachmentViewer","initialize","_initializeViewerComponents","bindEvents","resolve","pdfRenderingQueue","PDFRenderingQueue","onIdle","_cleanup","linkService","PDFLinkService","findController","PDFFindController","passwordPrompt","container","viewer","PDFViewer","setViewer","outlineView","attachmentsView","PDFThumbnailViewer","renderingQueue","setThumbnailViewer","PDFHistory","setHistory","needSideBar","PDFOutlineViewer","downloadManager","DownloadManager","PDFAttachmentViewer","PDFCursorTools","cursorToolOnLoad","CursorTool","SELECT","cleanup","run","config","webViewer","initialized","settled","promise","numPages","isInPresentationMode","increaseScale","decreaseScale","promises","destroy","setDocument","reset","Promise","all","args","parameters","loadingTask","getDocument","cMapUrl","cMapPacked","standardFontDataUrl","onPassword","externalLinkEnabled","setUpdateCallback","onProgress","loaded","total","progress","load","InvalidPDFException","MissingPDFException","UnexpectedResponseException","moreInfo","_otherError","moreInfoText","version","build","stack","filename","lineNumber","line","parts","join","level","Math","round","updateLoadingBar","disableAutoFetchLoadingBarTimeout","clearTimeout","showLoadingBar","setTimeout","hideLoadingBar","getDownloadInfo","_contentLength","openActionPromise","getOpenAction","catch","setPagesCount","firstPagePromise","onePageRendered","pagesPromise","openAction","_initializePdfHistory","fingerprint","fingerprints","viewOnLoad","initialDest","dest","setInitialView","getOutline","outline","getAttachments","attachments","documentLoaded","resetHistory","updateUrl","initialBookmark","initialRotation","JSON","stringify","explicitDest","DEFAULT_SCALE_VALUE","printing","isThumbnailViewEnabled","renderHighestPriority","_on","e","firstPage","lastPage","pageNumberChanged","scaleChanged","scaleChanging","rotatePage","switchScrollMode","switchSpreadMode","fileInputChange","updateFindMatchesCount","PdfViewer","install","Vue","$PDFViewerApplication","_setupProxy","extend","OfdViewer","ImageViewer","components","forEach","use","query","current","computed","counter","watch","val","phraseSearch","entireWord","highlightAll","findPrevious","caseSensitive","matchDiacritics","getSearchParams","params","updateType","PdfFindBar","scopedSlots","fn","_u","staticStyle","action","SIDEBAR_VIEW","viewOutline","document","getElementById","viewThumbnail","viewAttachments","onTreeLoaded","outlineloaded","attachmentsloaded","destroyed","off","PdfSidebar","$vuetify","oldPageNumber","created","setPageNumber","exec","PageController","_b","handleRotateCw","placement","String","default","handleRotateCcw","RotateController","rawName","cursorSelectTool","switchTool","CURSOR_TOOL","cursorHandTool","HAND","PdfCursorTools","SCROLL_MODE","PdfScrollMode","SPREAD_MODE","PdfSpreadMode","SecondaryToolbar","directives","text","options","selectedScale","customScale","MIN_SCALE","MAX_SCALE","selectScale","item","setPageScale","option","predefinedValueFound","ScaleController","_setup","leftTopTransformToLeftBottom","leftTopPosition","pageHeight","leftBottomPosition","x","y","computeTextWdith","fontSize","font","tempCanvas","createElement","tempCtx","getContext","measureText","width","convertConfig","pageWidth","color","fontName","fullscreen","fileWidth","fileHeight","opacity","position","rotate","density","height","trim","size","Number","isTiled","padding","vertical","horizontal","getDistance","quadrant","rotationInRadians","PI","textWidth","textDiagonal","sqrt","pow","diagonalAngle","atan","textHorizontalLength","textVerticalHeight","abs","sin","cos","getXYPositions","pageMidPointX","pageMidPointY","xDistance","yDistance","xyPositions","leftXCoordinate","rightXCoordinate","truth","upYCoordinate","bottomYCoordinate","renderWaterMark","targetCanvas","targetScale","targetWidth","targetHeight","pageCenterX","pageCenterY","translate","globalAlpha","textAlign","fillStyle","fillText","image","Image","onload","imageWidth","imageHeight","drawImage","src","targetCtx","canvas","watermarkImg","toDataURL","distance","minXDistance","minYDistance","clamp","v","min","max","visible","isNaN","ProgressBar","dialog","showPassword","submit","passed","ref","show1","$set","passwordDialog","remember","loading","pwd","rules","setType","PasswordVerify","watermark","isText","rotateItems","notNULL","horizontalItems","WATERMARK_FONT_OPTIONS","WATERMARK_ROTATE_OPTIONS","WATERMARK_VERTICAL_OPTIONS","WATERMARK_HORIZONTAL_OPTIONS","fontNames","verticalItems","textMode","isNumber","handler","deep","documentRenderWatermark","addWatermark","previewWatermark","previewCanvas","previewScale","previewWidth","previewHeight","getOutput","output","replace","split","b","g","getImageBase64","reader","WaterMark","defaultWatermarkConfig","setWatermarkConfig","userWatermarkConfig","assign","filter","AppConfig","userConfig","documentId","_url","_documentId","_previewWatermark","setAppConfig","KGPdfViewerWebApp","request","axios","baseURL","method","docType","paramsSerializer","QueryString","arrayFormat","headers","interceptors","isEncrypt","response","status","responseType","byteLength","companyName","reject","sealType","sealOrigin","certOrigin","queryString","location","search","undefined","parseQueryString","download","getSeals","_password","userId","filterSealNames","keySN","stampSeal","seals","cert","stampType","convetSeals","map","seal","extraPosition","lastSelected","currentPage","esid","imgExt","imgdata","left","top","sealData","sealtag","signName","signSN","enc","Base64","Utf8","parse","unitName","userCode","userName","algorithmType","appcode","clientCode","isUkey","isWebAuth","pdfPwd","verifySeal","pageNo","isSM","deleteSeal","checkLastone","signPwdVisible","sealList","sealSelectorVisible","breakpoint","mobile","TEXT_LAYER_MODE","DISABLE","ENABLE","fileUrl","$appConfig","Date","getTime","sidebarToggle","onSealSelctorBtnClick","$refs","signPwd","onSignPwdSubmit","Services","res","onSealSelectorClose","onSealSelectorCancel","onSealSelectorConfirm","img","Vuex","Store","state","mutations","actions","Vuetify","mobileBreakpoint","productionTip","$http","$service","service","DocViewer","store","vuetify","h","App","$mount","webpackEmptyAsyncContext","req","code","keys","id"],"mappings":"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","file":"js/app.7d29dcb3.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfFindBar.vue?vue&type=style&index=0&id=c787962a&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfSidebar.vue?vue&type=style&index=0&id=4aaf25b3&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScaleController.vue?vue&type=style&index=0&id=bf2b21c4&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageController.vue?vue&type=style&index=0&id=1ba87a9b&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfViewer.vue?vue&type=style&index=0&id=6aaecc8e&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('v-app',[_c('v-app-bar',{attrs:{\"app\":\"\",\"dense\":_vm.$vuetify.breakpoint.mobile}},[_c('v-spacer'),_c('PageController'),_c('v-divider',{class:_vm.$vuetify.breakpoint.mobile ? 'mx-1' : 'mx-4',attrs:{\"vertical\":\"\"}}),_c('ScaleController'),_c('v-divider',{class:_vm.$vuetify.breakpoint.mobile ? 'mx-1' : 'mx-4',attrs:{\"vertical\":\"\"}}),_c('v-spacer'),(!_vm.$vuetify.breakpoint.mobile)?_c('PdfFindBar'):_vm._e(),_c('WaterMark'),_c('SecondaryToolbar')],1),_c('v-navigation-drawer',{attrs:{\"absolute\":\"\",\"left\":\"\",\"temporary\":\"\"},model:{value:(_vm.sideBar.visible),callback:function ($$v) {_vm.$set(_vm.sideBar, \"visible\", $$v)},expression:\"sideBar.visible\"}},[_c('PdfSidebar')],1),_c('v-main',[_c('ProgressBar'),_c('PdfViewer',{attrs:{\"url\":_vm.fileUrl,\"textLayerMode\":_vm.textLayerMode}}),_c('PasswordPrompt')],1),_c('PasswordVerify',{ref:\"signPwd\",attrs:{\"visible\":_vm.signPwdVisible},on:{\"handleSubmit\":_vm.onSignPwdSubmit,\"hideSignPwd\":function($event){_vm.signPwdVisible = false}}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('v-menu',{attrs:{\"offset-y\":\"\",\"close-on-click\":false,\"close-on-content-click\":false,\"allow-overflow\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-btn',_vm._g(_vm._b({attrs:{\"id\":\"viewFind\",\"icon\":\"\"}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-magnify\")])],1)]}}])},[_c('v-card',[_c('v-container',[_c('v-row',{staticClass:\"findbarInputContainer\",attrs:{\"justify\":\"space-around\",\"align\":\"center\",\"id\":\"findbarInputContainer\"}},[_c('v-text-field',{attrs:{\"id\":\"findInput\",\"placeholder\":\"在文档中查找...\",\"counter\":_vm.counter,\"counter-value\":(_) => this.current},model:{value:(_vm.query),callback:function ($$v) {_vm.query=$$v},expression:\"query\"}}),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.dispatch('again', true)}}},[_c('v-icon',[_vm._v(\"mdi-arrow-up\")])],1),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.dispatch('again')}}},[_c('v-icon',[_vm._v(\"mdi-arrow-down\")])],1)],1),_c('v-row',{attrs:{\"justify\":\"space-around\",\"align\":\"center\"}},[_c('v-btn-toggle',{attrs:{\"tile\":\"\",\"group\":\"\",\"multiple\":\"\"},model:{value:(_vm.toggle_multiple),callback:function ($$v) {_vm.toggle_multiple=$$v},expression:\"toggle_multiple\"}},[_c('v-btn',{attrs:{\"text\":\"\",\"small\":\"\"},on:{\"click\":function($event){return _vm.updateType('highlightallchange')}}},[_vm._v(\" 全部高亮 \")]),_c('v-btn',{attrs:{\"text\":\"\",\"small\":\"\"},on:{\"click\":function($event){return _vm.updateType('casesensitivitychange')}}},[_vm._v(\" 区分大小写 \")]),_c('v-btn',{attrs:{\"text\":\"\",\"small\":\"\"},on:{\"click\":function($event){return _vm.updateType('diacriticmatchingchange')}}},[_vm._v(\" 匹配变音符号 \")]),_c('v-btn',{attrs:{\"text\":\"\",\"small\":\"\"},on:{\"click\":function($event){return _vm.updateType('entirewordchange')}}},[_vm._v(\" 字词匹配 \")])],1)],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"appContainer\",attrs:{\"id\":\"appContainer\"},on:{\"dragover\":_vm.onDragover,\"drop\":_vm.onDrop}},[_vm._m(0),_c('input',{staticClass:\"fileInput\",attrs:{\"type\":\"file\",\"id\":\"fileInput\"}})])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"viewerContainer\",attrs:{\"id\":\"viewerContainer\"}},[_c('div',{staticClass:\"pdfViewer\",attrs:{\"id\":\"viewer\"}})])\n}]\n\nexport { render, staticRenderFns }","const EVENT = {\n  PDF: {\n    /**\n     * pdf.js 自带 event 事件\n     */\n    ZOOM_IN: \"zoomin\",\n    ZOOM_OUT: \"zoomout\",\n    FIRST_PAGE: \"firstpage\",\n    LAST_PAGE: \"lastpage\",\n    PREVIOUS_PAGE: \"previouspage\",\n    NEXT_PAGE: \"nextpage\",\n    FIND_MATCHES_COUNT: \"findmatchescount\",\n    PAGE_NUMBER_CHANGED: \"pagenumberchanged\",\n    PAGE_CHANGING: \"pagechanging\",\n    FIND: \"find\",\n    UPDATE_FIND_MATCHES_COUNT: \"updatefindmatchescount\",\n    UPDATE_FIND_CONTROL_STATE: \"updatefindcontrolstate\",\n    ROTATE_CHANGING: \"rotateChanging\",\n    SCALE_CHANGING: \"scalechanging\",\n    SCALE_CHANGED: \"scalechanged\",\n    FILE_INPUT_CHANGE: \"fileinputchange\",\n    DOCUMENT_ERROR: \"documenterror\",\n    PRESENTATION_MODE_CHANGED: \"presentationmodechanged\",\n    OUTLINE_LOADED: \"outlineloaded\",\n    ATTACHMENTS_LOADED: \"attachmentsloaded\",\n    LAYERS_LOADED: \"layersloaded\",\n    SIDEBAR_VIEW_CHANGED: \"sidebarviewchanged\",\n\n\n    /**\n     * 自定义 event 事件\n     */\n    SWITCH_SCROLL_MODE: \"switchScrollMode\",\n    SWITCH_SPREAD_MODE: \"switchSpreadMode\",\n    UPDATE_LOADING_BAR: \"updateloadingbar\",\n    SHOW_LOADING_BAR: \"showloadingbar\",\n    HIDE_LOADING_BAR: \"hideloadingbar\",\n    SET_PAGES_COUNT: \"setpagescount\",\n    SET_PAGE_NUMBER: \"setpagenumber\",\n    SET_PAGE_SCALE: \"setpagescale\",\n    DOCUMENT_LOADED: \"documentLoaded\",\n\n    SIDEBAR: {\n      TOGGLE: \"toggle\",\n      SWITCH_VIEW: \"switchView\",\n      UPDATE_THUMBNAIL_VIEWER: \"updatethumbnailviewer\",\n    },\n  },\n  OFD: {},\n  IMAGE: {},\n  COMMON: {\n    /**\n     * 自定义 event 事件\n     */\n    PASSWORD: {\n      VERIFY: \"common.password.verify\",\n      CANCEL: \"common.password.cancel\",\n      OPEN: \"common.password.open\",\n      PASSED: \"common.password.passed\",\n    },\n  },\n};\n\nexport default EVENT;\n","<template>\n  <div\n    id=\"appContainer\"\n    class=\"appContainer\"\n    @dragover=\"onDragover\"\n    @drop=\"onDrop\"\n  >\n    <div id=\"viewerContainer\" class=\"viewerContainer\">\n      <div id=\"viewer\" class=\"pdfViewer\"></div>\n    </div>\n    <input type=\"file\" id=\"fileInput\" class=\"fileInput\" />\n  </div>\n</template>\n\n<script>\nimport EVENT from \"@/constants/event.ts\";\n\nexport default {\n  props: {\n    url: {\n      type: String,\n    },\n    textLayerMode: {\n      type: Number,\n    },\n    password: {\n      type: String,\n    },\n  },\n  methods: {\n    onDragover(evt) {\n      evt.preventDefault();\n\n      evt.dataTransfer.dropEffect =\n        evt.dataTransfer.effectAllowed === \"copy\" ? \"copy\" : \"move\";\n    },\n\n    onDrop(evt) {\n      evt.preventDefault();\n\n      const { eventBus } = this.$PDFViewerApplication;\n      const { files } = evt.dataTransfer;\n\n      if (!files || files.length === 0) {\n        return;\n      }\n\n      eventBus.dispatch(EVENT.PDF.FILE_INPUT_CHANGE, {\n        source: this,\n        fileInput: evt.dataTransfer,\n      });\n    },\n  },\n\n  mounted() {\n    if (this.url) {\n      this.$PDFViewerApplication.defaultUrl = this.url;\n    }\n\n    const config = {\n      appContainer: document.getElementById(\"appContainer\"),\n      mainContainer: document.getElementById(\"viewerContainer\"),\n      viewerContainer: document.getElementById(\"viewer\"),\n      textLayerMode: this.textLayerMode,\n      password: this.password,\n    };\n\n    this.$PDFViewerApplication.run(config);\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.appContainer {\n  height: 100%;\n  width: 100%;\n  min-height: 800px;\n  position: relative;\n  background: #ededf0;\n\n  .selected .thumbnailImage {\n    border: 2px solid red !important;\n  }\n  .fileInput {\n    display: none;\n  }\n\n  .viewerContainer {\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    box-sizing: content-box;\n\n    &.grab-to-pan-grab {\n      cursor: -webkit-grab !important;\n      cursor: grab !important;\n    }\n\n    &.grab-to-pan-grab\n      *:not(input):not(textarea):not(button):not(select):not(:link) {\n      cursor: inherit !important;\n    }\n\n    &.grab-to-pan-grab:active,\n    &.grab-to-pan-grabbing {\n      cursor: -webkit-grabbing !important;\n      cursor: grabbing !important;\n      position: fixed;\n      background: rgba(0, 0, 0, 0);\n      display: block;\n      top: 56px;\n      left: 0;\n      right: 0;\n      bottom: 0;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PdfViewer.vue?vue&type=template&id=6aaecc8e&scoped=true&\"\nimport script from \"./PdfViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./PdfViewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PdfViewer.vue?vue&type=style&index=0&id=6aaecc8e&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6aaecc8e\",\n  null\n  \n)\n\nexport default component.exports","import EVENT from \"@/constants/event\";\n\n/**\n * 为简化 app.js，将所有 webViewer 方法整理到 WebViewer 类中管理\n * 例如：initialized === webViewerInitialized\n */\nclass WebViewer {\n  constructor(app) {\n    this.app = app;\n    this.eventBus = app.eventBus;\n  }\n\n  /**\n   * 放大\n   */\n  zoomIn() {\n    this.app.zoomIn();\n  }\n\n  /**\n   * 缩小\n   */\n  zoomOut() {\n    this.app.zoomOut();\n  }\n\n  /**\n   * 选择缩放比例\n   */\n  scaleChanged(pageScaleValue) {\n    this.app.pdfViewer.currentScaleValue = pageScaleValue;\n  }\n\n  /**\n   * 监听页面缩放比例变化\n   */\n  scaleChanging(evt) {\n    this.eventBus.dispatch(EVENT.PDF.SET_PAGE_SCALE, {\n      pageScaleValue: evt.presetValue,\n      pageScale: evt.scale,\n    });\n    this.app.pdfViewer.update();\n  }\n\n  /**\n   * 显示进度条\n   */\n  showLoadingBar() {\n    this.eventBus.dispatch(EVENT.PDF.SHOW_LOADING_BAR);\n  }\n\n  /**\n   * 隐藏进度条\n   */\n  hideLoadingBar() {\n    this.eventBus.dispatch(EVENT.PDF.HIDE_LOADING_BAR);\n  }\n\n  /**\n   * 更新进度条\n   */\n  updateLoadingBar(percent) {\n    this.eventBus.dispatch(EVENT.PDF.UPDATE_LOADING_BAR, percent);\n  }\n\n  /**\n   * 上一页\n   */\n  previousPage() {\n    this.app.pdfViewer.previousPage();\n  }\n\n  /**\n   * 下一页\n   */\n  nextPage() {\n    this.app.pdfViewer.nextPage();\n  }\n\n  /**\n   * 转到第一页\n   */\n  firstPage() {\n    if (this.app.pdfDocument) {\n      this.app.page = 1;\n    }\n  }\n\n  /**\n   * 转到最后一页\n   */\n  lastPage() {\n    if (this.app.pdfDocument) {\n      this.app.page = this.app.pagesCount;\n    }\n  }\n\n  /**\n   * 监听页面滚动产生的页码变化\n   */\n  pageChanging(evt) {\n    const { pageNumber } = evt;\n    this.eventBus.dispatch(EVENT.PDF.SET_PAGE_NUMBER, {\n      pageNumber: pageNumber,\n    });\n    this.app.pdfThumbnailViewer?.scrollThumbnailIntoView(pageNumber);\n  }\n\n  pageNumberChanged(pageNumber) {\n    const pdfViewer = this.app.pdfViewer;\n    // Note that for `<input type=\"number\">` HTML elements, an empty string will\n    // be returned for non-number inputs; hence we simply do nothing in that case.\n    if (pageNumber !== \"\") {\n      this.app.pdfLinkService.goToPage(pageNumber);\n    }\n\n    // Ensure that the page number input displays the correct value, even if the\n    // value entered by the user was invalid (e.g. a floating point number).\n    if (pageNumber !== pdfViewer.currentPageNumber.toString()) {\n      this.pageChanging({ pageNumber: pdfViewer.currentPageNumber });\n    }\n  }\n\n  /**\n   * 将总页数设置给 PageController 组件\n   */\n  setPagesCount(evt) {\n    this.eventBus.dispatch(EVENT.PDF.SET_PAGES_COUNT, {\n      pagesCount: evt.pagesCount,\n    });\n  }\n\n  /**\n   * 打开本地文件\n   */\n  fileInputChange(evt) {\n    const file = evt.fileInput.files[0];\n\n    let url = URL.createObjectURL(file);\n    if (file.name) {\n      url = { url, originalUrl: file.name };\n    }\n\n    this.app.open(url);\n  }\n\n  /**\n   * 初始化完成，打开文档\n   */\n  initialized() {\n    const file = this.app.defaultUrl;\n\n    if (file) {\n      try {\n        this.app.open(file);\n      } catch (reason) {\n        this.app.l10n.get(\"loading_error\").then((msg) => {\n          this.app._documentError(msg, reason);\n        });\n      }\n    }\n  }\n\n  /**\n   * 旋转文档\n   */\n  rotatePage(delta) {\n    if (this.app.pdfDocument) {\n      this.app.pdfViewer.pagesRotation += delta;\n    }\n  }\n\n  /**\n   * 文档展示模式\n   */\n  switchSpreadMode(mode) {\n    if (this.app.pdfDocument) {\n      this.app.pdfViewer.spreadMode = mode;\n    }\n  }\n\n  /**\n   * 文档滚动模式\n   */\n  switchScrollMode(mode) {\n    if (this.app.pdfDocument) {\n      this.app.pdfViewer.scrollMode = mode;\n    }\n  }\n\n  /**\n   * 查询结果\n   */\n  updateFindMatchesCount({ matchesCount }) {\n    this.eventBus.dispatch(EVENT.PDF.FIND_MATCHES_COUNT, matchesCount);\n  }\n\n  /**\n   * 文档加载成功回调\n   */\n  documentLoaded() {\n    this.eventBus.dispatch(EVENT.PDF.DOCUMENT_LOADED);\n  }\n}\n\nexport default WebViewer;\n","import {\n  SpreadMode,\n  ScrollMode,\n  CursorTool,\n  SidebarView,\n  DEFAULT_SCALE_VALUE,\n  TextLayerMode,\n  FindState,\n} from \"@cloud-reader/pdf.js-dist/legacy/web/pdf_viewer\";\nimport { PasswordResponses } from \"@cloud-reader/pdf.js-dist/legacy/build/pdf\";\nconst SEARCH_MAP = {\n  0: \"highlightAll\",\n  1: \"caseSensitive\",\n  2: \"matchDiacritics\",\n  3: \"entireWord\",\n};\n\nconst SIDEBAR_VIEW_MAP = [\"预览\", \"大纲\", \"附件\"];\n\nexport {\n  SpreadMode as SPREAD_MODE,\n  ScrollMode as SCROLL_MODE,\n  CursorTool as CURSOR_TOOL,\n  DEFAULT_SCALE_VALUE,\n  SEARCH_MAP,\n  PasswordResponses as PASSWORD_RESPONSES,\n  SidebarView as SIDEBAR_VIEW,\n  SIDEBAR_VIEW_MAP,\n  TextLayerMode as TEXT_LAYER_MODE,\n  FindState as FIND_STATE,\n};\n","import EVENT from \"@/constants/event\";\nimport { PASSWORD_RESPONSES } from \"./constants\";\nconst {\n  COMMON: { PASSWORD },\n} = EVENT;\n\nclass PasswordPrompt {\n  updateCallback = null;\n  reason = null;\n\n  constructor({ eventBus, l10n }) {\n    this.l10n = l10n;\n    this.eventBus = eventBus;\n    this.verify = this.verify.bind(this);\n    this.cancel = this.cancel.bind(this);\n    this.invokeCallback = this.invokeCallback.bind(this);\n\n    this.eventBus.on(PASSWORD.VERIFY, this.verify);\n    this.eventBus.on(PASSWORD.CANCEL, this.cancel);\n  }\n\n  async open() {\n    const passwordIncorrect =\n      this.reason === PASSWORD_RESPONSES.INCORRECT_PASSWORD;\n\n    const message = await this.l10n.get(\n      `password_${passwordIncorrect ? \"invalid\" : \"label\"}`\n    );\n\n    this.eventBus.dispatch(PASSWORD.OPEN, {\n      label: message,\n    });\n  }\n\n  verify({ password, isCancel = false }) {\n    if (password.length) {\n      this.invokeCallback(password);\n      this.isCancel = isCancel;\n    }\n  }\n\n  cancel() {\n    this.invokeCallback(new Error(\"PasswordPrompt cancelled.\"));\n  }\n\n  invokeCallback(password) {\n    if (!this.updateCallback) {\n      return; // Ensure that the callback is only invoked once.\n    }\n    this.updateCallback(password);\n    this.updateCallback = null;\n    this.eventBus.dispatch(PASSWORD.PASSED);\n  }\n\n  setUpdateCallback(updateCallback, reason) {\n    this.updateCallback = updateCallback;\n    this.reason = reason;\n\n    this.isCancel && this.cancel();\n  }\n}\n\nexport default PasswordPrompt;\n","import {\n  RenderingStates,\n  SidebarView,\n} from \"@cloud-reader/pdf.js-dist/legacy/web/pdf_viewer\";\nimport EVENT from \"@/constants/event\";\n\nclass PDFSidebar {\n  constructor({ pdfViewer, pdfThumbnailViewer, eventBus, l10n }) {\n    this.isOpen = false;\n    this.active = SidebarView.THUMBS;\n    this.isInitialViewSet = false;\n    this.isInitialEventDispatched = false;\n\n    this.onToggled = null;\n\n    this.pdfViewer = pdfViewer;\n    this.pdfThumbnailViewer = pdfThumbnailViewer;\n\n    this.eventBus = eventBus;\n    this.l10n = l10n;\n\n    this.addEventListeners();\n  }\n\n  reset() {\n    this.isInitialViewSet = false;\n    this.isInitialEventDispatched = false;\n\n    this.switchView(SidebarView.THUMBS);\n  }\n\n  /**\n   * @type {number} One of the values in {SidebarView}.\n   */\n  get visibleView() {\n    return this.isOpen ? this.active : SidebarView.NONE;\n  }\n\n  /**\n   * @param {number} view - The sidebar view that should become visible,\n   *                        must be one of the values in {SidebarView}.\n   */\n  setInitialView(view = SidebarView.NONE) {\n    if (this.isInitialViewSet) {\n      return;\n    }\n    this.isInitialViewSet = true;\n\n    // If the user has already manually opened the sidebar, immediately closing\n    // it would be bad UX; also ignore the \"unknown\" sidebar view value.\n    if (view === SidebarView.NONE || view === SidebarView.UNKNOWN) {\n      this.dispatchEvent();\n      return;\n    }\n    this.switchView(view, /* forceOpen = */ true);\n\n    // Prevent dispatching two back-to-back \"sidebarviewchanged\" events,\n    // since `this.switchView` dispatched the event if the view changed.\n    if (!this.isInitialEventDispatched) {\n      this.dispatchEvent();\n    }\n  }\n\n  /**\n   * @param {number} view - The sidebar view that should be switched to,\n   *                        must be one of the values in {SidebarView}.\n   * @param {boolean} [forceOpen] - Ensure that the sidebar is open.\n   *                                The default value is `false`.\n   */\n  switchView(view, forceOpen = false) {\n    const isViewChanged = view !== this.active;\n    let shouldForceRendering = false;\n\n    switch (view) {\n      case SidebarView.NONE:\n        if (this.isOpen) {\n          this.close();\n        }\n        return; // Closing will trigger rendering and dispatch the event.\n      case SidebarView.THUMBS:\n        if (this.isOpen && isViewChanged) {\n          shouldForceRendering = true;\n        }\n        break;\n      case SidebarView.OUTLINE:\n        if (this.outlineButton.disabled) {\n          return;\n        }\n        break;\n      case SidebarView.ATTACHMENTS:\n        if (this.attachmentsButton.disabled) {\n          return;\n        }\n        break;\n      case SidebarView.LAYERS:\n        if (this.layersButton.disabled) {\n          return;\n        }\n        break;\n      default:\n        console.error(`PDFSidebar.switchView: \"${view}\" is not a valid view.`);\n        return;\n    }\n    // Update the active view *after* it has been validated above,\n    // in order to prevent setting it to an invalid state.\n    this.active = view;\n\n    if (forceOpen && !this.isOpen) {\n      this.open();\n      return; // Opening will trigger rendering and dispatch the event.\n    }\n\n    if (shouldForceRendering) {\n      this.updateThumbnailViewer();\n      this.forceRendering();\n    }\n    if (isViewChanged) {\n      this.dispatchEvent();\n    }\n  }\n\n  open() {\n    if (this.isOpen) {\n      return;\n    }\n    this.isOpen = true;\n\n    if (this.active === SidebarView.THUMBS) {\n      this.updateThumbnailViewer();\n    }\n    this.forceRendering();\n    this.dispatchEvent();\n  }\n\n  close() {\n    if (!this.isOpen) {\n      return;\n    }\n    this.isOpen = false;\n\n    this.forceRendering();\n    this.dispatchEvent();\n  }\n\n  toggle() {\n    if (this.isOpen) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  dispatchEvent() {\n    if (this.isInitialViewSet && !this.isInitialEventDispatched) {\n      this.isInitialEventDispatched = true;\n    }\n\n    this.eventBus.dispatch(EVENT.PDF.SIDEBAR_VIEW_CHANGED, {\n      source: this,\n      view: this.visibleView,\n    });\n  }\n\n  forceRendering() {\n    if (this.onToggled) {\n      this.onToggled();\n    } else {\n      // Fallback\n      this.pdfViewer.forceRendering();\n      this.pdfThumbnailViewer.forceRendering();\n    }\n  }\n\n  updateThumbnailViewer() {\n    const { pdfViewer, pdfThumbnailViewer } = this;\n\n    // Use the rendered pages to set the corresponding thumbnail images.\n    const pagesCount = pdfViewer.pagesCount;\n    for (let pageIndex = 0; pageIndex < pagesCount; pageIndex++) {\n      const pageView = pdfViewer.getPageView(pageIndex);\n      if (pageView?.renderingState === RenderingStates.FINISHED) {\n        const thumbnailView = pdfThumbnailViewer.getThumbnail(pageIndex);\n        thumbnailView.setImage(pageView);\n      }\n    }\n    pdfThumbnailViewer.scrollThumbnailIntoView(pdfViewer.currentPageNumber);\n  }\n\n  addEventListeners() {\n    this.eventBus.on(EVENT.PDF.SIDEBAR.TOGGLE, () => {\n      this.toggle();\n    });\n\n    this.eventBus.on(EVENT.PDF.SIDEBAR.UPDATE_THUMBNAIL_VIEWER, () => {\n      this.updateThumbnailViewer();\n    });\n  }\n}\n\nexport default PDFSidebar;\n","import {\n  createPromiseCapability,\n  getDocument,\n  GlobalWorkerOptions,\n  InvalidPDFException,\n  MissingPDFException,\n  UnexpectedResponseException,\n  version,\n  build,\n} from \"@cloud-reader/pdf.js-dist/legacy/build/pdf\";\nimport {\n  EventBus,\n  PDFLinkService,\n  PDFFindController,\n  NullL10n,\n  PDFViewer,\n  PDFHistory,\n  PDFCursorTools,\n  CursorTool,\n  DEFAULT_SCALE_VALUE,\n  SidebarView,\n  PDFThumbnailViewer,\n  PDFOutlineViewer,\n  PDFAttachmentViewer,\n  DownloadManager,\n  PDFRenderingQueue,\n} from \"@cloud-reader/pdf.js-dist/legacy/web/pdf_viewer\";\nimport pdfjsWorker from \"@cloud-reader/pdf.js-dist/legacy/build/pdf.worker\";\nimport \"@cloud-reader/pdf.js-dist/legacy/web/pdf_viewer.css\";\nimport WebViewer from \"./WebViewer\";\nimport PasswordPrompt from \"./PasswordPrompt.js\";\nimport PDFSidebar from \"./PdfSidebar.js\";\nimport EVENT from \"@/constants/event\";\n\nconst DISABLE_AUTO_FETCH_LOADING_BAR_TIMEOUT = 5000; // ms\nconst ViewOnLoad = {\n  UNKNOWN: -1,\n  PREVIOUS: 0, // Default value.\n  INITIAL: 1,\n};\n\nif (typeof window !== \"undefined\" && \"Worker\" in window) {\n  GlobalWorkerOptions.workerPort = new pdfjsWorker();\n}\n\nconst PDFViewerApplication = {\n  _initializedCapability: createPromiseCapability(),\n  appConfig: null,\n  pdfDocument: null,\n  pdfLoadingTask: null,\n  pdfViewer: null,\n  pdfHistory: null,\n  pdfCursorTools: null,\n  eventBus: new EventBus(),\n  isViewerEmbedded: window.parent !== window,\n  l10n: NullL10n,\n  downloadComplete: false,\n  defaultUrl: \"\",\n  pdfThumbnailViewer: null,\n  pdfSidebar: null,\n  pdfOutlineViewer: null,\n  pdfAttachmentViewer: null,\n\n  // Called once when the document is loaded.\n  async initialize(appConfig) {\n    this.appConfig = appConfig;\n\n    this._initializeViewerComponents();\n\n    // Bind the various event handlers *after* the viewer has been\n    // initialized, to prevent errors if an event arrives too soon.\n    this.bindEvents();\n\n    this._initializedCapability.resolve();\n  },\n\n  /**\n   * @private\n   */\n  _initializeViewerComponents() {\n    const { appConfig } = this;\n\n    const pdfRenderingQueue = new PDFRenderingQueue();\n    pdfRenderingQueue.onIdle = this._cleanup.bind(this);\n    this.pdfRenderingQueue = pdfRenderingQueue;\n\n    const linkService = new PDFLinkService({\n      eventBus: this.eventBus,\n    });\n    this.pdfLinkService = linkService;\n\n    const findController = new PDFFindController({\n      linkService,\n      eventBus: this.eventBus,\n    });\n    this.findController = findController;\n\n    this.passwordPrompt = new PasswordPrompt({\n      eventBus: this.eventBus,\n      l10n: this.l10n,\n    });\n\n    const container = appConfig.mainContainer,\n      viewer = appConfig.viewerContainer;\n\n    const pdfViewer = new PDFViewer({\n      container,\n      viewer,\n      findController,\n      eventBus: this.eventBus,\n      linkService,\n      l10n: this.l10n,\n      textLayerMode: appConfig.textLayerMode,\n    });\n\n    this.pdfViewer = pdfViewer;\n    pdfRenderingQueue.setViewer(pdfViewer);\n    linkService.setViewer(pdfViewer);\n\n    const { thumbnailView, outlineView, attachmentsView } = appConfig;\n    if (thumbnailView) {\n      this.pdfThumbnailViewer = new PDFThumbnailViewer({\n        container: thumbnailView,\n        eventBus: this.eventBus,\n        renderingQueue: pdfRenderingQueue,\n        linkService,\n        l10n: this.l10n,\n      });\n      pdfRenderingQueue.setThumbnailViewer(this.pdfThumbnailViewer);\n    }\n\n    this.pdfHistory = new PDFHistory({\n      eventBus: this.eventBus,\n      linkService,\n    });\n    linkService.setHistory(this.pdfHistory);\n\n    const needSideBar = thumbnailView && outlineView && attachmentsView;\n    if (needSideBar) {\n      this.pdfSidebar = new PDFSidebar({\n        pdfViewer: this.pdfViewer,\n        pdfThumbnailViewer: this.pdfThumbnailViewer,\n        eventBus: this.eventBus,\n        l10n: this.l10n,\n      });\n\n      this.pdfSidebar.onToggled = this.forceRendering.bind(this);\n    }\n\n    if (outlineView) {\n      this.pdfOutlineViewer = new PDFOutlineViewer({\n        container: outlineView,\n        eventBus: this.eventBus,\n        linkService,\n      });\n    }\n\n    const downloadManager = new DownloadManager();\n    if (attachmentsView) {\n      this.pdfAttachmentViewer = new PDFAttachmentViewer({\n        container: attachmentsView,\n        eventBus: this.eventBus,\n        downloadManager,\n      });\n    }\n\n    this.pdfCursorTools = new PDFCursorTools({\n      container,\n      eventBus: this.eventBus,\n      cursorToolOnLoad: CursorTool.SELECT,\n    });\n  },\n\n  /**\n   * @private\n   */\n  _cleanup() {\n    if (!this.pdfDocument) {\n      return; // run cleanup when document is loaded\n    }\n    this.pdfViewer.cleanup();\n    this.pdfThumbnailViewer.cleanup();\n  },\n\n  run(config) {\n    this.initialize(config).then(() => webViewer.initialized());\n  },\n\n  get initialized() {\n    return this._initializedCapability.settled;\n  },\n\n  get initializedPromise() {\n    return this._initializedCapability.promise;\n  },\n\n  /**\n   * 获取文档总页数\n   */\n  get pagesCount() {\n    return this.pdfDocument ? this.pdfDocument.numPages : 0;\n  },\n\n  /**\n   * 放大\n   */\n  zoomIn() {\n    if (this.pdfViewer.isInPresentationMode) {\n      return;\n    }\n    this.pdfViewer.increaseScale();\n  },\n\n  /**\n   * 缩小\n   */\n  zoomOut() {\n    if (this.pdfViewer.isInPresentationMode) {\n      return;\n    }\n    this.pdfViewer.decreaseScale();\n  },\n\n  /**\n   * 获取当前页码\n   */\n  get page() {\n    return this.pdfViewer.currentPageNumber;\n  },\n\n  /**\n   * 设置并跳转到指定页码\n   */\n  set page(pageNumber) {\n    this.pdfViewer.currentPageNumber = pageNumber;\n  },\n\n  /**\n   * 关闭已打开的 PDF 文档\n   * Closes opened PDF document.\n   * @returns {Promise} - Returns the promise, which is resolved when all\n   *                      destruction is completed.\n   */\n  async close() {\n    if (!this.pdfLoadingTask) {\n      return;\n    }\n\n    const promises = [];\n\n    promises.push(this.pdfLoadingTask.destroy());\n    this.pdfLoadingTask = null;\n\n    if (this.pdfDocument) {\n      this.pdfDocument = null;\n\n      this.pdfThumbnailViewer?.setDocument(null);\n      this.pdfViewer.setDocument(null);\n      this.pdfLinkService.setDocument(null);\n    }\n\n    this.pdfHistory?.reset();\n    this.pdfSidebar?.reset();\n    this.pdfOutlineViewer?.reset();\n    this.pdfAttachmentViewer?.reset();\n\n    await Promise.all(promises);\n  },\n\n  /**\n   * 通过 URL 或 ArrayBuffer 打开 PDF 文档\n   * Opens PDF document specified by URL or array with additional arguments.\n   * @param {string|TypedArray|ArrayBuffer} file - PDF location or binary data.\n   * @param {Object} [args] - Additional arguments for the getDocument call,\n   *                          e.g. HTTP headers ('httpHeaders') or alternative\n   *                          data transport ('range').\n   * @returns {Promise} - Returns the promise, which is resolved when document\n   *                      is opened.\n   */\n  async open(file, args) {\n    if (this.pdfLoadingTask) {\n      // We need to destroy already opened document.\n      await this.close();\n    }\n\n    const parameters = Object.create(null);\n    if (typeof file === \"string\") {\n      // URL\n      parameters.url = file;\n    } else if (file && \"byteLength\" in file) {\n      // ArrayBuffer\n      parameters.data = file;\n    } else if (file.url && file.originalUrl) {\n      parameters.url = file.url;\n    }\n\n    // Finally, update the API parameters with the arguments (if they exist).\n    if (args) {\n      for (const key in args) {\n        parameters[key] = args[key];\n      }\n    }\n\n    const loadingTask = getDocument({\n      ...parameters,\n      cMapUrl: \"./cmaps/\",\n      cMapPacked: true,\n      standardFontDataUrl: \"./standard_fonts/\",\n    });\n    this.pdfLoadingTask = loadingTask;\n\n    const { password } = this.appConfig;\n\n    loadingTask.onPassword = (updateCallback, reason) => {\n      this.pdfLinkService.externalLinkEnabled = false;\n      this.passwordPrompt.setUpdateCallback(updateCallback, reason);\n\n      password\n        ? this.passwordPrompt.verify({ password, isCancel: true })\n        : this.passwordPrompt.open();\n\n    };\n\n    loadingTask.onProgress = ({ loaded, total }) => {\n      this.progress(loaded / total);\n    };\n\n    return loadingTask.promise.then(\n      (pdfDocument) => {\n        this.load(pdfDocument);\n      },\n      (reason) => {\n        if (loadingTask !== this.pdfLoadingTask) {\n          return undefined; // Ignore errors for previously opened PDF files.\n        }\n\n        let key = \"loading_error\";\n        if (reason instanceof InvalidPDFException) {\n          key = \"invalid_file_error\";\n        } else if (reason instanceof MissingPDFException) {\n          key = \"missing_file_error\";\n        } else if (reason instanceof UnexpectedResponseException) {\n          key = \"unexpected_response_error\";\n        }\n        return this.l10n.get(key).then((msg) => {\n          this._documentError(msg, { message: reason?.message });\n          throw reason;\n        });\n      }\n    );\n  },\n\n  /**\n   * Show the error box; used for errors affecting loading and/or parsing of\n   * the entire PDF document.\n   */\n  _documentError(message, moreInfo = null) {\n    this._otherError(message, moreInfo);\n\n    this.eventBus.dispatch(EVENT.PDF.DOCUMENT_ERROR, {\n      source: this,\n      message,\n      reason: moreInfo?.message ?? null,\n    });\n  },\n\n  /**\n   * Show the error box; used for errors affecting e.g. only a single page.\n   *\n   * @param {string} message - A message that is human readable.\n   * @param {Object} [moreInfo] - Further information about the error that is\n   *                              more technical.  Should have a 'message' and\n   *                              optionally a 'stack' property.\n   */\n  _otherError(message, moreInfo = null) {\n    const moreInfoText = [\n      this.l10n.get(\"error_version_info\", {\n        version: version || \"?\",\n        build: build || \"?\",\n      }),\n    ];\n    if (moreInfo) {\n      moreInfoText.push(\n        this.l10n.get(\"error_message\", { message: moreInfo.message })\n      );\n      if (moreInfo.stack) {\n        moreInfoText.push(\n          this.l10n.get(\"error_stack\", { stack: moreInfo.stack })\n        );\n      } else {\n        if (moreInfo.filename) {\n          moreInfoText.push(\n            this.l10n.get(\"error_file\", { file: moreInfo.filename })\n          );\n        }\n        if (moreInfo.lineNumber) {\n          moreInfoText.push(\n            this.l10n.get(\"error_line\", { line: moreInfo.lineNumber })\n          );\n        }\n      }\n    }\n\n    Promise.all(moreInfoText).then((parts) => {\n      console.error(message + \"\\n\" + parts.join(\"\\n\"));\n    });\n  },\n\n  progress(level) {\n    if (this.downloadComplete) {\n      // Don't accidentally show the loading bar again when the entire file has\n      // already been fetched (only an issue when disableAutoFetch is enabled).\n      return;\n    }\n    const percent = Math.round(level * 100);\n\n    webViewer.updateLoadingBar(percent);\n\n    if (this.disableAutoFetchLoadingBarTimeout) {\n      clearTimeout(this.disableAutoFetchLoadingBarTimeout);\n      this.disableAutoFetchLoadingBarTimeout = null;\n    }\n    webViewer.showLoadingBar();\n\n    this.disableAutoFetchLoadingBarTimeout = setTimeout(() => {\n      webViewer.hideLoadingBar();\n      this.disableAutoFetchLoadingBarTimeout = null;\n    }, DISABLE_AUTO_FETCH_LOADING_BAR_TIMEOUT);\n  },\n\n  load(pdfDocument) {\n    this.pdfDocument = pdfDocument;\n\n    pdfDocument.getDownloadInfo().then(({ length }) => {\n      this._contentLength = length; // Ensure that the correct length is used.\n      this.downloadComplete = true;\n      webViewer.hideLoadingBar();\n    });\n\n    const openActionPromise = pdfDocument.getOpenAction().catch(function () {\n      /* Avoid breaking initial rendering; ignoring errors. */\n    });\n\n    webViewer.setPagesCount({ pagesCount: pdfDocument.numPages });\n\n    this.pdfLinkService.setDocument(pdfDocument);\n\n    const pdfViewer = this.pdfViewer;\n    pdfViewer.setDocument(pdfDocument);\n\n    const pdfThumbnailViewer = this.pdfThumbnailViewer;\n    pdfThumbnailViewer?.setDocument(pdfDocument);\n\n    const { firstPagePromise, onePageRendered, pagesPromise } = pdfViewer;\n\n    firstPagePromise.then(() => {\n      Promise.all([openActionPromise])\n        .then(async ([openAction]) => {\n          this._initializePdfHistory({\n            fingerprint: pdfDocument.fingerprints[0],\n            viewOnLoad: 0,\n            initialDest: openAction?.dest,\n          });\n\n          this.setInitialView();\n        })\n        .catch(() => {\n          this.setInitialView();\n        })\n\n    });\n\n    onePageRendered.then(() => {\n      pdfDocument.getOutline().then((outline) => {\n        if (pdfDocument !== this.pdfDocument) {\n          return; // The document was closed while the outline resolved.\n        }\n        this.pdfOutlineViewer?.render({ outline, pdfDocument });\n      });\n      pdfDocument.getAttachments().then((attachments) => {\n        if (pdfDocument !== this.pdfDocument) {\n          return; // The document was closed while the attachments resolved.\n        }\n        this.pdfAttachmentViewer?.render({ attachments });\n      });\n    });\n\n    pagesPromise.then(() => {\n      webViewer.documentLoaded();\n    });\n\n    this.pdfHistory.initialize({\n      fingerprint: pdfDocument.fingerprints[0],\n    });\n  },\n\n  /**\n   * @private\n   */\n  _initializePdfHistory({ fingerprint, viewOnLoad, initialDest = null }) {\n    if (!this.pdfHistory) {\n      return;\n    }\n    this.pdfHistory.initialize({\n      fingerprint,\n      resetHistory: viewOnLoad === ViewOnLoad.INITIAL,\n      updateUrl: false,\n    });\n\n    if (this.pdfHistory.initialBookmark) {\n      this.initialBookmark = this.pdfHistory.initialBookmark;\n\n      this.initialRotation = this.pdfHistory.initialRotation;\n    }\n\n    // Always let the browser history/document hash take precedence.\n    if (\n      initialDest &&\n      !this.initialBookmark &&\n      viewOnLoad === ViewOnLoad.UNKNOWN\n    ) {\n      this.initialBookmark = JSON.stringify(initialDest);\n      // TODO: Re-factor the `PDFHistory` initialization to remove this hack\n      // that's currently necessary to prevent weird initial history state.\n      this.pdfHistory.push({ explicitDest: initialDest, pageNumber: null });\n    }\n  },\n\n  setInitialView() {\n    if (!this.pdfViewer.currentScaleValue) {\n      // Scale was not initialized: invalid bookmark or scale was not specified.\n      // Setting the default one.\n      this.pdfViewer.currentScaleValue = DEFAULT_SCALE_VALUE;\n    }\n  },\n\n  forceRendering() {\n    this.pdfRenderingQueue.printing = false;\n    this.pdfRenderingQueue.isThumbnailViewEnabled =\n      this.pdfSidebar.visibleView === SidebarView.THUMBS;\n\n    this.pdfRenderingQueue.renderHighestPriority();\n  },\n\n  bindEvents() {\n    const { eventBus } = this;\n    const {\n      FIRST_PAGE,\n      LAST_PAGE,\n      NEXT_PAGE,\n      ZOOM_IN,\n      PREVIOUS_PAGE,\n      ZOOM_OUT,\n      PAGE_NUMBER_CHANGED,\n      PAGE_CHANGING,\n      SCALE_CHANGED,\n      SCALE_CHANGING,\n      ROTATE_CHANGING,\n      SWITCH_SCROLL_MODE,\n      SWITCH_SPREAD_MODE,\n      FILE_INPUT_CHANGE,\n      UPDATE_FIND_MATCHES_COUNT,\n    } = EVENT.PDF;\n\n    eventBus._on(FIRST_PAGE, (e) => webViewer.firstPage(e));\n    eventBus._on(LAST_PAGE, (e) => webViewer.lastPage(e));\n    eventBus._on(NEXT_PAGE, (e) => webViewer.nextPage(e));\n    eventBus._on(PREVIOUS_PAGE, (e) => webViewer.previousPage(e));\n    eventBus._on(ZOOM_IN, (e) => webViewer.zoomIn(e));\n    eventBus._on(ZOOM_OUT, (e) => webViewer.zoomOut(e));\n    eventBus._on(PAGE_NUMBER_CHANGED, (e) => webViewer.pageNumberChanged(e));\n    eventBus._on(SCALE_CHANGED, (e) => webViewer.scaleChanged(e));\n    eventBus._on(PAGE_CHANGING, (e) => webViewer.pageChanging(e));\n    eventBus._on(SCALE_CHANGING, (e) => webViewer.scaleChanging(e));\n    eventBus._on(ROTATE_CHANGING, (e) => webViewer.rotatePage(e));\n    eventBus._on(SWITCH_SCROLL_MODE, (e) => webViewer.switchScrollMode(e));\n    eventBus._on(SWITCH_SPREAD_MODE, (e) => webViewer.switchSpreadMode(e));\n    eventBus._on(FILE_INPUT_CHANGE, (e) => webViewer.fileInputChange(e));\n    eventBus._on(UPDATE_FIND_MATCHES_COUNT, (e) =>\n      webViewer.updateFindMatchesCount(e)\n    );\n  },\n};\n\nconst webViewer = new WebViewer(PDFViewerApplication);\n\nexport default PDFViewerApplication;\n","import PdfViewer from \"./PdfViewer.vue\";\nimport PDFViewerApplication from \"./app\";\nimport EVENT from \"@/constants/event\";\n\nimport {\n  SPREAD_MODE,\n  CURSOR_TOOL,\n  SEARCH_MAP,\n  SCROLL_MODE,\n  DEFAULT_SCALE_VALUE,\n  TEXT_LAYER_MODE,\n  FIND_STATE,\n} from \"./constants\";\n\nPdfViewer.install = (Vue) => {\n  Vue.component(\"PdfViewer\", PdfViewer);\n  Vue.prototype.$PDFViewerApplication = PDFViewerApplication;\n};\n\nconst { PDF } = EVENT;\n\nexport {\n  PDF,\n  SPREAD_MODE,\n  CURSOR_TOOL,\n  SEARCH_MAP,\n  SCROLL_MODE,\n  DEFAULT_SCALE_VALUE,\n  TEXT_LAYER_MODE,\n  FIND_STATE,\n};\nexport default PdfViewer;\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',[_vm._v(\"OFDViewer\")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>OFDViewer</div>\n</template>\n\n<script>\nimport Vue from \"vue\";\n\nexport default Vue.extend({});\n</script>\n\n<style scoped></style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OfdViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OfdViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OfdViewer.vue?vue&type=template&id=486e649e&scoped=true&\"\nimport script from \"./OfdViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./OfdViewer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"486e649e\",\n  null\n  \n)\n\nexport default component.exports","import OfdViewer from \"./OfdViewer.vue\";\n\nOfdViewer.install = (Vue) => {\n  Vue.component(\"OfdViewer\", OfdViewer);\n};\n\nexport default OfdViewer;\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',[_vm._v(\"ImageViewer\")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>ImageViewer</div>\n</template>\n\n<script>\nimport Vue from \"vue\";\n\nexport default Vue.extend({});\n</script>\n\n<style scoped></style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ImageViewer.vue?vue&type=template&id=bdf8a9b0&scoped=true&\"\nimport script from \"./ImageViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./ImageViewer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bdf8a9b0\",\n  null\n  \n)\n\nexport default component.exports","import ImageViewer from \"./ImageViewer.vue\";\n\nImageViewer.install = (Vue) => {\n  Vue.component(\"ImageViewer\", ImageViewer);\n};\n\nexport default ImageViewer;\n","import PdfViewer, {\n  SPREAD_MODE,\n  CURSOR_TOOL,\n  SEARCH_MAP,\n  SCROLL_MODE,\n  DEFAULT_SCALE_VALUE,\n  TEXT_LAYER_MODE,\n  FIND_STATE,\n} from \"./PdfViewer\";\nimport OfdViewer from \"./OfdViewer\";\nimport ImageViewer from \"./ImageViewer\";\nimport EVENT from \"@/constants/event\";\n\nconst components = [PdfViewer, OfdViewer, ImageViewer];\n\nconst install = (Vue) => {\n  components.forEach((component) => {\n    Vue.use(component);\n  });\n};\n\nexport {\n  EVENT,\n  SPREAD_MODE,\n  CURSOR_TOOL,\n  SEARCH_MAP,\n  SCROLL_MODE,\n  DEFAULT_SCALE_VALUE,\n  TEXT_LAYER_MODE,\n  FIND_STATE,\n};\nexport default {\n  install,\n};\n","<template>\n  <v-menu\n    offset-y\n    :close-on-click=\"false\"\n    :close-on-content-click=\"false\"\n    allow-overflow\n  >\n    <template v-slot:activator=\"{ on, attrs }\">\n      <v-btn id=\"viewFind\" icon v-bind=\"attrs\" v-on=\"on\">\n        <v-icon>mdi-magnify</v-icon>\n      </v-btn>\n    </template>\n    <v-card>\n      <v-container>\n        <v-row\n          justify=\"space-around\"\n          align=\"center\"\n          class=\"findbarInputContainer\"\n          id=\"findbarInputContainer\"\n        >\n          <v-text-field\n            id=\"findInput\"\n            placeholder=\"在文档中查找...\"\n            v-model=\"query\"\n            :counter=\"counter\"\n            :counter-value=\"(_) => this.current\"\n          />\n          <v-btn icon @click=\"dispatch('again', true)\">\n            <v-icon>mdi-arrow-up</v-icon>\n          </v-btn>\n          <v-btn icon @click=\"dispatch('again')\">\n            <v-icon>mdi-arrow-down</v-icon>\n          </v-btn>\n        </v-row>\n        <v-row justify=\"space-around\" align=\"center\">\n          <v-btn-toggle v-model=\"toggle_multiple\" tile group multiple>\n            <v-btn text small @click=\"updateType('highlightallchange')\">\n              全部高亮\n            </v-btn>\n            <v-btn text small @click=\"updateType('casesensitivitychange')\">\n              区分大小写\n            </v-btn>\n            <v-btn text small @click=\"updateType('diacriticmatchingchange')\">\n              匹配变音符号\n            </v-btn>\n            <v-btn text small @click=\"updateType('entirewordchange')\">\n              字词匹配\n            </v-btn>\n          </v-btn-toggle>\n        </v-row>\n      </v-container>\n    </v-card>\n  </v-menu>\n</template>\n\n<script type=\"ts\">\nimport Vue from \"vue\";\nimport { EVENT, SEARCH_MAP, FIND_STATE } from \"@/components/doc\";\n\nexport default Vue.extend({\n  name: \"PdfFindBar\",\n\n  data: () => ({\n    toggle_multiple: [],\n    query: \"\",\n    type: \"find\",\n    current: 0,\n    total: 0,\n  }),\n\n  computed: {\n    counter() {\n      return this.total ? this.total : false;\n    },\n  },\n\n  watch: {\n    toggle_multiple() {\n      this.dispatch(this.type);\n    },\n    query(val) {\n      this.dispatch(\"\");\n      if (val == \"\") {\n        this.current = 0;\n        this.total = 0;\n      }\n    },\n  },\n\n  methods: {\n    dispatch(type, findPrevious = false) {\n      const { query } = this;\n      const { entireWord, highlightAll, caseSensitive, matchDiacritics } =\n        this.getSearchParams();\n\n        console.log('11',{\n        source: this,\n        type, //\n        query, // 查找内容\n        phraseSearch: true, // 短句查询  一直为true\n        entireWord,  // 字词匹配\n        highlightAll, //  全部高亮\n        findPrevious, //  是否查找上一项\n        caseSensitive, //  区分大小写\n        matchDiacritics, // 匹配变音符号\n      })\n      this.$PDFViewerApplication.eventBus.dispatch(\"find\", {\n        source: this,\n        type, // 行为模式 findBar的行为都是内部记录的 基于上次的行为进行下一次\n        query, // 查找内容\n        phraseSearch: true, // 短句查询  一直为true\n        entireWord,  // 字词匹配\n        highlightAll, //  全部高亮\n        findPrevious, //  是否查找上一项\n        caseSensitive, //  区分大小写\n        matchDiacritics, // 匹配变音符号\n      });\n    },\n\n    getSearchParams() {\n      let params = {\n        entireWord: false,\n        highlightAll: false,\n        caseSensitive: false,\n        matchDiacritics: false,\n      };\n\n      Object.keys(SEARCH_MAP).map((i) => {\n        const index = Number(i);\n        if (this.toggle_multiple.includes(index)) {\n          const key = SEARCH_MAP[i];\n          params[key] = true;\n        }\n      });\n\n      return params;\n    },\n\n    updateType(type) {\n      this.type = type;\n    },\n  },\n\n  mounted() {\n    const { eventBus } = this.$PDFViewerApplication;\n    eventBus.on(EVENT.PDF.FIND_MATCHES_COUNT, ({ current, total }) => {\n      this.current = current;\n      this.total = total;\n    });\n\n    eventBus.on(EVENT.PDF.UPDATE_FIND_CONTROL_STATE, ({ state }) => {\n      if (state == 1) { // FIND_STATE.NOT_FOUND\n        this.result = `找不到指定词语`;\n      }\n    });\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.findbarInputContainer {\n  padding: 0 12px;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfFindBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfFindBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PdfFindBar.vue?vue&type=template&id=c787962a&scoped=true&\"\nimport script from \"./PdfFindBar.vue?vue&type=script&lang=js&\"\nexport * from \"./PdfFindBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PdfFindBar.vue?vue&type=style&index=0&id=c787962a&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c787962a\",\n  null\n  \n)\n\nexport default component.exports","import PdfFindBar from \"./PdfFindBar.vue\";\n\nPdfFindBar.install = function (Vue) {\n  Vue.component(PdfFindBar.name, PdfFindBar);\n};\n\nexport default PdfFindBar;\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',[_c('v-toolbar',{attrs:{\"light\":\"\",\"dense\":\"\"}},[_c('v-toolbar-title',[_vm._v(_vm._s(_vm.action))])],1),_c('v-divider'),_c('v-tabs',{attrs:{\"vertical\":\"\",\"active-class\":\"active-btn\"},on:{\"change\":_vm.switchView}},[_c('v-tooltip',{attrs:{\"right\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ attrs }){return [_c('v-tab',{staticClass:\"min-tabs\",attrs:{\"id\":\"viewThumbnail\"}},[_c('v-icon',_vm._b({on:{\"click\":function($event){return _vm.switchView(_vm.SIDEBAR_VIEW.THUMBS)}}},'v-icon',attrs,false),[_vm._v(\" mdi-eye-outline \")])],1)]}}])},[_c('span',[_vm._v(\"预览\")])]),_c('v-tooltip',{attrs:{\"right\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ attrs }){return [_c('v-tab',{staticClass:\"min-tabs\",attrs:{\"id\":\"viewOutline\"}},[_c('v-icon',_vm._b({on:{\"click\":function($event){return _vm.switchView(_vm.SIDEBAR_VIEW.OUTLINE)}}},'v-icon',attrs,false),[_vm._v(\" mdi-list-box-outline \")])],1)]}}])},[_c('span',[_vm._v(\"大纲\")])]),_c('v-tooltip',{attrs:{\"right\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ attrs }){return [_c('v-tab',{staticClass:\"min-tabs\",attrs:{\"id\":\"viewAttachments\"}},[_c('v-icon',_vm._b({on:{\"click\":function($event){return _vm.switchView(_vm.SIDEBAR_VIEW.ATTACHMENTS)}}},'v-icon',attrs,false),[_vm._v(\" mdi-attachment \")])],1)]}}])},[_c('span',[_vm._v(\"附件\")])]),_c('v-tab-item',{attrs:{\"eager\":true}},[_c('v-card',{staticStyle:{\"positon\":\"relative\"},attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"overflow-y-auto\",attrs:{\"id\":\"thumbnailView\"}})],1)],1),_c('v-tab-item',{attrs:{\"eager\":true}},[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"overflow-y-auto\",attrs:{\"id\":\"outlineView\"}})],1)],1),_c('v-tab-item',{attrs:{\"eager\":true}},[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"overflow-y-auto\",attrs:{\"id\":\"attachmentsView\"}})],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Vue from \"vue\";\nimport { SIDEBAR_VIEW, SIDEBAR_VIEW_MAP } from \"../../doc/PdfViewer/constants\";\nimport EVENT from \"@/constants/event\";\n\nexport default Vue.extend({\n  name: \"PdfSidebar\",\n\n  props: {},\n\n  data: () => ({\n    action: \"预览\",\n    SIDEBAR_VIEW: SIDEBAR_VIEW,\n    active: SIDEBAR_VIEW.THUMBS,\n    viewOutline: document.getElementById(\"viewOutline\"),\n    viewThumbnail: document.getElementById(\"viewThumbnail\"),\n    viewAttachments: document.getElementById(\"viewAttachments\"),\n  }),\n\n  methods: {\n    switchView(view: number) {\n      this.action = SIDEBAR_VIEW_MAP[view];\n    },\n    onTreeLoaded(view: number) {\n      if (this.active === view) {\n        this.switchView(SIDEBAR_VIEW.THUMBS);\n      }\n    },\n    outlineloaded() {\n      this.onTreeLoaded(SIDEBAR_VIEW.OUTLINE);\n    },\n    attachmentsloaded() {\n      this.onTreeLoaded(SIDEBAR_VIEW.ATTACHMENTS);\n    },\n    mounted() {\n      const { eventBus } = this.$PDFViewerApplication;\n\n      eventBus.on(EVENT.PDF.OUTLINE_LOADED, this.outlineloaded);\n      eventBus.on(EVENT.PDF.ATTACHMENTS_LOADED, this.attachmentsloaded);\n    },\n    destroyed() {\n      const { eventBus } = this.$PDFViewerApplication;\n\n      eventBus.off(EVENT.PDF.OUTLINE_LOADED, this.outlineloaded);\n      eventBus.off(EVENT.PDF.ATTACHMENTS_LOADED, this.attachmentsloaded);\n    },\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfSidebar.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfSidebar.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PdfSidebar.vue?vue&type=template&id=4aaf25b3&scoped=true&\"\nimport script from \"./PdfSidebar.vue?vue&type=script&lang=ts&\"\nexport * from \"./PdfSidebar.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PdfSidebar.vue?vue&type=style&index=0&id=4aaf25b3&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4aaf25b3\",\n  null\n  \n)\n\nexport default component.exports","import PdfSidebar from \"./PdfSidebar.vue\";\n\nPdfSidebar.install = function (Vue) {\n  Vue.component(PdfSidebar.name, PdfSidebar);\n};\n\nexport default PdfSidebar;\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"d-flex justify-center align-center mr-2\"},[_c('v-btn',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.$vuetify.breakpoint.mobile),expression:\"!$vuetify.breakpoint.mobile\"}],attrs:{\"icon\":\"\",\"disabled\":_vm.pageNumber <= 1},on:{\"click\":_vm.previousPage}},[_c('v-icon',[_vm._v(\"mdi-chevron-left\")])],1),_c('v-text-field',{staticClass:\"pageNumber\",attrs:{\"hide-details\":\"\",\"id\":\"pageNumber\"},on:{\"change\":_vm.pageNumberChanged},model:{value:(_vm.pageNumber),callback:function ($$v) {_vm.pageNumber=$$v},expression:\"pageNumber\"}}),_c('v-icon',[_vm._v(\"mdi-slash-forward\")]),_c('span',[_vm._v(_vm._s(_vm.pagesCount))]),_c('v-btn',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.$vuetify.breakpoint.mobile),expression:\"!$vuetify.breakpoint.mobile\"}],attrs:{\"icon\":\"\",\"disabled\":_vm.pageNumber >= _vm.pagesCount},on:{\"click\":_vm.nextPage}},[_c('v-icon',[_vm._v(\"mdi-chevron-right\")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Vue from \"vue\";\nimport EVENT from \"@/constants/event\";\n\nexport default Vue.extend({\n  name: \"PageController\",\n\n  data: () => ({\n    pageNumber: 1,\n    oldPageNumber: 1,\n    pagesCount: 0,\n  }),\n\n  created() {\n    const { eventBus } = this.$PDFViewerApplication;\n    eventBus.on(EVENT.PDF.SET_PAGE_NUMBER, this.setPageNumber);\n    eventBus.on(EVENT.PDF.SET_PAGES_COUNT, this.setPagesCount);\n  },\n\n  destroyed() {\n    const { eventBus } = this.$PDFViewerApplication;\n    eventBus.off(EVENT.PDF.SET_PAGE_NUMBER, this.setPageNumber);\n    eventBus.off(EVENT.PDF.SET_PAGES_COUNT, this.setPagesCount);\n  },\n\n  methods: {\n    /**\n     * 设置总页数\n     */\n    setPagesCount(evt: { pagesCount: number }) {\n      this.pagesCount = evt.pagesCount;\n    },\n\n    /**\n     * 监听页面滚动产生的页码变化\n     */\n    setPageNumber(evt: { pageNumber: number }) {\n      if (evt.pageNumber <= this.pagesCount) {\n        this.pageNumber = evt.pageNumber;\n        this.oldPageNumber = evt.pageNumber;\n      }\n    },\n\n    /**\n     * 输入页码\n     */\n    pageNumberChanged(pageNumber: number) {\n      const { eventBus } = this.$PDFViewerApplication;\n\n      // 判断页码是否可用的\n      if (\n        !/^[0-9]{1,20}$/.exec(pageNumber + \"\") ||\n        pageNumber > this.pagesCount\n      ) {\n        // 页码不可用\n        this.pageNumber = this.oldPageNumber;\n      } else {\n        this.pageNumber = pageNumber;\n        this.oldPageNumber = pageNumber;\n\n        eventBus.dispatch(EVENT.PDF.PAGE_NUMBER_CHANGED, pageNumber);\n      }\n    },\n\n    /**\n     * 上一页\n     */\n    previousPage() {\n      const { eventBus } = this.$PDFViewerApplication;\n      eventBus.dispatch(EVENT.PDF.PREVIOUS_PAGE);\n    },\n\n    /**\n     * 下一页\n     */\n    nextPage() {\n      const { eventBus } = this.$PDFViewerApplication;\n      eventBus.dispatch(EVENT.PDF.NEXT_PAGE);\n    },\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageController.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageController.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PageController.vue?vue&type=template&id=1ba87a9b&scoped=true&\"\nimport script from \"./PageController.vue?vue&type=script&lang=ts&\"\nexport * from \"./PageController.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PageController.vue?vue&type=style&index=0&id=1ba87a9b&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1ba87a9b\",\n  null\n  \n)\n\nexport default component.exports","import PageController from \"./PageController.vue\";\n\nPageController.install = function (Vue) {\n  Vue.component(PageController.name, PageController);\n};\n\nexport default PageController;\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('v-menu',{attrs:{\"offset-y\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-btn',_vm._g(_vm._b({attrs:{\"icon\":\"\"}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-dots-vertical\")])],1)]}}])},[_c('v-list',{staticClass:\"pt-1 pb-0\"},[_c('v-list-item-group',[_c('v-list-item',{attrs:{\"dense\":\"\"},on:{\"click\":_vm.firstPage}},[_c('v-list-item-icon',{staticClass:\"mr-1\"},[_c('v-icon',{staticClass:\"text-h6\"},[_vm._v(\"mdi-format-vertical-align-top\")])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"转到第一页\")])],1)],1),_c('v-list-item',{attrs:{\"dense\":\"\"},on:{\"click\":_vm.lastPage}},[_c('v-list-item-icon',{staticClass:\"mr-1\"},[_c('v-icon',{staticClass:\"text-h6\"},[_vm._v(\"mdi-format-vertical-align-bottom\")])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"转到最后一页\")])],1)],1)],1),_c('v-divider'),_c('RotateController',{attrs:{\"placement\":\"secondaryToolbar\"}}),_c('v-divider'),_c('PdfCursorTools'),_c('v-divider'),_c('PdfScrollMode'),_c('v-divider'),_c('PdfSpreadMode'),_c('v-divider'),_c('v-list-item-group',[_c('v-list-item',{attrs:{\"dense\":\"\"}},[_c('v-list-item-icon',{staticClass:\"mr-1\"},[_c('v-icon',{staticClass:\"text-h6\"},[_vm._v(\"mdi-information-outline\")])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"文档属性\")])],1)],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return (_vm.placement === 'toolbar')?_c('div',[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-btn',_vm._g(_vm._b({attrs:{\"icon\":\"\",\"id\":\"pageRotateCw\"},on:{\"click\":_vm.handleRotateCw}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-file-rotate-right-outline\")])],1)]}}],null,false,3735609104)},[_c('span',[_vm._v(\"顺时针旋转\")])]),_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-btn',_vm._g(_vm._b({attrs:{\"icon\":\"\",\"id\":\"pageRotateCcw\"},on:{\"click\":_vm.handleRotateCcw}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-file-rotate-left-outline\")])],1)]}}],null,false,4147743627)},[_c('span',[_vm._v(\"逆时针旋转\")])])],1):_c('v-list-item-group',[_c('v-list-item',{attrs:{\"dense\":\"\"}},[_c('v-list-item-icon',{staticClass:\"mr-1\"},[_c('v-icon',[_vm._v(\"mdi-file-rotate-right-outline\")])],1),_c('v-list-item-content',{on:{\"click\":_vm.handleRotateCw}},[_c('v-list-item-title',[_vm._v(\"顺时针旋转\")])],1)],1),_c('v-list-item',{attrs:{\"dense\":\"\"}},[_c('v-list-item-icon',{staticClass:\"mr-1\"},[_c('v-icon',[_vm._v(\"mdi-file-rotate-left-outline\")])],1),_c('v-list-item-content',{on:{\"click\":_vm.handleRotateCcw}},[_c('v-list-item-title',[_vm._v(\"逆时针旋转\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Vue from \"vue\";\nimport EVENT from \"@/constants/event\";\n\nexport default Vue.extend({\n  name: \"RotateController\",\n\n  props: {\n    /**\n     * 放置位置：toolbar | secondaryToolbar\n     */\n    placement: {\n      type: String,\n      default: \"toolbar\",\n    },\n  },\n\n  methods: {\n    /**\n     * 逆时针旋转\n     */\n    handleRotateCcw() {\n      const { eventBus } = this.$PDFViewerApplication;\n      eventBus.dispatch(EVENT.PDF.ROTATE_CHANGING, -90);\n    },\n\n    /**\n     * 顺时针旋转\n     */\n    handleRotateCw() {\n      const { eventBus } = this.$PDFViewerApplication;\n      eventBus.dispatch(EVENT.PDF.ROTATE_CHANGING, 90);\n    },\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RotateController.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RotateController.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./RotateController.vue?vue&type=template&id=d6c83416&\"\nimport script from \"./RotateController.vue?vue&type=script&lang=ts&\"\nexport * from \"./RotateController.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import RotateController from \"./RotateController.vue\";\n\nRotateController.install = function (Vue) {\n  Vue.component(RotateController.name, RotateController);\n};\n\nexport default RotateController;\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('v-list-item-group',[_c('v-list-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.$vuetify.breakpoint.mobile),expression:\"!$vuetify.breakpoint.mobile\"}],attrs:{\"dense\":\"\",\"id\":\"cursorSelectTool\"},on:{\"click\":_vm.cursorSelectTool}},[_c('v-list-item-icon',{staticClass:\"mr-1\"},[_c('v-icon',{staticClass:\"text-h6\"},[_vm._v(\"mdi-cursor-default-outline\")])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"文本选择工具\")])],1)],1),_c('v-list-item',{attrs:{\"dense\":\"\",\"id\":\"cursorHandTool\"},on:{\"click\":_vm.cursorHandTool}},[_c('v-list-item-icon',{staticClass:\"mr-1\"},[_c('v-icon',{staticClass:\"text-h6\"},[_vm._v(\"mdi-hand-back-left-outline\")])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"手型工具\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Vue from \"vue\";\nimport { CURSOR_TOOL } from \"@/components/doc\";\n\nexport default Vue.extend({\n  name: \"PdfCursorTools\",\n\n  methods: {\n    /**\n     * 文本选择工具\n     */\n    cursorSelectTool() {\n      const { pdfCursorTools } = this.$PDFViewerApplication;\n      pdfCursorTools.switchTool(CURSOR_TOOL.SELECT);\n    },\n\n    /**\n     * 手型工具\n     */\n    cursorHandTool() {\n      const { pdfCursorTools } = this.$PDFViewerApplication;\n      pdfCursorTools.switchTool(CURSOR_TOOL.HAND);\n    },\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfCursorTools.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfCursorTools.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PdfCursorTools.vue?vue&type=template&id=f0cf7e60&\"\nimport script from \"./PdfCursorTools.vue?vue&type=script&lang=ts&\"\nexport * from \"./PdfCursorTools.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import PdfCursorTools from \"./PdfCursorTools.vue\";\n\nPdfCursorTools.install = function (Vue) {\n  Vue.component(PdfCursorTools.name, PdfCursorTools);\n};\n\nexport default PdfCursorTools;\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('v-list-item-group',[_c('v-list-item',{attrs:{\"dense\":\"\"}},[_c('v-list-item-icon',{staticClass:\"mr-1\"},[_c('v-icon',{staticClass:\"text-h6\"},[_vm._v(\"mdi-cursor-default-outline\")])],1),_c('v-list-item-content',{on:{\"click\":function($event){return _vm.switchScrollMode(_vm.SCROLL_MODE.PAGE)}}},[_c('v-list-item-title',[_vm._v(\"页面滚动\")])],1)],1),_c('v-list-item',{attrs:{\"dense\":\"\"}},[_c('v-list-item-icon',{staticClass:\"mr-1\"},[_c('v-icon',{staticClass:\"text-h6\"},[_vm._v(\"mdi-arrow-vertical-lock\")])],1),_c('v-list-item-content',{on:{\"click\":function($event){return _vm.switchScrollMode(_vm.SCROLL_MODE.VERTICAL)}}},[_c('v-list-item-title',[_vm._v(\"垂直滚动\")])],1)],1),_c('v-list-item',{attrs:{\"dense\":\"\"}},[_c('v-list-item-icon',{staticClass:\"mr-1\"},[_c('v-icon',{staticClass:\"text-h6\"},[_vm._v(\"mdi-arrow-horizontal-lock\")])],1),_c('v-list-item-content',{on:{\"click\":function($event){return _vm.switchScrollMode(_vm.SCROLL_MODE.HORIZONTAL)}}},[_c('v-list-item-title',[_vm._v(\"水平滚动\")])],1)],1),_c('v-list-item',{attrs:{\"dense\":\"\"}},[_c('v-list-item-icon',{staticClass:\"mr-1\"},[_c('v-icon',{staticClass:\"text-h6\"},[_vm._v(\"mdi-hand-back-left-outline\")])],1),_c('v-list-item-content',{on:{\"click\":function($event){return _vm.switchScrollMode(_vm.SCROLL_MODE.WRAPPED)}}},[_c('v-list-item-title',[_vm._v(\"平铺滚动\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Vue from \"vue\";\nimport { EVENT, SCROLL_MODE } from \"@/components/doc\";\n\nexport default Vue.extend({\n  name: \"PdfScrollMode\",\n\n  data: () => ({\n    SCROLL_MODE,\n  }),\n\n  methods: {\n    /**\n     * 文档滚动模式\n     */\n    switchScrollMode(scrollMode: number) {\n      const { eventBus } = this.$PDFViewerApplication;\n      eventBus.dispatch(EVENT.PDF.SWITCH_SCROLL_MODE, scrollMode);\n    },\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfScrollMode.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfScrollMode.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PdfScrollMode.vue?vue&type=template&id=5885b1ac&\"\nimport script from \"./PdfScrollMode.vue?vue&type=script&lang=ts&\"\nexport * from \"./PdfScrollMode.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import PdfScrollMode from \"./PdfScrollMode.vue\";\n\nPdfScrollMode.install = function (Vue) {\n  Vue.component(PdfScrollMode.name, PdfScrollMode);\n};\n\nexport default PdfScrollMode;\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('v-list-item-group',[_c('v-list-item',{attrs:{\"dense\":\"\"}},[_c('v-list-item-icon',{staticClass:\"mr-1\"},[_c('v-icon',{staticClass:\"text-h6\"},[_vm._v(\"mdi-hand-back-left-outline\")])],1),_c('v-list-item-content',{on:{\"click\":function($event){return _vm.switchSpreadMode(_vm.SPREAD_MODE.NONE)}}},[_c('v-list-item-title',[_vm._v(\"单页视图\")])],1)],1),_c('v-list-item',{attrs:{\"dense\":\"\"}},[_c('v-list-item-icon',{staticClass:\"mr-1\"},[_c('v-icon',{staticClass:\"text-h6\"},[_vm._v(\"mdi-cursor-default-outline\")])],1),_c('v-list-item-content',{on:{\"click\":function($event){return _vm.switchSpreadMode(_vm.SPREAD_MODE.ODD)}}},[_c('v-list-item-title',[_vm._v(\"双页视图\")])],1)],1),_c('v-list-item',{attrs:{\"dense\":\"\"}},[_c('v-list-item-icon',{staticClass:\"mr-1\"},[_c('v-icon',{staticClass:\"text-h6\"},[_vm._v(\"mdi-book-open-page-variant-outline\")])],1),_c('v-list-item-content',{on:{\"click\":function($event){return _vm.switchSpreadMode(_vm.SPREAD_MODE.EVEN)}}},[_c('v-list-item-title',[_vm._v(\"书籍视图\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Vue from \"vue\";\nimport { EVENT, SPREAD_MODE } from \"@/components/doc\";\n\nexport default Vue.extend({\n  name: \"PdfScrollMode\",\n\n  data: () => ({\n    SPREAD_MODE,\n  }),\n\n  methods: {\n    /**\n     * 文档展示模式\n     */\n    switchSpreadMode(spreadMode: number) {\n      const { eventBus } = this.$PDFViewerApplication;\n      eventBus.dispatch(EVENT.PDF.SWITCH_SPREAD_MODE, spreadMode);\n    },\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfSpreadMode.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfSpreadMode.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PdfSpreadMode.vue?vue&type=template&id=204fbeda&\"\nimport script from \"./PdfSpreadMode.vue?vue&type=script&lang=ts&\"\nexport * from \"./PdfSpreadMode.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import PdfSpreadMode from \"./PdfSpreadMode.vue\";\n\nPdfSpreadMode.install = function (Vue) {\n  Vue.component(PdfSpreadMode.name, PdfSpreadMode);\n};\n\nexport default PdfSpreadMode;\n","\nimport Vue from \"vue\";\nimport RotateController from \"@/components/base/RotateController\";\nimport PdfCursorTools from \"@/components/base/PdfCursorTools\";\nimport PdfScrollMode from \"@/components/base/PdfScrollMode\";\nimport PdfSpreadMode from \"@/components/base/PdfSpreadMode\";\nimport EVENT from \"@/constants/event\";\n\nexport default Vue.extend({\n  name: \"SecondaryToolbar\",\n\n  components: {\n    RotateController,\n    PdfCursorTools,\n    PdfScrollMode,\n    PdfSpreadMode,\n  },\n\n  methods: {\n    /**\n     * 转到第一页\n     */\n    firstPage() {\n      const { eventBus } = this.$PDFViewerApplication;\n      eventBus.dispatch(EVENT.PDF.FIRST_PAGE);\n    },\n\n    /**\n     * 转到最后一页\n     */\n    lastPage() {\n      const { eventBus } = this.$PDFViewerApplication;\n      eventBus.dispatch(EVENT.PDF.LAST_PAGE);\n    },\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SecondaryToolbar.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SecondaryToolbar.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SecondaryToolbar.vue?vue&type=template&id=28cb067d&\"\nimport script from \"./SecondaryToolbar.vue?vue&type=script&lang=ts&\"\nexport * from \"./SecondaryToolbar.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import SecondaryToolbar from \"./SecondaryToolbar.vue\";\n\nSecondaryToolbar.install = function (Vue) {\n  Vue.component(SecondaryToolbar.name, SecondaryToolbar);\n};\n\nexport default SecondaryToolbar;\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"d-flex justify-center align-center\"},[_c('v-btn',{attrs:{\"mini\":\"\",\"id\":\"zoomOut\",\"icon\":\"\",\"disabled\":_vm.pageScale <= _vm.MIN_SCALE},on:{\"click\":_vm.zoomOut}},[_c('v-icon',[_vm._v(\"mdi-minus\")])],1),_c('v-menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.$vuetify.breakpoint.mobile),expression:\"!$vuetify.breakpoint.mobile\"}],scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-btn',_vm._g(_vm._b({staticClass:\"scaleButton\",attrs:{\"text\":\"\",\"color\":\"black\"}},'v-btn',attrs,false),on),[_vm._v(\" \"+_vm._s(_vm.customScale || _vm.selectedScale.text)+\" \")])]}}])},[_c('v-list',{staticClass:\"scaleList\",attrs:{\"dense\":\"\",\"max-height\":\"304\"}},[_c('v-subheader',[_vm._v(\"选择缩放比例\")]),_vm._l((_vm.options),function(item){return _c('v-list-item',{key:item.value,staticClass:\"scaleListItem\",on:{\"click\":function($event){return _vm.selectScale(item)}}},[_c('v-list-item-title',[_vm._v(_vm._s(item.text))])],1)})],2)],1),_c('v-btn',{attrs:{\"mini\":\"\",\"id\":\"zoomIn\",\"icon\":\"\",\"disabled\":_vm.pageScale >= _vm.MAX_SCALE},on:{\"click\":_vm.zoomIn}},[_c('v-icon',[_vm._v(\"mdi-plus\")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"d-flex justify-center align-center\">\n    <v-btn\n      mini\n      id=\"zoomOut\"\n      icon\n      @click=\"zoomOut\"\n      :disabled=\"pageScale <= MIN_SCALE\"\n    >\n      <v-icon>mdi-minus</v-icon>\n    </v-btn>\n\n    <v-menu v-show=\"!$vuetify.breakpoint.mobile\">\n      <template v-slot:activator=\"{ on, attrs }\">\n        <v-btn text color=\"black\" v-bind=\"attrs\" v-on=\"on\" class=\"scaleButton\">\n          {{ customScale || selectedScale.text }}\n        </v-btn>\n      </template>\n      <v-list class=\"scaleList\" dense max-height=\"304\">\n        <v-subheader>选择缩放比例</v-subheader>\n        <v-list-item\n          v-for=\"item in options\"\n          :key=\"item.value\"\n          class=\"scaleListItem\"\n          @click=\"selectScale(item)\"\n        >\n          <v-list-item-title>{{ item.text }}</v-list-item-title>\n        </v-list-item>\n      </v-list>\n    </v-menu>\n    <v-btn\n      mini\n      id=\"zoomIn\"\n      icon\n      @click=\"zoomIn\"\n      :disabled=\"pageScale >= MAX_SCALE\"\n    >\n      <v-icon>mdi-plus</v-icon>\n    </v-btn>\n  </div>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport { DEFAULT_SCALE_VALUE, EVENT } from \"@/components/doc\";\n\nconst DEFAULT_SCALE = 1.0;\nconst MIN_SCALE = 0.1;\nconst MAX_SCALE = 10.0;\nconst SCALE_OPTIONS = [\n  { text: \"自动缩放\", value: \"auto\" },\n  { text: \"实际大小\", value: \"page-actual\" },\n  { text: \"适合页面\", value: \"page-fit\" },\n  { text: \"适合页宽\", value: \"page-width\" },\n  { text: \"50%\", value: 0.5 },\n  { text: \"75%\", value: 0.75 },\n  { text: \"100%\", value: 1 },\n  { text: \"125%\", value: 1.25 },\n  { text: \"150%\", value: 1.5 },\n  { text: \"200%\", value: 2 },\n  { text: \"300%\", value: 3 },\n  { text: \"400%\", value: 4 },\n];\n\nexport default Vue.extend({\n  name: \"ScaleController\",\n\n  data: () => ({\n    options: SCALE_OPTIONS,\n    selectedScale: SCALE_OPTIONS[0],\n    customScale: \"\",\n    pageScale: DEFAULT_SCALE,\n    pageScaleValue: DEFAULT_SCALE_VALUE,\n    MIN_SCALE,\n    MAX_SCALE,\n  }),\n\n  created() {\n    const { eventBus } = this.$PDFViewerApplication;\n    eventBus.on(EVENT.PDF.SET_PAGE_SCALE, this.setPageScale);\n  },\n\n  methods: {\n    /**\n     * 缩小\n     */\n    zoomOut() {\n      const { eventBus } = this.$PDFViewerApplication;\n      eventBus.dispatch(EVENT.PDF.ZOOM_OUT);\n    },\n\n    /**\n     * 放大\n     */\n    zoomIn() {\n      const { eventBus } = this.$PDFViewerApplication;\n      eventBus.dispatch(EVENT.PDF.ZOOM_IN);\n    },\n\n    /**\n     * 选择缩放比例\n     */\n    selectScale(item) {\n      const { eventBus } = this.$PDFViewerApplication;\n\n      this.selectedScale = item;\n\n      if (item.value) {\n        eventBus.dispatch(EVENT.PDF.SCALE_CHANGED, item.value);\n      }\n    },\n\n    /**\n     * 设置缩放比例\n     */\n    setPageScale({ pageScaleValue, pageScale }) {\n      this.pageScale = pageScale;\n\n      if (pageScaleValue) {\n        this.pageScaleValue = pageScaleValue;\n      } else {\n        this.pageScaleValue = Math.round(pageScale * 10000) / 100 + \"%\";\n      }\n\n      let predefinedValueFound = false;\n\n      for (let i = 0; i < SCALE_OPTIONS.length; i++) {\n        const option = SCALE_OPTIONS[i];\n\n        if (\n          option.value === this.pageScale ||\n          option.value === this.pageScaleValue\n        ) {\n          predefinedValueFound = true;\n          this.customScale = option.text;\n          this.selectedScale = option;\n          break;\n        }\n      }\n\n      if (!predefinedValueFound) {\n        this.customScale = this.pageScaleValue;\n        this.selectedScale = {};\n      } else {\n        this.customScale = \"\";\n      }\n    },\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.scaleButton {\n  width: 96px;\n}\n\n.scaleList {\n  .scaleListItem {\n    background: #fff;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScaleController.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScaleController.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ScaleController.vue?vue&type=template&id=bf2b21c4&scoped=true&\"\nimport script from \"./ScaleController.vue?vue&type=script&lang=js&\"\nexport * from \"./ScaleController.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ScaleController.vue?vue&type=style&index=0&id=bf2b21c4&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bf2b21c4\",\n  null\n  \n)\n\nexport default component.exports","import ScaleController from \"./ScaleController.vue\";\n\nScaleController.install = function (Vue) {\n  Vue.component(ScaleController.name, ScaleController);\n};\n\nexport default ScaleController;\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('v-progress-linear',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],attrs:{\"value\":_vm.percent}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// 计算相对于左下角坐标\nconst leftTopTransformToLeftBottom = (leftTopPosition, pageHeight) => {\n  const leftBottomPosition = {\n    x: leftTopPosition.x,\n    y: pageHeight - leftTopPosition.y,\n  };\n  return leftBottomPosition;\n};\n\n// 计算水印宽度\nconst computeTextWdith = (text, fontSize, font) => {\n  if (font) {\n    // 1、使用 Canvas 自带方法获取文字宽度，\n    // 这里会考虑字体宽度，因此，同样字数和字号，字体不同，宽度也会不同\n    const tempCanvas = document.createElement(\"canvas\");\n    const tempCtx = tempCanvas.getContext(\"2d\");\n    if (tempCtx) {\n      tempCtx.font = fontSize + \"px \" + font;\n      return tempCtx.measureText(text).width;\n    } else {\n      return fontSize * text.length;\n    }\n  } else {\n    // 2、使用与服务端相同的方案获取文字宽度，\n    // 直接用字号乘以字数，无论用什么字体，宽度都是一样的\n    return fontSize * text.length;\n  }\n};\n\n// 转换水印数据\nconst convertConfig = (config, pageWidth, pageHeight) => {\n  const result = {\n    color: \"\",\n    font: \"\",\n    fontName: \"\",\n    fontSize: 0,\n    fullscreen: \"\",\n    file: \"\",\n    fileWidth: 0,\n    fileHeight: 0,\n    leftBottomPosition: { x: 0, y: 0 },\n    opacity: 0,\n    position: { x: 0, y: 0 },\n    rotate: 0,\n    source: \"\",\n    text: \"\",\n    density: 0,\n    width: 0,\n    height: 0,\n  };\n\n  if (config.file && config.file.length !== 0) {\n    result.source = \"file\";\n  } else {\n    result.source = \"text\";\n  }\n\n  // 文字水印\n  if (result.source === \"text\") {\n    //文字内容\n    result.text = config.text.trim();\n    result.font = config.fontName;\n    result.fontName = config.font;\n    result.fontSize = config.size;\n    result.color = config.color;\n  }\n\n  // 文件水印\n  if (result.source === \"file\") {\n    result.file = config.file;\n  }\n\n  // 旋转\n  result.rotate = Number(config.rotate) % 360;\n  if (result.rotate < 0) {\n    result.rotate = 360 + result.rotate;\n  }\n\n  // 将旋转角度处理成逆时针旋转\n  result.rotate = result.rotate !== 0 ? 360 - result.rotate : 0;\n\n  // 不透明度\n  result.opacity = config.opacity;\n\n  if (config.isTiled) {\n    // 平铺水印\n    result.fullscreen = \"tile\";\n    // 密度\n    result.density = Number(config.density) / 100;\n  } else {\n    // 单个水印\n    result.fullscreen = \"no\";\n    result.position = { x: 0, y: 0 };\n\n    const padding = 20;\n\n    // 垂直\n    if (config.vertical === \"top\") {\n      result.position.y = -pageHeight / 2 + padding;\n    } else if (config.vertical === \"bottom\") {\n      result.position.y = pageHeight / 2 - padding;\n    } else if (config.vertical === \"middle\") {\n      result.position.y = 0;\n    } else {\n      result.position.y = Number(config.vertical);\n    }\n\n    // 水平\n    if (config.horizontal === \"left\") {\n      result.position.x = -pageWidth / 2 + padding;\n    } else if (config.horizontal === \"right\") {\n      result.position.x = pageWidth / 2 - padding;\n    } else if (config.horizontal === \"center\") {\n      result.position.x = 0;\n    } else {\n      result.position.x = Number(config.horizontal);\n    }\n\n    // 相对于页面左下角\n    result.leftBottomPosition = leftTopTransformToLeftBottom(\n      {\n        x: pageWidth / 2 + result.position.x,\n        y: pageHeight / 2 + result.position.y,\n      },\n      pageHeight\n    );\n  }\n\n  return result;\n};\n\n/**\n * 计算水印在 x，y 轴上投影的长度，按页面原始比例计算\n */\nconst getDistance = (config) => {\n  const result = { x: 0, y: 0 };\n\n  const quadrant = config.rotate;\n  const rotationInRadians = (quadrant * Math.PI) / 180;\n  let width = 0;\n  let height = 0;\n\n  if (config.source === \"text\") {\n    // 计算文字宽度\n    const textWidth = computeTextWdith(config.text, config.fontSize);\n\n    width = textWidth / config.density;\n    height = config.fontSize / config.density;\n  }\n\n  if (config.source === \"file\") {\n    width = config.fileWidth / config.density;\n    height = config.fileHeight / config.density;\n  }\n\n  // 水印对角线\n  const textDiagonal = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));\n  // 对角线与水印底边的夹角\n  const diagonalAngle = Math.atan(height / width);\n\n  // 水平宽度\n  let textHorizontalLength = 0;\n  // 垂直高度\n  let textVerticalHeight = 0;\n\n  if (quadrant === 0 || quadrant === 180) {\n    textVerticalHeight = height;\n    textHorizontalLength = width;\n  } else if (quadrant === 90 || quadrant === 270) {\n    textVerticalHeight = width;\n    textHorizontalLength = height;\n  } else if (0 < quadrant && quadrant < 90) {\n    textVerticalHeight =\n      textDiagonal * Math.abs(Math.sin(rotationInRadians + diagonalAngle));\n    textHorizontalLength =\n      textDiagonal * Math.abs(Math.cos(rotationInRadians + diagonalAngle));\n  } else if (90 < quadrant && quadrant < 180) {\n    textVerticalHeight =\n      textDiagonal *\n      Math.abs(Math.sin(Math.PI - rotationInRadians + diagonalAngle));\n    textHorizontalLength =\n      textDiagonal *\n      Math.abs(Math.cos(Math.PI - rotationInRadians + diagonalAngle));\n  } else if (180 < quadrant && quadrant < 270) {\n    textVerticalHeight =\n      textDiagonal *\n      Math.abs(Math.sin(rotationInRadians - Math.PI + diagonalAngle));\n    textHorizontalLength =\n      textDiagonal *\n      Math.abs(Math.cos(rotationInRadians - Math.PI + diagonalAngle));\n  } else if (270 < quadrant && quadrant < 360) {\n    textVerticalHeight =\n      textDiagonal *\n      Math.abs(Math.sin(2 * Math.PI - rotationInRadians + diagonalAngle));\n    textHorizontalLength =\n      textDiagonal *\n      Math.abs(Math.cos(2 * Math.PI - rotationInRadians + diagonalAngle));\n  }\n\n  result.x = textHorizontalLength;\n  result.y = textVerticalHeight;\n\n  return result;\n};\n\n/**\n * 计算页面上所有符合x（y）轴上水印距离的x（y）坐标。\n */\nconst getXYPositions = (\n  pageMidPointX,\n  pageMidPointY,\n  xDistance,\n  yDistance,\n  pageWidth,\n  pageHeight\n) => {\n  const xyPositions = { x: [], y: [] };\n\n  let leftXCoordinate = pageMidPointX;\n  let rightXCoordinate = pageMidPointX;\n\n  const truth = true;\n  while (truth) {\n    leftXCoordinate -= xDistance;\n    if (leftXCoordinate < 0) {\n      break;\n    }\n    xyPositions.x.push(leftXCoordinate);\n  }\n  xyPositions.x.push(pageMidPointX);\n  while (truth) {\n    rightXCoordinate += xDistance;\n    if (rightXCoordinate > pageWidth) {\n      break;\n    }\n    xyPositions.x.push(rightXCoordinate);\n  }\n\n  let upYCoordinate = pageMidPointY;\n  let bottomYCoordinate = pageMidPointY;\n\n  while (truth) {\n    upYCoordinate += yDistance;\n    if (upYCoordinate > pageHeight) {\n      break;\n    }\n    xyPositions.y.push(upYCoordinate);\n  }\n  xyPositions.y.push(pageMidPointY);\n  while (truth) {\n    bottomYCoordinate -= yDistance;\n    if (bottomYCoordinate < 0) {\n      break;\n    }\n    xyPositions.y.push(bottomYCoordinate);\n  }\n\n  return xyPositions;\n};\n\n/**\n * 渲染水印\n */\nconst renderWaterMark = (\n  config,\n  targetCanvas,\n  targetScale,\n  targetWidth,\n  targetHeight,\n  pageView\n) => {\n  // 创建一个不可见的 Canvas，先绘制一个水印，之后再与页面显示的 Canvas 合并\n  // 否则之后复制、移动、旋转、缩放等操作会影响当前显示的 Canvas\n  const tempCanvas = document.createElement(\"canvas\");\n  tempCanvas.width = targetWidth;\n  tempCanvas.height = targetHeight;\n  const tempCtx = tempCanvas.getContext(\"2d\");\n\n  const pageCenterX = tempCanvas.width / 2;\n  const pageCenterY = tempCanvas.height / 2;\n\n  if (tempCtx) {\n    // 绘制临时水印\n    tempCtx.translate(tempCanvas.width / 2, tempCanvas.height / 2);\n    tempCtx.rotate((config.rotate * Math.PI) / 180);\n    tempCtx.translate(-tempCanvas.width / 2, -tempCanvas.height / 2);\n\n    // 不透明度\n    tempCtx.globalAlpha = config.opacity;\n\n    new Promise((resolve) => {\n      if (config.source === \"text\" && config.text) {\n        // 设置文字样式\n        tempCtx.textAlign = \"center\";\n        tempCtx.fillStyle = config.color;\n        tempCtx.font = config.fontSize * targetScale + \"px \" + config.font;\n\n        // 绘制文字\n        tempCtx.fillText(config.text, pageCenterX, pageCenterY);\n\n        resolve();\n      } else if (config.source === \"file\" && config.file) {\n        const image = new Image();\n        image.onload = function () {\n          const imageWidth = image.width * targetScale;\n          const imageHeight = image.height * targetScale;\n          config.fileWidth = image.width;\n          config.fileHeight = image.height;\n          tempCtx.drawImage(\n            image,\n            0,\n            0,\n            image.width,\n            image.height,\n            pageCenterX - imageWidth / 2,\n            pageCenterY - imageHeight / 2,\n            imageWidth,\n            imageHeight\n          );\n          resolve();\n        };\n        image.src = config.file;\n      } else if (pageView) {\n        targetCanvas.width = targetWidth;\n        targetCanvas.height = targetHeight;\n        const targetCtx = targetCanvas.getContext(\"2d\");\n        if (targetCtx) {\n          targetCtx.drawImage(\n            pageView.canvas,\n            0,\n            0,\n            pageView.canvas.width,\n            pageView.canvas.height,\n            0,\n            0,\n            targetWidth,\n            targetHeight\n          );\n        }\n      }\n    }).then(() => {\n      const watermarkImg = tempCanvas.toDataURL(\"png\", 1);\n      return new Promise((resolve) => {\n        const image = new Image();\n        image.onload = function () {\n          const targetCtx = targetCanvas.getContext(\"2d\");\n\n          if (pageView && targetCtx) {\n            targetCanvas.width = targetWidth;\n            targetCanvas.height = targetHeight;\n            targetCtx.drawImage(\n              pageView.canvas,\n              0,\n              0,\n              pageView.canvas.width,\n              pageView.canvas.height,\n              0,\n              0,\n              targetWidth,\n              targetHeight\n            );\n          }\n\n          const pageCenterX = targetWidth / 2;\n          const pageCenterY = targetHeight / 2;\n          const textLayerElements = [];\n          if (config.fullscreen === \"tile\") {\n            // 平铺\n            const distance = getDistance(config);\n            const minXDistance = distance.x;\n            const minYDistance = distance.y;\n            let yDistance;\n            const xDistance = (yDistance =\n              minXDistance > minYDistance ? minXDistance : minYDistance);\n\n            const xyPositions = getXYPositions(\n              targetWidth / 2,\n              targetHeight / 2,\n              xDistance * targetScale,\n              yDistance * targetScale,\n              targetWidth,\n              targetHeight\n            );\n            for (let i = 0; i < xyPositions.x.length; i++) {\n              for (let j = 0; j < xyPositions.y.length; j++) {\n                // 渲染水印\n                targetCtx &&\n                  targetCtx.drawImage(\n                    image,\n                    0,\n                    0,\n                    image.width,\n                    image.height,\n                    xyPositions.x[i] - image.width / 2,\n                    xyPositions.y[j] - image.height / 2,\n                    image.width,\n                    image.height\n                  );\n              }\n            }\n          } else {\n            // 单个水印\n            const horizontal = config.position.x * targetScale;\n            const vertical = config.position.y * targetScale;\n\n            // 渲染水印\n            targetCtx &&\n              targetCtx.drawImage(\n                image,\n                0,\n                0,\n                image.width,\n                image.height,\n                pageCenterX - image.width / 2 + horizontal,\n                pageCenterY - image.height / 2 + vertical,\n                image.width,\n                image.height\n              );\n          }\n          resolve();\n        };\n        image.src = watermarkImg;\n      });\n    });\n  }\n};\n\nexport { convertConfig, renderWaterMark };\n","function clamp(v: number, min: number, max: number) {\n  return Math.min(Math.max(v, min), max);\n}\n\nimport { convertConfig, renderWaterMark } from \"./watermark\";\n\nexport { clamp, convertConfig, renderWaterMark };\n","\nimport Vue from \"vue\";\nimport { clamp } from \"@/utils\";\n\nexport default Vue.extend({\n  name: \"ProgressBar\",\n\n  data: () => ({\n    percent: 0,\n    visible: false,\n  }),\n\n  created() {\n    this.$PDFViewerApplication.eventBus.on(\n      \"updateloadingbar\",\n      this.updateLoadingBar\n    );\n    this.$PDFViewerApplication.eventBus.on(\n      \"showloadingbar\",\n      this.showLoadingBar\n    );\n    this.$PDFViewerApplication.eventBus.on(\n      \"hideloadingbar\",\n      this.hideLoadingBar\n    );\n  },\n\n  methods: {\n    updateLoadingBar(percent: number) {\n      // When we transition from full request to range requests, it's possible\n      // that we discard some of the loaded data. This can cause the loading\n      // bar to move backwards. So prevent this by only updating the bar if it\n      // increases.\n      if (percent <= this.percent) {\n        return;\n      }\n\n      this.percent = clamp(percent, 0, 100);\n\n      if (isNaN(percent)) {\n        return;\n      }\n\n      this.percent = percent;\n    },\n\n    showLoadingBar() {\n      this.visible = true;\n    },\n\n    hideLoadingBar() {\n      this.visible = false;\n    },\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProgressBar.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--15-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProgressBar.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ProgressBar.vue?vue&type=template&id=2ba2ac9a&\"\nimport script from \"./ProgressBar.vue?vue&type=script&lang=ts&\"\nexport * from \"./ProgressBar.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import ProgressBar from \"./ProgressBar.vue\";\n\nProgressBar.install = function (Vue) {\n  Vue.component(ProgressBar.name, ProgressBar);\n};\n\nexport default ProgressBar;\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"400\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"text-h6\"},[_vm._v(\"文档已加密\")]),_c('v-card-text',[_c('v-text-field',{attrs:{\"append-icon\":_vm.showPassword ? 'mdi-eye' : 'mdi-eye-off',\"type\":_vm.showPassword ? 'text' : 'password',\"label\":_vm.label},on:{\"click:append\":function($event){_vm.showPassword = !_vm.showPassword}},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")]),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.submit}},[_vm._v(\"确认\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-dialog v-model=\"dialog\" persistent max-width=\"400\">\n    <v-card>\n      <v-card-title class=\"text-h6\">文档已加密</v-card-title>\n      <v-card-text>\n        <v-text-field\n          v-model=\"password\"\n          :append-icon=\"showPassword ? 'mdi-eye' : 'mdi-eye-off'\"\n          :type=\"showPassword ? 'text' : 'password'\"\n          :label=\"label\"\n          @click:append=\"showPassword = !showPassword\"\n        />\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer />\n        <v-btn text @click=\"cancel\">取消</v-btn>\n        <v-btn text @click=\"submit\">确认</v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script type=\"ts\">\nimport EVENT from \"@/constants/event\";\nimport Vue from \"vue\";\n\nexport default Vue.extend({\n  name: \"PasswordPrompt\",\n  data() {\n    return {\n      dialog: false,\n      showPassword: false,\n      password: \"\",\n      label: \"请输入密码以打开此 PDF 文档\",\n    };\n  },\n\n  methods: {\n    submit() {\n      const { eventBus } = this.$PDFViewerApplication;\n      const password = this.password;\n      // 校验密码\n      eventBus.dispatch(EVENT.COMMON.PASSWORD.VERIFY, {\n        password,\n      });\n    },\n    cancel() {\n      const { eventBus } = this.$PDFViewerApplication;\n      eventBus.dispatch(EVENT.COMMON.PASSWORD.CANCEL);\n      this.passed();\n    },\n    open({ label }) {\n      // 目前没有做多语言功能，label返回的是'';\n      // this.label = label;\n      this.dialog = true;\n    },\n    close() {\n      this.dialog = false;\n    },\n    reset() {\n      this.showPassword = false;\n      this.password = \"\";\n    },\n    passed() {\n      this.reset();\n      this.close();\n    },\n  },\n  mounted() {\n    const { eventBus } = this.$PDFViewerApplication;\n\n    eventBus.on(EVENT.COMMON.PASSWORD.OPEN, this.open);\n    eventBus.on(EVENT.COMMON.PASSWORD.PASSED, this.passed);\n  },\n  destroyed() {\n    const { eventBus } = this.$PDFViewerApplication;\n\n    eventBus.off(EVENT.COMMON.PASSWORD.OPEN, this.open);\n    eventBus.off(EVENT.COMMON.PASSWORD.PASSED, this.passed);\n  },\n});\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PasswordPrompt.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PasswordPrompt.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PasswordPrompt.vue?vue&type=template&id=83fb50a2&\"\nimport script from \"./PasswordPrompt.vue?vue&type=script&lang=js&\"\nexport * from \"./PasswordPrompt.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import PasswordPrompt from \"./PasswordPrompt.vue\";\n\nPasswordPrompt.install = function (Vue) {\n  Vue.component(PasswordPrompt.name, PasswordPrompt);\n};\n\nexport default PasswordPrompt;\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"383\"},model:{value:(_vm.visible),callback:function ($$v) {_vm.visible=$$v},expression:\"visible\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\" 验证用户密码 \")]),_c('v-form',{ref:\"form\"},[_c('v-container',{staticStyle:{\"padding\":\"24px\"},attrs:{\"fluid\":\"\"}},[_c('v-text-field',{attrs:{\"dense\":\"\",\"append-icon\":_vm.show1 ? 'mdi-eye' : 'mdi-eye-off',\"type\":_vm.show1 ? 'text' : 'password',\"rules\":_vm.rules},on:{\"click:append\":function($event){_vm.show1 = !_vm.show1}},model:{value:(_vm.passwordDialog.pwd),callback:function ($$v) {_vm.$set(_vm.passwordDialog, \"pwd\", $$v)},expression:\"passwordDialog.pwd\"}}),_c('v-checkbox',{attrs:{\"hide-details\":\"false\",\"label\":\"记住密码, 7天内不再显示\"},model:{value:(_vm.passwordDialog.remember),callback:function ($$v) {_vm.$set(_vm.passwordDialog, \"remember\", $$v)},expression:\"passwordDialog.remember\"}})],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"error\"},on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")]),_c('v-btn',{attrs:{\"color\":\"primary\",\"dark\":\"\",\"loading\":_vm.loading},on:{\"click\":_vm.submit}},[_vm._v(\"确认\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-dialog v-model=\"visible\" persistent max-width=\"383\">\n    <v-card>\n      <v-card-title> 验证用户密码 </v-card-title>\n      <v-form ref=\"form\">\n        <v-container fluid style=\"padding: 24px\">\n          <v-text-field\n            dense\n            :append-icon=\"show1 ? 'mdi-eye' : 'mdi-eye-off'\"\n            :type=\"show1 ? 'text' : 'password'\"\n            @click:append=\"show1 = !show1\"\n            v-model=\"passwordDialog.pwd\"\n            :rules=\"rules\"\n          >\n          </v-text-field>\n\n          <v-checkbox\n            hide-details=\"false\"\n            v-model=\"passwordDialog.remember\"\n            label=\"记住密码, 7天内不再显示\"\n          >\n          </v-checkbox>\n        </v-container>\n      </v-form>\n      <v-card-actions>\n        <v-spacer />\n        <v-btn color=\"error\" @click=\"cancel\">取消</v-btn>\n        <v-btn color=\"primary\" dark @click=\"submit\" :loading=\"loading\"\n          >确认</v-btn\n        >\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script type=\"ts\">\nimport Vue from \"vue\";\nimport EVENT from \"@/constants/event\";\nexport default Vue.extend({\n  name: \"password-verify\",\n  props: {\n    visible: {\n      type: Boolean,\n      default: false,\n    }\n  },\n  data() {\n    return {\n      show1: false,\n      loading: false,\n      passwordDialog: {\n        pwd: \"\",\n        remember: false,\n      },\n      rules: [(v) => !!v || \"密码不能为空\"],\n      type: null,\n    };\n  },\n  watch: {\n    visible(v) {\n      if (!v) {\n        this.loading = false\n      }\n    }\n  },\n  methods: {\n    setType(type) {\n      this.type  = type\n    },\n    cancel() {\n      this.$emit('hideSignPwd')\n      this.passwordDialog.pwd = ''\n      this.passwordDialog.remember = false\n    },\n    submit() {\n      if (this.$refs.form.validate()) {\n        this.loading = true\n        // 校验密码\n        // 执行对应的需要用到密码参数的请求操作\n        this.$emit('handleSubmit',{type: this.type, password: this.passwordDialog.pwd})\n\n      }\n    },\n  },\n  mounted() {\n    // const { eventBus } = this.$PDFViewerApplication;\n    // eventBus.on(EVENT.SEAL.PASSWORD.OPEN, ({ callback }) => {\n    //   this.callback = callback;\n    //   this.open()\n    // });\n  },\n});\n</script>\n\n<style></style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PasswordVerify.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PasswordVerify.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PasswordVerify.vue?vue&type=template&id=55aeb064&\"\nimport script from \"./PasswordVerify.vue?vue&type=script&lang=js&\"\nexport * from \"./PasswordVerify.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import PasswordVerify from \"./PasswordVerify.vue\";\n\nPasswordVerify.install = function (Vue) {\n  Vue.component(PasswordVerify.name, PasswordVerify);\n};\n\nexport default PasswordVerify;\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"990\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ attrs }){return [_c('v-btn',_vm._b({directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],attrs:{\"icon\":\"\"},on:{\"click\":_vm.open}},'v-btn',attrs,false),[_c('v-icon',[_vm._v(\" mdi-watermark \")])],1)]}}]),model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"text-h5\"},[_vm._v(\" 添加水印 \")]),_c('v-card-text',[_c('v-form',{ref:\"form\"},[_c('v-container',[_c('v-row',{attrs:{\"justify\":\"space-between\",\"align\":\"start\"}},[_c('v-col',{attrs:{\"cols\":\"3\"}},[_c('v-row',[_c('v-file-input',{attrs:{\"accept\":\"image/*\",\"prepend-inner-icon\":\"mdi-image\",\"prepend-icon\":\"\",\"truncate-length\":\"15\",\"label\":\"上传图片作为水印\"},model:{value:(_vm.file),callback:function ($$v) {_vm.file=$$v},expression:\"file\"}})],1),_c('v-row',[_c('v-text-field',{attrs:{\"disabled\":!_vm.isText,\"clearable\":\"\",\"label\":\"文本水印\",\"rules\":_vm.textMode},model:{value:(_vm.watermark.text),callback:function ($$v) {_vm.$set(_vm.watermark, \"text\", $$v)},expression:\"watermark.text\"}})],1),_c('v-row',[_c('v-select',{attrs:{\"disabled\":!_vm.isText,\"items\":_vm.fontNames,\"label\":\"文本字体\",\"required\":\"\"},model:{value:(_vm.watermark.font),callback:function ($$v) {_vm.$set(_vm.watermark, \"font\", $$v)},expression:\"watermark.font\"}})],1),_c('v-row',[_c('v-text-field',{attrs:{\"disabled\":!_vm.isText,\"rules\":_vm.isNumber,\"label\":\"文本字号\",\"type\":\"number\",\"required\":\"\"},model:{value:(_vm.watermark.size),callback:function ($$v) {_vm.$set(_vm.watermark, \"size\", $$v)},expression:\"watermark.size\"}})],1),_c('v-row',[_c('v-color-picker',{ref:\"colorPicker\",staticStyle:{\"width\":\"100%\"},attrs:{\"disabled\":!_vm.isText,\"hide-mode-switch\":\"\",\"hide-inputs\":\"\",\"mode:sync\":\"rgba\",\"canvas-height\":\"100\"},model:{value:(_vm.watermark.color),callback:function ($$v) {_vm.$set(_vm.watermark, \"color\", $$v)},expression:\"watermark.color\"}})],1)],1),_c('v-col',{attrs:{\"cols\":\"3\"}},[_c('v-row',[_c('v-combobox',{attrs:{\"label\":\"旋转角度\",\"clearable\":\"\",\"items\":_vm.rotateItems,\"suffix\":_vm.watermark.rotate?.text ? '' : '°',\"item-text\":\"text\",\"item-value\":\"value\",\"rules\":_vm.notNULL},on:{\"change\":(v) => (this.watermark.rotate = v)},model:{value:(_vm.watermark.rotate),callback:function ($$v) {_vm.$set(_vm.watermark, \"rotate\", $$v)},expression:\"watermark.rotate\"}})],1),_c('v-row',[_c('v-text-field',{attrs:{\"label\":\"不透明度\",\"suffix\":\"%\",\"rules\":_vm.notNULL},model:{value:(_vm.watermark.opacity),callback:function ($$v) {_vm.$set(_vm.watermark, \"opacity\", $$v)},expression:\"watermark.opacity\"}})],1),_c('v-row',[_c('v-checkbox',{attrs:{\"label\":\"是否平铺\"},model:{value:(_vm.watermark.isTiled),callback:function ($$v) {_vm.$set(_vm.watermark, \"isTiled\", $$v)},expression:\"watermark.isTiled\"}})],1),_c('v-row',[_c('v-text-field',{attrs:{\"disabled\":!_vm.watermark.isTiled,\"label\":\"水印密度\",\"rules\":_vm.notNULL},model:{value:(_vm.watermark.density),callback:function ($$v) {_vm.$set(_vm.watermark, \"density\", $$v)},expression:\"watermark.density\"}})],1),_c('v-row',[_c('v-combobox',{attrs:{\"disabled\":_vm.watermark.isTiled,\"label\":\"垂直位置\",\"clearable\":\"\",\"items\":_vm.verticalItems,\"suffix\":_vm.watermark.vertical?.text ? '' : 'px',\"item-text\":\"text\",\"item-value\":\"value\",\"rules\":_vm.notNULL},on:{\"change\":(v) => (this.watermark.vertical = v)},model:{value:(_vm.watermark.vertical),callback:function ($$v) {_vm.$set(_vm.watermark, \"vertical\", $$v)},expression:\"watermark.vertical\"}})],1),_c('v-row',[_c('v-combobox',{attrs:{\"disabled\":_vm.watermark.isTiled,\"label\":\"水平位置\",\"clearable\":\"\",\"items\":_vm.horizontalItems,\"suffix\":_vm.watermark.horizontal?.text ? '' : 'px',\"item-text\":\"text\",\"item-value\":\"value\",\"rules\":_vm.notNULL},on:{\"change\":(v) => (this.watermark.horizontal = v)},model:{value:(_vm.watermark.horizontal),callback:function ($$v) {_vm.$set(_vm.watermark, \"horizontal\", $$v)},expression:\"watermark.horizontal\"}})],1)],1),_c('v-col',{staticStyle:{\"height\":\"100%\"},attrs:{\"cols\":\"5\"}},[_c('v-card',{staticStyle:{\"width\":\"100%\",\"height\":\"476px\",\"padding\":\"0\"}},[_c('v-row',{staticStyle:{\"height\":\"100%\"},attrs:{\"justify\":\"center\",\"align\":\"center\"}},[_c('canvas',{attrs:{\"id\":\"previewCanvas\"}})])],1)],1)],1)],1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\" darken-1\",\"text\":\"\"},on:{\"click\":_vm.cancel}},[_vm._v(\" 取消 \")]),_c('v-btn',{staticStyle:{\"margin-right\":\"24px\"},attrs:{\"color\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\" 确认 \")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const WATERMARK_FONT_OPTIONS = [\n  { text: \"宋体\", value: \"SIMSUN.TTC\" },\n  { text: \"微软雅黑\", value: \"msyh.ttc\" },\n  { text: \"楷体\", value: \"SIMKAI.TTF\" },\n  { text: \"黑体\", value: \"SIMHEI.TTF\" },\n];\n\nconst WATERMARK_ROTATE_OPTIONS = [\n  { text: \"旋转45°\", value: 45 },\n  { text: \"平行\", value: 0 },\n  { text: \"旋转-45°\", value: -45 },\n];\n\nconst WATERMARK_VERTICAL_OPTIONS = [\n  { text: \"顶部居中\", value: \"top\" },\n  { text: \"居中\", value: \"middle\" },\n  { text: \"底部居中\", value: \"bottom\" },\n];\n\nconst WATERMARK_HORIZONTAL_OPTIONS = [\n  { text: \"左对齐\", value: \"left\" },\n  { text: \"居中\", value: \"center\" },\n  { text: \"右对齐\", value: \"right\" },\n];\n\nexport {\n  WATERMARK_FONT_OPTIONS,\n  WATERMARK_ROTATE_OPTIONS,\n  WATERMARK_VERTICAL_OPTIONS,\n  WATERMARK_HORIZONTAL_OPTIONS,\n};\n","<template>\n  <v-dialog v-model=\"dialog\" persistent max-width=\"990\">\n    <template v-slot:activator=\"{ attrs }\">\n      <v-btn icon v-bind=\"attrs\" @click=\"open\" v-show=\"false\">\n        <v-icon> mdi-watermark </v-icon>\n      </v-btn>\n    </template>\n    <v-card>\n      <v-card-title class=\"text-h5\"> 添加水印 </v-card-title>\n      <v-card-text>\n        <v-form ref=\"form\">\n          <v-container>\n            <v-row justify=\"space-between\" align=\"start\">\n              <v-col cols=\"3\">\n                <v-row>\n                  <v-file-input\n                    accept=\"image/*\"\n                    prepend-inner-icon=\"mdi-image\"\n                    prepend-icon=\"\"\n                    v-model=\"file\"\n                    truncate-length=\"15\"\n                    label=\"上传图片作为水印\"\n                  ></v-file-input>\n                </v-row>\n                <v-row>\n                  <v-text-field\n                    :disabled=\"!isText\"\n                    v-model=\"watermark.text\"\n                    clearable\n                    label=\"文本水印\"\n                    :rules=\"textMode\"\n                  >\n                  </v-text-field>\n                </v-row>\n                <v-row>\n                  <v-select\n                    :disabled=\"!isText\"\n                    v-model=\"watermark.font\"\n                    :items=\"fontNames\"\n                    label=\"文本字体\"\n                    required\n                  >\n                  </v-select>\n                </v-row>\n                <v-row>\n                  <v-text-field\n                    :disabled=\"!isText\"\n                    v-model=\"watermark.size\"\n                    :rules=\"isNumber\"\n                    label=\"文本字号\"\n                    type=\"number\"\n                    required\n                  >\n                  </v-text-field>\n                </v-row>\n                <v-row>\n                  <v-color-picker\n                    ref=\"colorPicker\"\n                    :disabled=\"!isText\"\n                    style=\"width: 100%\"\n                    v-model=\"watermark.color\"\n                    hide-mode-switch\n                    hide-inputs\n                    mode:sync=\"rgba\"\n                    canvas-height=\"100\"\n                  ></v-color-picker>\n                </v-row>\n              </v-col>\n\n              <v-col cols=\"3\">\n                <v-row>\n                  <v-combobox\n                    label=\"旋转角度\"\n                    clearable\n                    v-model=\"watermark.rotate\"\n                    :items=\"rotateItems\"\n                    :suffix=\"watermark.rotate?.text ? '' : '°'\"\n                    item-text=\"text\"\n                    item-value=\"value\"\n                    @change=\"(v) => (this.watermark.rotate = v)\"\n                    :rules=\"notNULL\"\n                  >\n                  </v-combobox>\n                </v-row>\n                <v-row>\n                  <v-text-field\n                    label=\"不透明度\"\n                    v-model=\"watermark.opacity\"\n                    suffix=\"%\"\n                    :rules=\"notNULL\"\n                  >\n                  </v-text-field>\n                </v-row>\n                <v-row>\n                  <v-checkbox\n                    v-model=\"watermark.isTiled\"\n                    label=\"是否平铺\"\n                  ></v-checkbox>\n                </v-row>\n                <v-row>\n                  <v-text-field\n                    :disabled=\"!watermark.isTiled\"\n                    v-model=\"watermark.density\"\n                    label=\"水印密度\"\n                    :rules=\"notNULL\"\n                  >\n                  </v-text-field>\n                </v-row>\n                <v-row>\n                  <v-combobox\n                    :disabled=\"watermark.isTiled\"\n                    label=\"垂直位置\"\n                    clearable\n                    v-model=\"watermark.vertical\"\n                    :items=\"verticalItems\"\n                    :suffix=\"watermark.vertical?.text ? '' : 'px'\"\n                    item-text=\"text\"\n                    item-value=\"value\"\n                    @change=\"(v) => (this.watermark.vertical = v)\"\n                    :rules=\"notNULL\"\n                  >\n                  </v-combobox>\n                </v-row>\n                <v-row>\n                  <v-combobox\n                    :disabled=\"watermark.isTiled\"\n                    label=\"水平位置\"\n                    clearable\n                    v-model=\"watermark.horizontal\"\n                    :items=\"horizontalItems\"\n                    :suffix=\"watermark.horizontal?.text ? '' : 'px'\"\n                    item-text=\"text\"\n                    item-value=\"value\"\n                    @change=\"(v) => (this.watermark.horizontal = v)\"\n                    :rules=\"notNULL\"\n                  >\n                  </v-combobox>\n                </v-row>\n              </v-col>\n              <v-col cols=\"5\" style=\"height: 100%\">\n                <v-card style=\"width: 100%; height: 476px; padding: 0\">\n                  <v-row justify=\"center\" align=\"center\" style=\"height: 100%\">\n                    <canvas id=\"previewCanvas\"></canvas>\n                  </v-row>\n                </v-card>\n              </v-col>\n            </v-row>\n          </v-container>\n        </v-form>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer></v-spacer>\n        <v-btn color=\" darken-1\" text @click=\"cancel\"> 取消 </v-btn>\n        <v-btn color=\"primary\" @click=\"submit\" style=\"margin-right: 24px\">\n          确认\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport EVENT from \"@/constants/event\";\nimport {\n  WATERMARK_FONT_OPTIONS,\n  WATERMARK_ROTATE_OPTIONS,\n  WATERMARK_VERTICAL_OPTIONS,\n  WATERMARK_HORIZONTAL_OPTIONS,\n} from \"@/constants/watermark\";\nimport { convertConfig, renderWaterMark } from \"@/utils\";\n\nexport default Vue.extend({\n  name: \"WaterMark\",\n\n  data: () => ({\n    fontNames: WATERMARK_FONT_OPTIONS,\n    dialog: false,\n    isText: true,\n    rotateItems: WATERMARK_ROTATE_OPTIONS,\n    verticalItems: WATERMARK_VERTICAL_OPTIONS,\n    horizontalItems: WATERMARK_HORIZONTAL_OPTIONS,\n    file: null,\n    watermark: {\n      file: null,\n      // 水印内容\n      text: \"金格科技\",\n      // // 水印字体  黑体/楷体/宋体/微软雅黑\n      font: WATERMARK_FONT_OPTIONS[0].value,\n      // // 水印字号\n      size: 32,\n      // 水印颜色 rgb格式\n      color: \"rgb(0,255,0)\",\n      // 旋转角度 0-360\n      rotate: WATERMARK_ROTATE_OPTIONS[0],\n      // 不透明度\n      opacity: 100,\n      // 是否平铺  true / false\n      isTiled: true,\n      // 水印密度  0-100\n      density: 100,\n      // 垂直位置  top / middle / bottom\n      vertical: WATERMARK_VERTICAL_OPTIONS[0],\n      // 水平位置  left / center / right\n      horizontal: WATERMARK_HORIZONTAL_OPTIONS[0],\n    },\n    textMode: [(v) => !!v || \"水印内容不能为空\"],\n    notNULL: [(v) => !!v || \"不能为空\"],\n    isNumber: [\n      (v) => {\n        const pattern = /^\\+?[1-9][0-9]*$/;\n        if (pattern.test(v)) {\n          return true;\n        }\n        return \"not number\";\n      },\n    ],\n  }),\n  watch: {\n    async file(val) {\n      if (val) {\n        this.isText = false;\n        // 不传空 跳过rules\n        if (!this.watermark.text) this.watermark.text = \"   \";\n        await this.getImageBase64(val);\n      } else {\n        this.isText = true;\n        this.watermark.file = null;\n      }\n    },\n    watermark: {\n      handler(val) {\n        if (this.dialog && this.$refs.form) {\n          if (this.$refs.form.validate()) {\n            this.renderWaterMark();\n            this.isSubmit = true;\n          } else {\n            this.isSubmit = false;\n          }\n        }\n      },\n      deep: true,\n    },\n  },\n  methods: {\n    documentRenderWatermark(config) {\n      const { pdfViewer, pagesCount } = this.$PDFViewerApplication;\n      for (let i = 0; i < pagesCount; i++) {\n        const pageView = pdfViewer.getPageView(i);\n        const pageScale = pageView.viewport.scale;\n        const pageWidth = pageView.width / pageScale;\n        const pageHeight = pageView.height / pageScale;\n        const watermark = convertConfig(config, pageWidth, pageHeight);\n\n        pageView.cloudReader_watermark_add(watermark);\n      }\n    },\n    addWatermark() {\n      const config = this.getOutput();\n      this.documentRenderWatermark(config);\n    },\n    previewWatermark(config) {\n      if (!config) {\n        return;\n      }\n      this.documentRenderWatermark(config);\n    },\n    renderWaterMark() {\n      this.$nextTick(() => {\n        const { pdfViewer, page } = this.$PDFViewerApplication;\n        const pageView = pdfViewer.getPageView(page - 1);\n        const pageScale = pageView.viewport.scale;\n        const pageWidht = pageView.width / pageScale;\n        const pageHeight = pageView.height / pageScale;\n\n        // 将第一页绘制在 this.previewCanvas 上，绘制比例为原页面大小的一半\n        const previewScale = 0.5;\n        const previewWidth = pageWidht * previewScale;\n        const previewHeight = pageHeight * previewScale;\n\n        let data = this.getOutput();\n        const config = convertConfig(data, pageWidht, pageHeight); // 获取水印设置\n        const previewCanvas = document.querySelector(\"#previewCanvas\");\n        renderWaterMark(\n          config,\n          previewCanvas,\n          previewScale,\n          previewWidth,\n          previewHeight,\n          pageView,\n          false\n        );\n        // 渲染水印\n        // if (this.isSubmit) {\n        //   转换数据给后端\n        //   const params = this.convertParams();\n        //   this.$service.addWatermark(params).then(() => {\n        //     this.addWatermark();\n        //   });\n        // }\n      });\n    },\n\n    /**\n     * 获得可用的watermark-config对象\n     */\n    getOutput() {\n      let output = {\n        ...this.watermark,\n      };\n      output.vertical = output.vertical?.text\n        ? output.vertical.value\n        : output.vertical;\n\n      output.rotate = output.rotate?.text ? output.rotate.value : output.rotate;\n\n      output.horizontal = output.horizontal?.text\n        ? output.horizontal.value\n        : output.horizontal;\n\n      output.opacity = output.opacity / 100;\n\n      output.fontName = WATERMARK_FONT_OPTIONS.filter(\n        (i) => i.value == output.font\n      )[0].text;\n\n      if (this.$refs.colorPicker) {\n        let v = this.$refs.colorPicker.$data.internalValue;\n        output.color = `rgb(${v.rgba[\"r\"]},${v.rgba[\"g\"]},${v.rgba[\"b\"]})`;\n      }\n      return output;\n    },\n\n    /**\n     * 打开水印面板\n     */\n    open() {\n      // color-picker无法接受rgb字符串格式 要手动转换值\n      if (typeof this.watermark.color === \"string\") {\n        let colorCopy = this.watermark.color\n          .replace(\"rgb(\", \"\")\n          .replace(\")\", \"\")\n          .split(\",\");\n        this.watermark.color = {\n          b: colorCopy[2],\n          g: colorCopy[1],\n          r: colorCopy[0],\n        };\n      }\n      this.dialog = true;\n      this.renderWaterMark();\n    },\n    cancel() {\n      this.dialog = false;\n    },\n    submit() {\n      if (this.$refs.form.validate()) {\n        // TEST  打印参数\n        console.log(this.getOutput());\n        this.renderWaterMark();\n      }\n    },\n\n    /**\n     * 获取图片文件base64\n     * @param {*} file\n     */\n    async getImageBase64(file) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        let fileBase64 = e.target.result;\n        this.watermark.file = fileBase64;\n      };\n      reader.readAsDataURL(file);\n    },\n  },\n  mounted() {\n    const { eventBus } = this.$PDFViewerApplication;\n\n    const { previewWatermark } = this.$appConfig;\n\n    eventBus.on(EVENT.PDF.DOCUMENT_LOADED, () =>\n      this.previewWatermark(previewWatermark)\n    );\n  },\n  destroyed() {\n    const { eventBus } = this.$PDFViewerApplication;\n    eventBus.off(EVENT.PDF.DOCUMENT_LOADED, this.addWatermark);\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WaterMark.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WaterMark.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WaterMark.vue?vue&type=template&id=a305b4d0&scoped=true&\"\nimport script from \"./WaterMark.vue?vue&type=script&lang=js&\"\nexport * from \"./WaterMark.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a305b4d0\",\n  null\n  \n)\n\nexport default component.exports","import WaterMark from \"./WaterMark.vue\";\n\nWaterMark.install = function (Vue) {\n  Vue.component(WaterMark.name, WaterMark);\n};\n\nexport default WaterMark;\n","import { IWatermarkConfig } from \"./types\";\nimport { WATERMARK_FONT_OPTIONS } from \"../constants/watermark\";\n\nconst defaultWatermarkConfig = {\n  // 水印内容\n  text: \"金格科技\",\n  // 水印字体\n  font: \"黑体\",\n  // 水印字号\n  size: 32,\n  // 水印颜色\n  color: \"rgb(22,22,22)\",\n  // 旋转角度 0-360\n  rotate: 45,\n  // 不透明度\n  opacity: 80,\n  // 是否平铺  true / false\n  isTiled: false,\n  // 水印密度 0-100\n  density: 100,\n  // 垂直位置 top / middle / bottom\n  vertical: \"middle\",\n  // 水平位置 left / center / right\n  horizontal: \"center\",\n};\n\nconst setWatermarkConfig = (\n  userWatermarkConfig: IWatermarkConfig | null\n): IWatermarkConfig | null => {\n  if (userWatermarkConfig) {\n    const fontName = userWatermarkConfig.font || defaultWatermarkConfig.font;\n    return Object.assign({}, defaultWatermarkConfig, userWatermarkConfig, {\n      file: null,\n      fontName:fontName,\n      font: WATERMARK_FONT_OPTIONS.filter((i) => i.text == fontName)[0].text,\n      opacity: userWatermarkConfig.opacity / 100,\n    });\n  } else {\n    return null;\n  }\n};\n\nexport { setWatermarkConfig };\n","import { setWatermarkConfig } from \"./setWatermarkConfig\";\nimport { IAppConfig, IRotateConfig, IWatermarkConfig } from \"./types\";\n\nclass AppConfig {\n  /**\n   * 金格云阅读后端服务接口地址\n   */\n  _url: string;\n\n  /**\n   * 文档ID\n   * 后端盖章、删除、验证时需要通过 documentId 匹配文档\n   */\n  _documentId: string;\n\n  /**\n   * 水印预览配置\n   */\n  _previewWatermark: IWatermarkConfig | null;\n\n  /**\n   * iSignature内部私有方法\n   */\n  // iSignatureAPI: any;\n\n  constructor(userConfig: IAppConfig) {\n    // 内部调用方法\n    // this.iSignatureAPI = new iSignatureAPI();\n\n    const { url = \"\", documentId = \"\", previewWatermark = null } = userConfig;\n    this._url = url;\n    this._documentId = documentId;\n    this._previewWatermark = null;\n    if (previewWatermark) {\n      this._previewWatermark = setWatermarkConfig(previewWatermark);\n    }\n  }\n\n  /**\n   * 水印预览配置\n   */\n  get previewWatermark() {\n    return this._previewWatermark;\n  }\n\n  /**\n   * 设置后端服务接口地址\n   */\n  set url(url: string) {\n    this._url = url;\n  }\n\n  /**\n   * 获取后端服务接口地址\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * 设置文档ID\n   */\n  set documentId(documentId: string) {\n    this._documentId = documentId;\n  }\n\n  /**\n   * 获取文档ID\n   */\n  get documentId() {\n    return this._documentId;\n  }\n}\n\n/**\n * 用户配置项\n */\nconst userConfig: IAppConfig = (<any>window).setAppConfig();\n\n/**\n * 合并配置项\n */\nconst appConfig = new AppConfig(userConfig);\n(<any>window).KGPdfViewerWebApp = (<any>window).appConfig = appConfig;\n\nexport type { IAppConfig };\nexport default appConfig;\n","import QueryString from \"qs\";\nimport axios from \"axios\";\nimport appConfig from \"../config/index.ts\";\n// import { onError } from \"../utils/index\";\n// import { Loading } from \"@design/esign-ui-vue\";\n\nlet loading;\n\nconst request = axios.create({\n  baseURL: appConfig.url,\n  method: \"POST\",\n  params: { docType: 0 },\n  paramsSerializer: (params) =>\n    QueryString.stringify(params, { arrayFormat: \"brackets\" }),\n  headers: {\n    \"Content-Type\": \"application/json;charset=UTF-8\",\n    \"X-Requested-With\": \"XMLHttpRequest\",\n  },\n});\n\nrequest.interceptors.request.use(\n  (config) => {\n    // loading = Loading.service({\n    //   fullscreen: true,\n    //   lock: true,\n    //   text: \"正在加载中\",\n    // });\n\n    if (config.method === \"post\") {\n      config.data = {\n        isEncrypt: false,\n        data: config.data,\n      };\n    }\n\n    return config;\n  },\n  (error) => {\n    return error;\n  }\n);\n\nrequest.interceptors.response.use((response) => {\n  // loading.close();\n  let message;\n  switch (response.status) {\n    case 200:\n      // eslint-disable-next-line no-case-declarations\n      const { data } = response;\n      if (data) {\n        if (\n          response.config.responseType === \"arraybuffer\" &&\n          data.byteLength > 0\n        ) {\n          return data;\n        }\n        // 因为 getLiscenseInfo 返回的数据中没有 status, || data.companyName 是为了做兼容这种情况\n        if (data.status || data.companyName) {\n          return data;\n        } else if (data.message) {\n          // onError(data.message)\n          return Promise.reject();\n        } else {\n          return data.status;\n        }\n      } else {\n        message = `请求失败：${data.status}，请联系管理员`;\n        // onError(message)\n        return Promise.reject();\n      }\n    default:\n      message = `请求失败：${data.status}，请联系管理员`;\n      // onError(message)\n      return Promise.reject();\n  }\n});\n\nexport default request;\n","import request from \"./request\";\nimport { parseQueryString } from \"../utils/index\";\nimport { enc } from \"crypto-js\";\n\n/**\n * 集中式盖章时的印章类型\n * PT：普通印章（OFD 文档不支持普通印章）\n * GM：国密印章\n * GB：国办印章\n */\nconst sealType = \"GM\";\n\n/**\n * 印章来源\n * 0：签章服务器\n * 1：硬件密钥盘(客户端)\n **/\nconst sealOrigin = 0;\n\n/**\n * 证书来源\n * 0：签章服务器\n * 1：硬件密钥盘(客户端)\n */\nconst certOrigin = 0;\n\nlet documentId;\nif (window.appConfig.documentId) {\n  documentId = window.appConfig.documentId;\n} else {\n  const queryString = location.search\n    ? location.search.split(\"?\")[1]\n    : undefined;\n\n  if (queryString) {\n    documentId = parseQueryString(queryString).get(\"documentid\");\n  }\n}\n\n/**\n * 获取文档流\n */\nconst download = () => {\n  if (documentId) {\n    return request({\n      method: \"GET\",\n      params: { action: \"downloadnew\", documentId },\n      responseType: \"arraybuffer\",\n    });\n  } else {\n    throw new Error(\"未指定要加载的文档\");\n  }\n};\n\n/**\n * 获取印章列表\n */\nconst getSeals = (_password) => {\n  const { userId, filterSealNames, password } = window.appConfig;\n  return request({\n    data: {\n      action: \"getSeals\",\n      sealType,\n      keySN: userId,\n      filterSealNames,\n      sealOrigin,\n      certOrigin,\n      password: password || _password,\n    },\n  });\n};\n\n/**\n * 盖章\n */\nconst stampSeal = (seals, cert) => {\n  const { stampType, userId, documentId } = window.appConfig;\n  let convetSeals = seals.map((seal) => ({\n    keySN: userId,\n    extraPosition: {},\n    lastSelected: {},\n    currentPage: seal.page.toString(),\n    esid: seal.esid,\n    width: seal.width,\n    height: seal.height,\n    imgExt: seal.imgExt,\n    imgdata: seal.imgdata,\n    left: seal.left,\n    top: seal.top,\n    page: seal.page.toString(),\n    sealData: seal.sealData,\n    sealtag: seal.sealtag,\n    signName: seal.signName,\n    signSN: enc.Base64.stringify(enc.Utf8.parse(seal.signSN)),\n    unitName: seal.unitName,\n    userCode: seal.userCode,\n    userName: seal.userName,\n    version: seal.version,\n  }));\n\n  convetSeals = stampType != 0 ? [convetSeals] : convetSeals;\n\n  return request({\n    data: {\n      action: \"stampSeal\",\n      certOrigin,\n      documentId,\n      stampType,\n      cert,\n      algorithmType: \"RSA\",\n      sealType,\n      appcode: \"\",\n      clientCode: \"\",\n      isUkey: false,\n      isWebAuth: false,\n      pdfPwd: \"\",\n      seals: convetSeals,\n    },\n  });\n};\n\n/**\n * 验证印章\n */\n\nconst verifySeal = ({ pageNo, x, y }) => {\n  const { documentId } = window.appConfig;\n  return request({\n    data: {\n      action: \"verifySeal\",\n      documentId,\n      certOrigin,\n      page: pageNo,\n      x,\n      y,\n      isSM: false,\n    },\n  });\n};\n\n/**\n * 删除印章\n */\nconst deleteSeal = ({ pageNo, x, y, _password }) => {\n  const { password, documentId, userId } = window.appConfig;\n  return request({\n    data: {\n      action: \"deleteSeal\",\n      documentId,\n      keySN: userId,\n      certOrigin: 0,\n      page: pageNo,\n      x,\n      y,\n      password: password || _password,\n      isSM: false,\n    },\n  });\n};\n\n/**\n * 判断是不是最后一个章，只有最后一个章才可以删除\n */\nconst checkLastone = ({ pageNo, x, y }) => {\n  const { documentId } = window.appConfig;\n  return request({\n    data: {\n      action: \"checkLastone\",\n      documentId,\n      page: pageNo,\n      x,\n      y,\n    },\n  });\n};\n\nconst addWatermark = ({\n  color,\n  fontName,\n  fontSize,\n  fullscreen,\n  leftBottomPosition,\n  opacity,\n  rotate,\n  source,\n  text,\n  density,\n  file,\n}) => {\n  return request({\n    data: {\n      action: \"addWatermark\",\n      documentId: window.appConfig.documentId,\n      color,\n      fontName,\n      file,\n      fontSize,\n      fullscreen,\n      leftBottomPosition,\n      opacity,\n      density,\n      rotate,\n      source,\n      text,\n    },\n  });\n};\n\nexport {\n  download,\n  getSeals,\n  stampSeal,\n  deleteSeal,\n  checkLastone,\n  verifySeal,\n  addWatermark,\n};\nexport default {\n  download,\n  getSeals,\n  stampSeal,\n  deleteSeal,\n  checkLastone,\n  verifySeal,\n  addWatermark,\n};\n","\nimport Vue from \"vue\";\nimport PdfFindBar from \"@/components/base/PdfFindBar\";\nimport PdfSidebar from \"@/components/base/PdfSidebar\";\nimport PageController from \"@/components/base/PageController\";\nimport SecondaryToolbar from \"@/components/base/SecondaryToolbar\";\nimport ScaleController from \"@/components/base/ScaleController\";\n// import RotateController from \"@/components/base/RotateController\";\nimport ProgressBar from \"@/components/base/ProgressBar\";\nimport PasswordPrompt from \"@/components/base/PasswordPrompt\";\nimport PasswordVerify from \"@/components/biz/PasswordVerify\";\n// import SealSelector from \"@/components/biz/SealSelector\";\nimport WaterMark from \"@/components/biz/WaterMark\";\nimport EVENT from \"@/constants/event\";\nimport { TEXT_LAYER_MODE } from \"@/components/doc\";\nimport \"./global.scss\";\n\nimport * as Services from \"@/service\";\n\nexport default Vue.extend({\n  name: \"App\",\n\n  components: {\n    PdfFindBar,\n    PdfSidebar,\n    SecondaryToolbar,\n    PageController,\n    ScaleController,\n    // RotateController,\n    ProgressBar,\n    PasswordPrompt,\n    // SealSelector,\n    WaterMark,\n    PasswordVerify,\n  },\n\n  data: () => ({\n    password: \"123456\",\n    sideBar: {\n      visible: false,\n    },\n\n    // signpwd\n    signPwdVisible: false,\n    // sign\n    sealList: [],\n    sealSelectorVisible: false,\n  }),\n\n  computed: {\n    textLayerMode() {\n      return this.$vuetify.breakpoint.mobile\n        ? TEXT_LAYER_MODE.DISABLE\n        : TEXT_LAYER_MODE.ENABLE;\n    },\n    fileUrl() {\n      const { url, documentId } = this.$appConfig;\n      return `${url}?docType=0&action=download&documentId=${documentId}&t=${new Date().getTime()}`;\n    },\n  },\n\n  methods: {\n    sidebarToggle() {\n      const { eventBus } = this.$PDFViewerApplication;\n\n      this.sideBar.visible = !this.sideBar.visible;\n      eventBus.dispatch(EVENT.PDF.SIDEBAR.TOGGLE);\n      eventBus.dispatch(EVENT.PDF.SIDEBAR.UPDATE_THUMBNAIL_VIEWER);\n    },\n\n    //sign\n    // 印章按钮点击事件处理\n    onSealSelctorBtnClick(type: number) {\n      this.signPwdVisible = true;\n      this.$refs.signPwd.setType(type);\n    },\n    onSignPwdSubmit({ type, password }: { type: number; password: string }) {\n      switch (type) {\n        case 0:\n          Services.getSeals(password).then((res) => {\n            // 调用服务或者传参获取印章数据\n            if (res.status) {\n              // 获得印章成功 关闭pwd面板 存储密码?\n              this.signPwdVisible = false;\n              this.sealList = res.seals;\n              // 打开面板\n              if (this.sealList.length) {\n                this.sealSelectorVisible = true;\n              } else {\n                // 是否添加提示没有可展示的印章\n              }\n            } else {\n              // 密码错误的提示 或者请求错误\n            }\n\n            // 关闭signPwd\n          });\n          break;\n        default:\n          break;\n      }\n    },\n    // 选择印章弹窗 - close\n    onSealSelectorClose() {\n      // this.setIsSealSelectorVisible(false);\n      this.sealSelectorVisible = false;\n    },\n    // 选择印章弹窗 - cancel\n    onSealSelectorCancel() {\n      // this.setIsSealSelectorVisible(false);\n      this.sealSelectorVisible = false;\n    },\n    // 选择印章弹窗 - confirm\n    onSealSelectorConfirm(data) {\n      // this.setIsSealSelectorVisible(false);\n      this.sealSelectorVisible = false;\n      const img = document.createElement(\"img\");\n      img.width = data.width;\n      img.height = data.height;\n      img.src = data.imgdata;\n      img.onload = () => {\n        // this.$refs.setStampSeal.addDragContent({\n        //   w: data.width,\n        //   h: data.height,\n        //   content: img,\n        //   ...data,\n        // });\n        // // 顺序不要变，先添加再显示\n        // this.setStampSealVisible = true;\n        // this.setSealDisabled(true);\n      };\n    },\n  },\n});\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--15-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--15-3!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--15-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--15-3!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=0fc83e14&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  state: {},\n  mutations: {},\n  actions: {},\n  modules: {},\n});\n","import \"@fontsource/roboto\";\nimport \"@mdi/font/css/materialdesignicons.css\";\nimport Vue from \"vue\";\nimport Vuetify from \"vuetify/lib/framework\";\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n  breakpoint: {\n    mobileBreakpoint: \"sm\", // 960px\n  },\n});\n","import Vue from \"vue\";\nimport App from \"@/App.vue\";\nimport store from \"@/store\";\nimport vuetify from \"@/plugins/vuetify\";\nimport appConfig from \"./config/index\";\nimport DocViewer from \"@/components/doc\";\n\nimport service from \"@/service\";\nimport request from \"@/service/request\";\n\nVue.config.productionTip = false;\nVue.prototype.$appConfig = appConfig;\nVue.prototype.$http = request;\nVue.prototype.$service = service;\nVue.use(DocViewer);\n\nnew Vue({\n  store,\n  vuetify,\n  render: (h) => h(App),\n}).$mount(\"#app\");\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"f0b6\";"],"sourceRoot":""}